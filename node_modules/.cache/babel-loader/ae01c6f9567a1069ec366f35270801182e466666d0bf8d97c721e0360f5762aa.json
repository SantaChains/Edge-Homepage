{"ast":null,"code":"var _jsxFileName = \"D:\\\\Jliu Pureey\\\\Documents\\\\Editor\\\\extion\\\\homepage\\\\src\\\\modes\\\\CurtainMode\\\\CurtainMode.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect, useRef } from 'react';\nimport styled from 'styled-components';\nimport { saveToStorage, getFromStorage } from '../../utils/storage';\n\n// 图标导入\nimport ArrowBackIcon from '@mui/icons-material/ArrowBack';\nimport SettingsIcon from '@mui/icons-material/Settings';\nimport TextIncreaseIcon from '@mui/icons-material/TextIncrease';\nimport TextDecreaseIcon from '@mui/icons-material/TextDecrease';\nimport ArrowUpwardIcon from '@mui/icons-material/ArrowUpward';\nimport ArrowDownwardIcon from '@mui/icons-material/ArrowDownward';\nimport ArrowForwardIcon from '@mui/icons-material/ArrowForward';\nimport ArrowBackIcon2 from '@mui/icons-material/ArrowBack';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst CurtainContainer = styled.div`\n  width: 100%;\n  height: 100vh;\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  justify-content: center;\n  background-color: var(--background-color);\n  position: relative;\n  overflow: hidden;\n`;\n_c = CurtainContainer;\nconst MarqueeContainer = styled.div`\n  width: 100%;\n  height: 100%;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  overflow: hidden;\n  position: relative;\n`;\n_c2 = MarqueeContainer;\nconst MarqueeText = styled.div`\n  font-size: ${props => props.fontSize}px;\n  color: var(--text-color);\n  white-space: ${props => props.direction === 'left' || props.direction === 'right' ? 'nowrap' : 'pre-wrap'};\n  word-break: ${props => props.direction === 'left' || props.direction === 'right' ? 'keep-all' : 'break-word'};\n  text-align: center;\n  position: absolute;\n  width: ${props => props.direction === 'left' || props.direction === 'right' ? 'auto' : '100%'};\n  max-width: ${props => props.direction === 'left' || props.direction === 'right' ? 'none' : 'calc(100% - 80px)'};\n  padding: ${props => props.direction === 'left' || props.direction === 'right' ? '0 20px' : '0 40px'};\n  line-height: 1.4;\n  font-weight: 500;\n  text-shadow: 0 1px 2px rgba(0, 0, 0, 0.1);\n  transform: ${props => {\n  if (props.direction === 'up') return `translateX(-50%) translateY(${props.position}px)`;\n  if (props.direction === 'down') return `translateX(-50%) translateY(${props.position}px)`;\n  if (props.direction === 'left') return `translateY(-50%) translateX(${props.position}px)`;\n  if (props.direction === 'right') return `translateY(-50%) translateX(${props.position}px)`;\n  return 'none';\n}};\n  \n  /* 确保文本在水平滚动时不换行，垂直滚动时居中 */\n  ${props => (props.direction === 'left' || props.direction === 'right') && `\n    display: inline-block;\n    min-width: max-content;\n    top: 50%;\n  `}\n  \n  ${props => (props.direction === 'up' || props.direction === 'down') && `\n    left: 50%;\n  `}\n`;\n_c3 = MarqueeText;\nconst ControlPanel = styled.div`\n  position: absolute;\n  bottom: 20px;\n  left: 20px;\n  display: flex;\n  flex-direction: column;\n  gap: 10px;\n  background-color: var(--card-background);\n  padding: 15px;\n  border-radius: 8px;\n  box-shadow: 0 2px 10px rgba(0, 0, 0, 0.2);\n  z-index: 100;\n`;\n_c4 = ControlPanel;\nconst ControlRow = styled.div`\n  display: flex;\n  align-items: center;\n  gap: 10px;\n`;\n_c5 = ControlRow;\nconst ControlLabel = styled.span`\n  font-size: 14px;\n  color: var(--text-color);\n  width: 60px;\n`;\n_c6 = ControlLabel;\nconst ControlButton = styled.button`\n  background-color: var(--primary-color);\n  color: white;\n  border: none;\n  border-radius: 50%;\n  width: 36px;\n  height: 36px;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  cursor: pointer;\n  \n  &:hover {\n    background-color: #3a7bc8;\n  }\n`;\n_c7 = ControlButton;\nconst SpeedInput = styled.input`\n  width: 60px;\n  padding: 5px;\n  text-align: center;\n  border: 1px solid var(--border-color);\n  border-radius: 4px;\n  background-color: var(--background-color);\n  color: var(--text-color);\n`;\n_c8 = SpeedInput;\nconst DirectionButton = styled.button`\n  background-color: ${props => props.active ? 'var(--primary-color)' : 'var(--card-background)'};\n  color: ${props => props.active ? 'white' : 'var(--text-color)'};\n  border: 1px solid ${props => props.active ? 'var(--primary-color)' : 'var(--border-color)'};\n  border-radius: 4px;\n  width: 36px;\n  height: 36px;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  cursor: pointer;\n  \n  &:hover {\n    background-color: ${props => props.active ? 'var(--primary-color)' : 'rgba(0, 0, 0, 0.05)'};\n  }\n`;\n_c9 = DirectionButton;\nconst BackButton = styled.button`\n  position: absolute;\n  top: 20px;\n  left: 20px;\n  background-color: var(--primary-color);\n  color: white;\n  border: none;\n  border-radius: 50%;\n  width: 40px;\n  height: 40px;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  cursor: pointer;\n  z-index: 100;\n  \n  &:hover {\n    background-color: #3a7bc8;\n  }\n`;\n_c0 = BackButton;\nconst Modal = styled.div`\n  position: fixed;\n  top: 0;\n  left: 0;\n  right: 0;\n  bottom: 0;\n  background-color: rgba(0, 0, 0, 0.5);\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  z-index: 1000;\n`;\n_c1 = Modal;\nconst ModalContent = styled.div`\n  background-color: var(--background-color);\n  padding: 20px;\n  border-radius: 8px;\n  width: 90%;\n  max-width: 600px;\n  box-shadow: 0 5px 15px rgba(0, 0, 0, 0.3);\n`;\n_c10 = ModalContent;\nconst ModalHeader = styled.div`\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  margin-bottom: 20px;\n`;\n_c11 = ModalHeader;\nconst ModalTitle = styled.h3`\n  margin: 0;\n  font-size: 18px;\n  font-weight: 500;\n`;\n_c12 = ModalTitle;\nconst CloseButton = styled.button`\n  background: none;\n  border: none;\n  cursor: pointer;\n  font-size: 20px;\n  color: var(--text-color);\n`;\n_c13 = CloseButton;\nconst TextArea = styled.textarea`\n  width: 100%;\n  height: 300px;\n  padding: 10px;\n  border: 1px solid var(--border-color);\n  border-radius: 4px;\n  background-color: var(--background-color);\n  color: var(--text-color);\n  font-size: 14px;\n  resize: vertical;\n  font-family: inherit;\n`;\n_c14 = TextArea;\nconst ButtonGroup = styled.div`\n  display: flex;\n  justify-content: flex-end;\n  gap: 10px;\n  margin-top: 20px;\n`;\n_c15 = ButtonGroup;\nconst Button = styled.button`\n  padding: 8px 16px;\n  border: none;\n  border-radius: 4px;\n  cursor: pointer;\n  font-size: 14px;\n  \n  &.primary {\n    background-color: var(--primary-color);\n    color: white;\n    \n    &:hover {\n      background-color: #3a7bc8;\n    }\n  }\n  \n  &.secondary {\n    background-color: var(--card-background);\n    color: var(--text-color);\n    border: 1px solid var(--border-color);\n    \n    &:hover {\n      background-color: rgba(0, 0, 0, 0.05);\n    }\n  }\n`;\n_c16 = Button;\nconst DebugPanel = styled.div`\n  position: absolute;\n  top: 20px;\n  right: 20px;\n  background-color: rgba(0, 0, 0, 0.8);\n  color: white;\n  padding: 10px;\n  border-radius: 4px;\n  font-size: 12px;\n  font-family: monospace;\n  z-index: 100;\n  max-width: 200px;\n  \n  .debug-item {\n    margin-bottom: 4px;\n  }\n`;\n_c17 = DebugPanel;\nconst ToggleButton = styled.button`\n  position: absolute;\n  top: 70px;\n  left: 20px;\n  background-color: var(--card-background);\n  color: var(--text-color);\n  border: 1px solid var(--border-color);\n  border-radius: 4px;\n  padding: 8px 12px;\n  cursor: pointer;\n  font-size: 12px;\n  z-index: 100;\n  \n  &:hover {\n    background-color: var(--hover-background);\n  }\n`;\n_c18 = ToggleButton;\nconst CurtainMode = ({\n  onBack\n}) => {\n  _s();\n  // 状态\n  const [text, setText] = useState('欢迎使用幕模式，点击左下角设置按钮可以修改文本内容和滚动方向、速度。');\n  const [fontSize, setFontSize] = useState(36);\n  const [speed, setSpeed] = useState(1);\n  const [direction, setDirection] = useState('up'); // up, down, left, right\n  const [position, setPosition] = useState(0);\n  const [showModal, setShowModal] = useState(false);\n  const [editText, setEditText] = useState('');\n  const [showControls, setShowControls] = useState(true);\n  const [showDebug, setShowDebug] = useState(false);\n  const [debugInfo, setDebugInfo] = useState({\n    containerSize: {},\n    textSize: {}\n  });\n\n  // 引用\n  const containerRef = useRef(null);\n  const textRef = useRef(null);\n  const animationRef = useRef(null);\n\n  // 初始化数据\n  useEffect(() => {\n    const savedText = getFromStorage('curtain-text', '欢迎使用幕模式，点击左下角设置按钮可以修改文本内容和滚动方向、速度。');\n    const savedFontSize = getFromStorage('curtain-font-size', 36);\n    const savedSpeed = getFromStorage('curtain-speed', 1);\n    const savedDirection = getFromStorage('curtain-direction', 'up');\n    setText(savedText);\n    setFontSize(savedFontSize);\n    setSpeed(savedSpeed);\n    setDirection(savedDirection);\n    setEditText(savedText);\n  }, []);\n\n  // 处理动画\n  useEffect(() => {\n    if (!containerRef.current || !textRef.current) return;\n    const updateAnimation = () => {\n      // 等待DOM更新后再获取尺寸\n      setTimeout(() => {\n        if (!containerRef.current || !textRef.current) return;\n        const containerWidth = containerRef.current.offsetWidth;\n        const containerHeight = containerRef.current.offsetHeight;\n        // 使用scrollWidth和scrollHeight获取真实的文本尺寸\n        const textWidth = textRef.current.scrollWidth;\n        const textHeight = textRef.current.scrollHeight;\n\n        // 更新调试信息\n        setDebugInfo({\n          containerSize: {\n            width: containerWidth,\n            height: containerHeight\n          },\n          textSize: {\n            width: textWidth,\n            height: textHeight\n          }\n        });\n        let startPosition = 0;\n        let endPosition = 0;\n        const buffer = 100; // 增加缓冲区确保文本完全离开屏幕\n\n        // 根据方向设置起始和结束位置，确保文本完全穿过屏幕\n        if (direction === 'up') {\n          startPosition = containerHeight + buffer; // 从屏幕底部下方开始\n          endPosition = -textHeight - buffer; // 到屏幕顶部上方结束\n        } else if (direction === 'down') {\n          startPosition = -textHeight - buffer; // 从屏幕顶部上方开始\n          endPosition = containerHeight + buffer; // 到屏幕底部下方结束\n        } else if (direction === 'left') {\n          startPosition = containerWidth + buffer; // 从屏幕右侧外开始\n          endPosition = -textWidth - buffer; // 到屏幕左侧外结束\n        } else if (direction === 'right') {\n          startPosition = -textWidth - buffer; // 从屏幕左侧外开始\n          endPosition = containerWidth + buffer; // 到屏幕右侧外结束\n        }\n\n        // 设置初始位置\n        setPosition(startPosition);\n\n        // 动画函数\n        const animate = () => {\n          setPosition(prevPosition => {\n            // 计算新位置\n            let newPosition;\n            if (direction === 'up' || direction === 'left') {\n              newPosition = prevPosition - Math.abs(speed);\n            } else {\n              newPosition = prevPosition + Math.abs(speed);\n            }\n\n            // 检查是否需要重置位置 - 确保文本完全离开屏幕后才重置\n            if ((direction === 'up' || direction === 'left') && newPosition <= endPosition) {\n              return startPosition;\n            } else if ((direction === 'down' || direction === 'right') && newPosition >= endPosition) {\n              return startPosition;\n            }\n            return newPosition;\n          });\n          animationRef.current = requestAnimationFrame(animate);\n        };\n\n        // 清除之前的动画\n        if (animationRef.current) {\n          cancelAnimationFrame(animationRef.current);\n        }\n\n        // 启动新动画\n        animationRef.current = requestAnimationFrame(animate);\n      }, 50);\n    };\n    updateAnimation();\n\n    // 监听窗口大小变化\n    const handleResize = () => {\n      updateAnimation();\n    };\n    window.addEventListener('resize', handleResize);\n\n    // 清理函数\n    return () => {\n      window.removeEventListener('resize', handleResize);\n      if (animationRef.current) {\n        cancelAnimationFrame(animationRef.current);\n      }\n    };\n  }, [direction, speed, text, fontSize]);\n\n  // 增加字体大小\n  const increaseFontSize = () => {\n    const newSize = Math.min(fontSize + 4, 72);\n    setFontSize(newSize);\n    saveToStorage('curtain-font-size', newSize);\n  };\n\n  // 减小字体大小\n  const decreaseFontSize = () => {\n    const newSize = Math.max(fontSize - 4, 16);\n    setFontSize(newSize);\n    saveToStorage('curtain-font-size', newSize);\n  };\n\n  // 处理速度变化\n  const handleSpeedChange = e => {\n    const value = parseFloat(e.target.value);\n    if (!isNaN(value)) {\n      setSpeed(value);\n      saveToStorage('curtain-speed', value);\n    }\n  };\n\n  // 设置方向\n  const setScrollDirection = dir => {\n    setDirection(dir);\n    saveToStorage('curtain-direction', dir);\n  };\n\n  // 打开设置模态框\n  const openSettingsModal = () => {\n    setEditText(text);\n    setShowModal(true);\n  };\n\n  // 关闭设置模态框\n  const closeModal = () => {\n    setShowModal(false);\n  };\n\n  // 处理文本变化\n  const handleTextChange = e => {\n    setEditText(e.target.value);\n  };\n\n  // 保存设置\n  const saveSettings = () => {\n    setText(editText);\n    saveToStorage('curtain-text', editText);\n    closeModal();\n  };\n\n  // 切换控制面板显示\n  const toggleControls = () => {\n    setShowControls(prev => !prev);\n  };\n\n  // 切换调试面板显示\n  const toggleDebug = () => {\n    setShowDebug(prev => !prev);\n  };\n  return /*#__PURE__*/_jsxDEV(CurtainContainer, {\n    ref: containerRef,\n    children: [/*#__PURE__*/_jsxDEV(BackButton, {\n      onClick: onBack,\n      title: \"\\u8FD4\\u56DE\",\n      children: /*#__PURE__*/_jsxDEV(ArrowBackIcon, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 479,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 478,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(ToggleButton, {\n      onClick: toggleControls,\n      title: \"\\u5207\\u6362\\u63A7\\u5236\\u9762\\u677F\",\n      children: showControls ? '隐藏控制' : '显示控制'\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 482,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(MarqueeContainer, {\n      children: /*#__PURE__*/_jsxDEV(MarqueeText, {\n        ref: textRef,\n        fontSize: fontSize,\n        direction: direction,\n        position: position,\n        children: text\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 487,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 486,\n      columnNumber: 7\n    }, this), showControls && /*#__PURE__*/_jsxDEV(ControlPanel, {\n      children: [/*#__PURE__*/_jsxDEV(ControlRow, {\n        children: [/*#__PURE__*/_jsxDEV(ControlLabel, {\n          children: \"\\u5B57\\u4F53\\u5927\\u5C0F\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 500,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(ControlButton, {\n          onClick: decreaseFontSize,\n          title: \"\\u51CF\\u5C0F\\u5B57\\u4F53\",\n          children: /*#__PURE__*/_jsxDEV(TextDecreaseIcon, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 502,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 501,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(ControlButton, {\n          onClick: increaseFontSize,\n          title: \"\\u589E\\u5927\\u5B57\\u4F53\",\n          children: /*#__PURE__*/_jsxDEV(TextIncreaseIcon, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 505,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 504,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 499,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(ControlRow, {\n        children: [/*#__PURE__*/_jsxDEV(ControlLabel, {\n          children: \"\\u6EDA\\u52A8\\u901F\\u5EA6\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 510,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(SpeedInput, {\n          type: \"number\",\n          value: speed,\n          onChange: handleSpeedChange,\n          step: \"0.5\",\n          min: \"0.1\",\n          max: \"10\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 511,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 509,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(ControlRow, {\n        children: [/*#__PURE__*/_jsxDEV(ControlLabel, {\n          children: \"\\u6EDA\\u52A8\\u65B9\\u5411\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 522,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(DirectionButton, {\n          active: direction === 'up',\n          onClick: () => setScrollDirection('up'),\n          title: \"\\u5411\\u4E0A\\u6EDA\\u52A8\",\n          children: /*#__PURE__*/_jsxDEV(ArrowUpwardIcon, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 528,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 523,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(DirectionButton, {\n          active: direction === 'down',\n          onClick: () => setScrollDirection('down'),\n          title: \"\\u5411\\u4E0B\\u6EDA\\u52A8\",\n          children: /*#__PURE__*/_jsxDEV(ArrowDownwardIcon, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 535,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 530,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(DirectionButton, {\n          active: direction === 'left',\n          onClick: () => setScrollDirection('left'),\n          title: \"\\u5411\\u5DE6\\u6EDA\\u52A8\",\n          children: /*#__PURE__*/_jsxDEV(ArrowBackIcon2, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 542,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 537,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(DirectionButton, {\n          active: direction === 'right',\n          onClick: () => setScrollDirection('right'),\n          title: \"\\u5411\\u53F3\\u6EDA\\u52A8\",\n          children: /*#__PURE__*/_jsxDEV(ArrowForwardIcon, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 549,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 544,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 521,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(ControlRow, {\n        children: [/*#__PURE__*/_jsxDEV(ControlButton, {\n          onClick: openSettingsModal,\n          title: \"\\u8BBE\\u7F6E\\u6587\\u672C\\u5185\\u5BB9\",\n          children: /*#__PURE__*/_jsxDEV(SettingsIcon, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 555,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 554,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(ControlButton, {\n          onClick: toggleDebug,\n          title: \"\\u8C03\\u8BD5\\u4FE1\\u606F\",\n          children: \"\\uD83D\\uDC1B\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 557,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 553,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 498,\n      columnNumber: 9\n    }, this), showDebug && /*#__PURE__*/_jsxDEV(DebugPanel, {\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"debug-item\",\n        children: /*#__PURE__*/_jsxDEV(\"strong\", {\n          children: \"\\u5BB9\\u5668\\u5C3A\\u5BF8:\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 567,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 566,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"debug-item\",\n        children: [\"\\u5BBD: \", debugInfo.containerSize.width, \"px\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 569,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"debug-item\",\n        children: [\"\\u9AD8: \", debugInfo.containerSize.height, \"px\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 572,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"debug-item\",\n        children: /*#__PURE__*/_jsxDEV(\"strong\", {\n          children: \"\\u6587\\u672C\\u5C3A\\u5BF8:\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 576,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 575,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"debug-item\",\n        children: [\"\\u5BBD: \", debugInfo.textSize.width, \"px\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 578,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"debug-item\",\n        children: [\"\\u9AD8: \", debugInfo.textSize.height, \"px\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 581,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"debug-item\",\n        children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n          children: \"\\u5F53\\u524D\\u4F4D\\u7F6E:\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 585,\n          columnNumber: 13\n        }, this), \" \", Math.round(position), \"px\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 584,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"debug-item\",\n        children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n          children: \"\\u6EDA\\u52A8\\u65B9\\u5411:\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 588,\n          columnNumber: 13\n        }, this), \" \", direction]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 587,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"debug-item\",\n        children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n          children: \"\\u6EDA\\u52A8\\u901F\\u5EA6:\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 591,\n          columnNumber: 13\n        }, this), \" \", speed, \"px/frame\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 590,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 565,\n      columnNumber: 9\n    }, this), showModal && /*#__PURE__*/_jsxDEV(Modal, {\n      children: /*#__PURE__*/_jsxDEV(ModalContent, {\n        children: [/*#__PURE__*/_jsxDEV(ModalHeader, {\n          children: [/*#__PURE__*/_jsxDEV(ModalTitle, {\n            children: \"\\u8BBE\\u7F6E\\u6587\\u672C\\u5185\\u5BB9\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 600,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(CloseButton, {\n            onClick: closeModal,\n            children: \"\\xD7\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 601,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 599,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(TextArea, {\n          value: editText,\n          onChange: handleTextChange,\n          placeholder: \"\\u8F93\\u5165\\u8981\\u663E\\u793A\\u7684\\u6587\\u672C\\u5185\\u5BB9\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 604,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(ButtonGroup, {\n          children: [/*#__PURE__*/_jsxDEV(Button, {\n            className: \"secondary\",\n            onClick: closeModal,\n            children: \"\\u53D6\\u6D88\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 611,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(Button, {\n            className: \"primary\",\n            onClick: saveSettings,\n            children: \"\\u4FDD\\u5B58\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 612,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 610,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 598,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 597,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 477,\n    columnNumber: 5\n  }, this);\n};\n_s(CurtainMode, \"hlS0be7M+rlV1MovdDLV2t+HFSg=\");\n_c19 = CurtainMode;\nexport default CurtainMode;\nvar _c, _c2, _c3, _c4, _c5, _c6, _c7, _c8, _c9, _c0, _c1, _c10, _c11, _c12, _c13, _c14, _c15, _c16, _c17, _c18, _c19;\n$RefreshReg$(_c, \"CurtainContainer\");\n$RefreshReg$(_c2, \"MarqueeContainer\");\n$RefreshReg$(_c3, \"MarqueeText\");\n$RefreshReg$(_c4, \"ControlPanel\");\n$RefreshReg$(_c5, \"ControlRow\");\n$RefreshReg$(_c6, \"ControlLabel\");\n$RefreshReg$(_c7, \"ControlButton\");\n$RefreshReg$(_c8, \"SpeedInput\");\n$RefreshReg$(_c9, \"DirectionButton\");\n$RefreshReg$(_c0, \"BackButton\");\n$RefreshReg$(_c1, \"Modal\");\n$RefreshReg$(_c10, \"ModalContent\");\n$RefreshReg$(_c11, \"ModalHeader\");\n$RefreshReg$(_c12, \"ModalTitle\");\n$RefreshReg$(_c13, \"CloseButton\");\n$RefreshReg$(_c14, \"TextArea\");\n$RefreshReg$(_c15, \"ButtonGroup\");\n$RefreshReg$(_c16, \"Button\");\n$RefreshReg$(_c17, \"DebugPanel\");\n$RefreshReg$(_c18, \"ToggleButton\");\n$RefreshReg$(_c19, \"CurtainMode\");","map":{"version":3,"names":["React","useState","useEffect","useRef","styled","saveToStorage","getFromStorage","ArrowBackIcon","SettingsIcon","TextIncreaseIcon","TextDecreaseIcon","ArrowUpwardIcon","ArrowDownwardIcon","ArrowForwardIcon","ArrowBackIcon2","jsxDEV","_jsxDEV","CurtainContainer","div","_c","MarqueeContainer","_c2","MarqueeText","props","fontSize","direction","position","_c3","ControlPanel","_c4","ControlRow","_c5","ControlLabel","span","_c6","ControlButton","button","_c7","SpeedInput","input","_c8","DirectionButton","active","_c9","BackButton","_c0","Modal","_c1","ModalContent","_c10","ModalHeader","_c11","ModalTitle","h3","_c12","CloseButton","_c13","TextArea","textarea","_c14","ButtonGroup","_c15","Button","_c16","DebugPanel","_c17","ToggleButton","_c18","CurtainMode","onBack","_s","text","setText","setFontSize","speed","setSpeed","setDirection","setPosition","showModal","setShowModal","editText","setEditText","showControls","setShowControls","showDebug","setShowDebug","debugInfo","setDebugInfo","containerSize","textSize","containerRef","textRef","animationRef","savedText","savedFontSize","savedSpeed","savedDirection","current","updateAnimation","setTimeout","containerWidth","offsetWidth","containerHeight","offsetHeight","textWidth","scrollWidth","textHeight","scrollHeight","width","height","startPosition","endPosition","buffer","animate","prevPosition","newPosition","Math","abs","requestAnimationFrame","cancelAnimationFrame","handleResize","window","addEventListener","removeEventListener","increaseFontSize","newSize","min","decreaseFontSize","max","handleSpeedChange","e","value","parseFloat","target","isNaN","setScrollDirection","dir","openSettingsModal","closeModal","handleTextChange","saveSettings","toggleControls","prev","toggleDebug","ref","children","onClick","title","fileName","_jsxFileName","lineNumber","columnNumber","type","onChange","step","className","round","placeholder","_c19","$RefreshReg$"],"sources":["D:/Jliu Pureey/Documents/Editor/extion/homepage/src/modes/CurtainMode/CurtainMode.js"],"sourcesContent":["import React, { useState, useEffect, useRef } from 'react';\r\nimport styled from 'styled-components';\r\nimport { saveToStorage, getFromStorage } from '../../utils/storage';\r\n\r\n// 图标导入\r\nimport ArrowBackIcon from '@mui/icons-material/ArrowBack';\r\nimport SettingsIcon from '@mui/icons-material/Settings';\r\nimport TextIncreaseIcon from '@mui/icons-material/TextIncrease';\r\nimport TextDecreaseIcon from '@mui/icons-material/TextDecrease';\r\nimport ArrowUpwardIcon from '@mui/icons-material/ArrowUpward';\r\nimport ArrowDownwardIcon from '@mui/icons-material/ArrowDownward';\r\nimport ArrowForwardIcon from '@mui/icons-material/ArrowForward';\r\nimport ArrowBackIcon2 from '@mui/icons-material/ArrowBack';\r\n\r\nconst CurtainContainer = styled.div`\r\n  width: 100%;\r\n  height: 100vh;\r\n  display: flex;\r\n  flex-direction: column;\r\n  align-items: center;\r\n  justify-content: center;\r\n  background-color: var(--background-color);\r\n  position: relative;\r\n  overflow: hidden;\r\n`;\r\n\r\nconst MarqueeContainer = styled.div`\r\n  width: 100%;\r\n  height: 100%;\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n  overflow: hidden;\r\n  position: relative;\r\n`;\r\n\r\nconst MarqueeText = styled.div`\r\n  font-size: ${props => props.fontSize}px;\r\n  color: var(--text-color);\r\n  white-space: ${props => props.direction === 'left' || props.direction === 'right' ? 'nowrap' : 'pre-wrap'};\r\n  word-break: ${props => props.direction === 'left' || props.direction === 'right' ? 'keep-all' : 'break-word'};\r\n  text-align: center;\r\n  position: absolute;\r\n  width: ${props => props.direction === 'left' || props.direction === 'right' ? 'auto' : '100%'};\r\n  max-width: ${props => props.direction === 'left' || props.direction === 'right' ? 'none' : 'calc(100% - 80px)'};\r\n  padding: ${props => props.direction === 'left' || props.direction === 'right' ? '0 20px' : '0 40px'};\r\n  line-height: 1.4;\r\n  font-weight: 500;\r\n  text-shadow: 0 1px 2px rgba(0, 0, 0, 0.1);\r\n  transform: ${props => {\r\n    if (props.direction === 'up') return `translateX(-50%) translateY(${props.position}px)`;\r\n    if (props.direction === 'down') return `translateX(-50%) translateY(${props.position}px)`;\r\n    if (props.direction === 'left') return `translateY(-50%) translateX(${props.position}px)`;\r\n    if (props.direction === 'right') return `translateY(-50%) translateX(${props.position}px)`;\r\n    return 'none';\r\n  }};\r\n  \r\n  /* 确保文本在水平滚动时不换行，垂直滚动时居中 */\r\n  ${props => (props.direction === 'left' || props.direction === 'right') && `\r\n    display: inline-block;\r\n    min-width: max-content;\r\n    top: 50%;\r\n  `}\r\n  \r\n  ${props => (props.direction === 'up' || props.direction === 'down') && `\r\n    left: 50%;\r\n  `}\r\n`;\r\n\r\nconst ControlPanel = styled.div`\r\n  position: absolute;\r\n  bottom: 20px;\r\n  left: 20px;\r\n  display: flex;\r\n  flex-direction: column;\r\n  gap: 10px;\r\n  background-color: var(--card-background);\r\n  padding: 15px;\r\n  border-radius: 8px;\r\n  box-shadow: 0 2px 10px rgba(0, 0, 0, 0.2);\r\n  z-index: 100;\r\n`;\r\n\r\nconst ControlRow = styled.div`\r\n  display: flex;\r\n  align-items: center;\r\n  gap: 10px;\r\n`;\r\n\r\nconst ControlLabel = styled.span`\r\n  font-size: 14px;\r\n  color: var(--text-color);\r\n  width: 60px;\r\n`;\r\n\r\nconst ControlButton = styled.button`\r\n  background-color: var(--primary-color);\r\n  color: white;\r\n  border: none;\r\n  border-radius: 50%;\r\n  width: 36px;\r\n  height: 36px;\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n  cursor: pointer;\r\n  \r\n  &:hover {\r\n    background-color: #3a7bc8;\r\n  }\r\n`;\r\n\r\nconst SpeedInput = styled.input`\r\n  width: 60px;\r\n  padding: 5px;\r\n  text-align: center;\r\n  border: 1px solid var(--border-color);\r\n  border-radius: 4px;\r\n  background-color: var(--background-color);\r\n  color: var(--text-color);\r\n`;\r\n\r\nconst DirectionButton = styled.button`\r\n  background-color: ${props => props.active ? 'var(--primary-color)' : 'var(--card-background)'};\r\n  color: ${props => props.active ? 'white' : 'var(--text-color)'};\r\n  border: 1px solid ${props => props.active ? 'var(--primary-color)' : 'var(--border-color)'};\r\n  border-radius: 4px;\r\n  width: 36px;\r\n  height: 36px;\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n  cursor: pointer;\r\n  \r\n  &:hover {\r\n    background-color: ${props => props.active ? 'var(--primary-color)' : 'rgba(0, 0, 0, 0.05)'};\r\n  }\r\n`;\r\n\r\nconst BackButton = styled.button`\r\n  position: absolute;\r\n  top: 20px;\r\n  left: 20px;\r\n  background-color: var(--primary-color);\r\n  color: white;\r\n  border: none;\r\n  border-radius: 50%;\r\n  width: 40px;\r\n  height: 40px;\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n  cursor: pointer;\r\n  z-index: 100;\r\n  \r\n  &:hover {\r\n    background-color: #3a7bc8;\r\n  }\r\n`;\r\n\r\nconst Modal = styled.div`\r\n  position: fixed;\r\n  top: 0;\r\n  left: 0;\r\n  right: 0;\r\n  bottom: 0;\r\n  background-color: rgba(0, 0, 0, 0.5);\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n  z-index: 1000;\r\n`;\r\n\r\nconst ModalContent = styled.div`\r\n  background-color: var(--background-color);\r\n  padding: 20px;\r\n  border-radius: 8px;\r\n  width: 90%;\r\n  max-width: 600px;\r\n  box-shadow: 0 5px 15px rgba(0, 0, 0, 0.3);\r\n`;\r\n\r\nconst ModalHeader = styled.div`\r\n  display: flex;\r\n  justify-content: space-between;\r\n  align-items: center;\r\n  margin-bottom: 20px;\r\n`;\r\n\r\nconst ModalTitle = styled.h3`\r\n  margin: 0;\r\n  font-size: 18px;\r\n  font-weight: 500;\r\n`;\r\n\r\nconst CloseButton = styled.button`\r\n  background: none;\r\n  border: none;\r\n  cursor: pointer;\r\n  font-size: 20px;\r\n  color: var(--text-color);\r\n`;\r\n\r\nconst TextArea = styled.textarea`\r\n  width: 100%;\r\n  height: 300px;\r\n  padding: 10px;\r\n  border: 1px solid var(--border-color);\r\n  border-radius: 4px;\r\n  background-color: var(--background-color);\r\n  color: var(--text-color);\r\n  font-size: 14px;\r\n  resize: vertical;\r\n  font-family: inherit;\r\n`;\r\n\r\nconst ButtonGroup = styled.div`\r\n  display: flex;\r\n  justify-content: flex-end;\r\n  gap: 10px;\r\n  margin-top: 20px;\r\n`;\r\n\r\nconst Button = styled.button`\r\n  padding: 8px 16px;\r\n  border: none;\r\n  border-radius: 4px;\r\n  cursor: pointer;\r\n  font-size: 14px;\r\n  \r\n  &.primary {\r\n    background-color: var(--primary-color);\r\n    color: white;\r\n    \r\n    &:hover {\r\n      background-color: #3a7bc8;\r\n    }\r\n  }\r\n  \r\n  &.secondary {\r\n    background-color: var(--card-background);\r\n    color: var(--text-color);\r\n    border: 1px solid var(--border-color);\r\n    \r\n    &:hover {\r\n      background-color: rgba(0, 0, 0, 0.05);\r\n    }\r\n  }\r\n`;\r\n\r\nconst DebugPanel = styled.div`\r\n  position: absolute;\r\n  top: 20px;\r\n  right: 20px;\r\n  background-color: rgba(0, 0, 0, 0.8);\r\n  color: white;\r\n  padding: 10px;\r\n  border-radius: 4px;\r\n  font-size: 12px;\r\n  font-family: monospace;\r\n  z-index: 100;\r\n  max-width: 200px;\r\n  \r\n  .debug-item {\r\n    margin-bottom: 4px;\r\n  }\r\n`;\r\n\r\nconst ToggleButton = styled.button`\r\n  position: absolute;\r\n  top: 70px;\r\n  left: 20px;\r\n  background-color: var(--card-background);\r\n  color: var(--text-color);\r\n  border: 1px solid var(--border-color);\r\n  border-radius: 4px;\r\n  padding: 8px 12px;\r\n  cursor: pointer;\r\n  font-size: 12px;\r\n  z-index: 100;\r\n  \r\n  &:hover {\r\n    background-color: var(--hover-background);\r\n  }\r\n`;\r\n\r\nconst CurtainMode = ({ onBack }) => {\r\n  // 状态\r\n  const [text, setText] = useState('欢迎使用幕模式，点击左下角设置按钮可以修改文本内容和滚动方向、速度。');\r\n  const [fontSize, setFontSize] = useState(36);\r\n  const [speed, setSpeed] = useState(1);\r\n  const [direction, setDirection] = useState('up'); // up, down, left, right\r\n  const [position, setPosition] = useState(0);\r\n  const [showModal, setShowModal] = useState(false);\r\n  const [editText, setEditText] = useState('');\r\n  const [showControls, setShowControls] = useState(true);\r\n  const [showDebug, setShowDebug] = useState(false);\r\n  const [debugInfo, setDebugInfo] = useState({ containerSize: {}, textSize: {} });\r\n  \r\n  // 引用\r\n  const containerRef = useRef(null);\r\n  const textRef = useRef(null);\r\n  const animationRef = useRef(null);\r\n  \r\n  // 初始化数据\r\n  useEffect(() => {\r\n    const savedText = getFromStorage('curtain-text', '欢迎使用幕模式，点击左下角设置按钮可以修改文本内容和滚动方向、速度。');\r\n    const savedFontSize = getFromStorage('curtain-font-size', 36);\r\n    const savedSpeed = getFromStorage('curtain-speed', 1);\r\n    const savedDirection = getFromStorage('curtain-direction', 'up');\r\n    \r\n    setText(savedText);\r\n    setFontSize(savedFontSize);\r\n    setSpeed(savedSpeed);\r\n    setDirection(savedDirection);\r\n    setEditText(savedText);\r\n  }, []);\r\n  \r\n  // 处理动画\r\n  useEffect(() => {\r\n    if (!containerRef.current || !textRef.current) return;\r\n    \r\n    const updateAnimation = () => {\r\n      // 等待DOM更新后再获取尺寸\r\n      setTimeout(() => {\r\n        if (!containerRef.current || !textRef.current) return;\r\n        \r\n        const containerWidth = containerRef.current.offsetWidth;\r\n        const containerHeight = containerRef.current.offsetHeight;\r\n        // 使用scrollWidth和scrollHeight获取真实的文本尺寸\r\n        const textWidth = textRef.current.scrollWidth;\r\n        const textHeight = textRef.current.scrollHeight;\r\n        \r\n        // 更新调试信息\r\n        setDebugInfo({\r\n          containerSize: { width: containerWidth, height: containerHeight },\r\n          textSize: { width: textWidth, height: textHeight }\r\n        });\r\n        \r\n        let startPosition = 0;\r\n        let endPosition = 0;\r\n        const buffer = 100; // 增加缓冲区确保文本完全离开屏幕\r\n        \r\n        // 根据方向设置起始和结束位置，确保文本完全穿过屏幕\r\n        if (direction === 'up') {\r\n          startPosition = containerHeight + buffer; // 从屏幕底部下方开始\r\n          endPosition = -textHeight - buffer; // 到屏幕顶部上方结束\r\n        } else if (direction === 'down') {\r\n          startPosition = -textHeight - buffer; // 从屏幕顶部上方开始\r\n          endPosition = containerHeight + buffer; // 到屏幕底部下方结束\r\n        } else if (direction === 'left') {\r\n          startPosition = containerWidth + buffer; // 从屏幕右侧外开始\r\n          endPosition = -textWidth - buffer; // 到屏幕左侧外结束\r\n        } else if (direction === 'right') {\r\n          startPosition = -textWidth - buffer; // 从屏幕左侧外开始\r\n          endPosition = containerWidth + buffer; // 到屏幕右侧外结束\r\n        }\r\n        \r\n        // 设置初始位置\r\n        setPosition(startPosition);\r\n        \r\n        // 动画函数\r\n        const animate = () => {\r\n          setPosition(prevPosition => {\r\n            // 计算新位置\r\n            let newPosition;\r\n            if (direction === 'up' || direction === 'left') {\r\n              newPosition = prevPosition - Math.abs(speed);\r\n            } else {\r\n              newPosition = prevPosition + Math.abs(speed);\r\n            }\r\n            \r\n            // 检查是否需要重置位置 - 确保文本完全离开屏幕后才重置\r\n            if ((direction === 'up' || direction === 'left') && newPosition <= endPosition) {\r\n              return startPosition;\r\n            } else if ((direction === 'down' || direction === 'right') && newPosition >= endPosition) {\r\n              return startPosition;\r\n            }\r\n            \r\n            return newPosition;\r\n          });\r\n          \r\n          animationRef.current = requestAnimationFrame(animate);\r\n        };\r\n        \r\n        // 清除之前的动画\r\n        if (animationRef.current) {\r\n          cancelAnimationFrame(animationRef.current);\r\n        }\r\n        \r\n        // 启动新动画\r\n        animationRef.current = requestAnimationFrame(animate);\r\n      }, 50);\r\n    };\r\n    \r\n    updateAnimation();\r\n    \r\n    // 监听窗口大小变化\r\n    const handleResize = () => {\r\n      updateAnimation();\r\n    };\r\n    \r\n    window.addEventListener('resize', handleResize);\r\n    \r\n    // 清理函数\r\n    return () => {\r\n      window.removeEventListener('resize', handleResize);\r\n      if (animationRef.current) {\r\n        cancelAnimationFrame(animationRef.current);\r\n      }\r\n    };\r\n  }, [direction, speed, text, fontSize]);\r\n  \r\n  // 增加字体大小\r\n  const increaseFontSize = () => {\r\n    const newSize = Math.min(fontSize + 4, 72);\r\n    setFontSize(newSize);\r\n    saveToStorage('curtain-font-size', newSize);\r\n  };\r\n  \r\n  // 减小字体大小\r\n  const decreaseFontSize = () => {\r\n    const newSize = Math.max(fontSize - 4, 16);\r\n    setFontSize(newSize);\r\n    saveToStorage('curtain-font-size', newSize);\r\n  };\r\n  \r\n  // 处理速度变化\r\n  const handleSpeedChange = (e) => {\r\n    const value = parseFloat(e.target.value);\r\n    if (!isNaN(value)) {\r\n      setSpeed(value);\r\n      saveToStorage('curtain-speed', value);\r\n    }\r\n  };\r\n  \r\n  // 设置方向\r\n  const setScrollDirection = (dir) => {\r\n    setDirection(dir);\r\n    saveToStorage('curtain-direction', dir);\r\n  };\r\n  \r\n  // 打开设置模态框\r\n  const openSettingsModal = () => {\r\n    setEditText(text);\r\n    setShowModal(true);\r\n  };\r\n  \r\n  // 关闭设置模态框\r\n  const closeModal = () => {\r\n    setShowModal(false);\r\n  };\r\n  \r\n  // 处理文本变化\r\n  const handleTextChange = (e) => {\r\n    setEditText(e.target.value);\r\n  };\r\n  \r\n  // 保存设置\r\n  const saveSettings = () => {\r\n    setText(editText);\r\n    saveToStorage('curtain-text', editText);\r\n    closeModal();\r\n  };\r\n  \r\n  // 切换控制面板显示\r\n  const toggleControls = () => {\r\n    setShowControls(prev => !prev);\r\n  };\r\n  \r\n  // 切换调试面板显示\r\n  const toggleDebug = () => {\r\n    setShowDebug(prev => !prev);\r\n  };\r\n  \r\n  return (\r\n    <CurtainContainer ref={containerRef}>\r\n      <BackButton onClick={onBack} title=\"返回\">\r\n        <ArrowBackIcon />\r\n      </BackButton>\r\n      \r\n      <ToggleButton onClick={toggleControls} title=\"切换控制面板\">\r\n        {showControls ? '隐藏控制' : '显示控制'}\r\n      </ToggleButton>\r\n      \r\n      <MarqueeContainer>\r\n        <MarqueeText \r\n          ref={textRef}\r\n          fontSize={fontSize}\r\n          direction={direction}\r\n          position={position}\r\n        >\r\n          {text}\r\n        </MarqueeText>\r\n      </MarqueeContainer>\r\n      \r\n      {showControls && (\r\n        <ControlPanel>\r\n          <ControlRow>\r\n            <ControlLabel>字体大小</ControlLabel>\r\n            <ControlButton onClick={decreaseFontSize} title=\"减小字体\">\r\n              <TextDecreaseIcon />\r\n            </ControlButton>\r\n            <ControlButton onClick={increaseFontSize} title=\"增大字体\">\r\n              <TextIncreaseIcon />\r\n            </ControlButton>\r\n          </ControlRow>\r\n          \r\n          <ControlRow>\r\n            <ControlLabel>滚动速度</ControlLabel>\r\n            <SpeedInput \r\n              type=\"number\" \r\n              value={speed} \r\n              onChange={handleSpeedChange} \r\n              step=\"0.5\"\r\n              min=\"0.1\"\r\n              max=\"10\"\r\n            />\r\n          </ControlRow>\r\n          \r\n          <ControlRow>\r\n            <ControlLabel>滚动方向</ControlLabel>\r\n            <DirectionButton \r\n              active={direction === 'up'} \r\n              onClick={() => setScrollDirection('up')}\r\n              title=\"向上滚动\"\r\n            >\r\n              <ArrowUpwardIcon />\r\n            </DirectionButton>\r\n            <DirectionButton \r\n              active={direction === 'down'} \r\n              onClick={() => setScrollDirection('down')}\r\n              title=\"向下滚动\"\r\n            >\r\n              <ArrowDownwardIcon />\r\n            </DirectionButton>\r\n            <DirectionButton \r\n              active={direction === 'left'} \r\n              onClick={() => setScrollDirection('left')}\r\n              title=\"向左滚动\"\r\n            >\r\n              <ArrowBackIcon2 />\r\n            </DirectionButton>\r\n            <DirectionButton \r\n              active={direction === 'right'} \r\n              onClick={() => setScrollDirection('right')}\r\n              title=\"向右滚动\"\r\n            >\r\n              <ArrowForwardIcon />\r\n            </DirectionButton>\r\n          </ControlRow>\r\n          \r\n          <ControlRow>\r\n            <ControlButton onClick={openSettingsModal} title=\"设置文本内容\">\r\n              <SettingsIcon />\r\n            </ControlButton>\r\n            <ControlButton onClick={toggleDebug} title=\"调试信息\">\r\n              🐛\r\n            </ControlButton>\r\n          </ControlRow>\r\n        </ControlPanel>\r\n      )}\r\n      \r\n      {showDebug && (\r\n        <DebugPanel>\r\n          <div className=\"debug-item\">\r\n            <strong>容器尺寸:</strong>\r\n          </div>\r\n          <div className=\"debug-item\">\r\n            宽: {debugInfo.containerSize.width}px\r\n          </div>\r\n          <div className=\"debug-item\">\r\n            高: {debugInfo.containerSize.height}px\r\n          </div>\r\n          <div className=\"debug-item\">\r\n            <strong>文本尺寸:</strong>\r\n          </div>\r\n          <div className=\"debug-item\">\r\n            宽: {debugInfo.textSize.width}px\r\n          </div>\r\n          <div className=\"debug-item\">\r\n            高: {debugInfo.textSize.height}px\r\n          </div>\r\n          <div className=\"debug-item\">\r\n            <strong>当前位置:</strong> {Math.round(position)}px\r\n          </div>\r\n          <div className=\"debug-item\">\r\n            <strong>滚动方向:</strong> {direction}\r\n          </div>\r\n          <div className=\"debug-item\">\r\n            <strong>滚动速度:</strong> {speed}px/frame\r\n          </div>\r\n        </DebugPanel>\r\n      )}\r\n      \r\n      {showModal && (\r\n        <Modal>\r\n          <ModalContent>\r\n            <ModalHeader>\r\n              <ModalTitle>设置文本内容</ModalTitle>\r\n              <CloseButton onClick={closeModal}>&times;</CloseButton>\r\n            </ModalHeader>\r\n            \r\n            <TextArea \r\n              value={editText} \r\n              onChange={handleTextChange}\r\n              placeholder=\"输入要显示的文本内容\"\r\n            />\r\n            \r\n            <ButtonGroup>\r\n              <Button className=\"secondary\" onClick={closeModal}>取消</Button>\r\n              <Button className=\"primary\" onClick={saveSettings}>保存</Button>\r\n            </ButtonGroup>\r\n          </ModalContent>\r\n        </Modal>\r\n      )}\r\n    </CurtainContainer>\r\n  );\r\n};\r\n\r\nexport default CurtainMode;"],"mappings":";;AAAA,OAAOA,KAAK,IAAIC,QAAQ,EAAEC,SAAS,EAAEC,MAAM,QAAQ,OAAO;AAC1D,OAAOC,MAAM,MAAM,mBAAmB;AACtC,SAASC,aAAa,EAAEC,cAAc,QAAQ,qBAAqB;;AAEnE;AACA,OAAOC,aAAa,MAAM,+BAA+B;AACzD,OAAOC,YAAY,MAAM,8BAA8B;AACvD,OAAOC,gBAAgB,MAAM,kCAAkC;AAC/D,OAAOC,gBAAgB,MAAM,kCAAkC;AAC/D,OAAOC,eAAe,MAAM,iCAAiC;AAC7D,OAAOC,iBAAiB,MAAM,mCAAmC;AACjE,OAAOC,gBAAgB,MAAM,kCAAkC;AAC/D,OAAOC,cAAc,MAAM,+BAA+B;AAAC,SAAAC,MAAA,IAAAC,OAAA;AAE3D,MAAMC,gBAAgB,GAAGb,MAAM,CAACc,GAAG;AACnC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AAACC,EAAA,GAVIF,gBAAgB;AAYtB,MAAMG,gBAAgB,GAAGhB,MAAM,CAACc,GAAG;AACnC;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AAACG,GAAA,GARID,gBAAgB;AAUtB,MAAME,WAAW,GAAGlB,MAAM,CAACc,GAAG;AAC9B,eAAeK,KAAK,IAAIA,KAAK,CAACC,QAAQ;AACtC;AACA,iBAAiBD,KAAK,IAAIA,KAAK,CAACE,SAAS,KAAK,MAAM,IAAIF,KAAK,CAACE,SAAS,KAAK,OAAO,GAAG,QAAQ,GAAG,UAAU;AAC3G,gBAAgBF,KAAK,IAAIA,KAAK,CAACE,SAAS,KAAK,MAAM,IAAIF,KAAK,CAACE,SAAS,KAAK,OAAO,GAAG,UAAU,GAAG,YAAY;AAC9G;AACA;AACA,WAAWF,KAAK,IAAIA,KAAK,CAACE,SAAS,KAAK,MAAM,IAAIF,KAAK,CAACE,SAAS,KAAK,OAAO,GAAG,MAAM,GAAG,MAAM;AAC/F,eAAeF,KAAK,IAAIA,KAAK,CAACE,SAAS,KAAK,MAAM,IAAIF,KAAK,CAACE,SAAS,KAAK,OAAO,GAAG,MAAM,GAAG,mBAAmB;AAChH,aAAaF,KAAK,IAAIA,KAAK,CAACE,SAAS,KAAK,MAAM,IAAIF,KAAK,CAACE,SAAS,KAAK,OAAO,GAAG,QAAQ,GAAG,QAAQ;AACrG;AACA;AACA;AACA,eAAeF,KAAK,IAAI;EACpB,IAAIA,KAAK,CAACE,SAAS,KAAK,IAAI,EAAE,OAAO,+BAA+BF,KAAK,CAACG,QAAQ,KAAK;EACvF,IAAIH,KAAK,CAACE,SAAS,KAAK,MAAM,EAAE,OAAO,+BAA+BF,KAAK,CAACG,QAAQ,KAAK;EACzF,IAAIH,KAAK,CAACE,SAAS,KAAK,MAAM,EAAE,OAAO,+BAA+BF,KAAK,CAACG,QAAQ,KAAK;EACzF,IAAIH,KAAK,CAACE,SAAS,KAAK,OAAO,EAAE,OAAO,+BAA+BF,KAAK,CAACG,QAAQ,KAAK;EAC1F,OAAO,MAAM;AACf,CAAC;AACH;AACA;AACA,IAAIH,KAAK,IAAI,CAACA,KAAK,CAACE,SAAS,KAAK,MAAM,IAAIF,KAAK,CAACE,SAAS,KAAK,OAAO,KAAK;AAC5E;AACA;AACA;AACA,GAAG;AACH;AACA,IAAIF,KAAK,IAAI,CAACA,KAAK,CAACE,SAAS,KAAK,IAAI,IAAIF,KAAK,CAACE,SAAS,KAAK,MAAM,KAAK;AACzE;AACA,GAAG;AACH,CAAC;AAACE,GAAA,GA/BIL,WAAW;AAiCjB,MAAMM,YAAY,GAAGxB,MAAM,CAACc,GAAG;AAC/B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AAACW,GAAA,GAZID,YAAY;AAclB,MAAME,UAAU,GAAG1B,MAAM,CAACc,GAAG;AAC7B;AACA;AACA;AACA,CAAC;AAACa,GAAA,GAJID,UAAU;AAMhB,MAAME,YAAY,GAAG5B,MAAM,CAAC6B,IAAI;AAChC;AACA;AACA;AACA,CAAC;AAACC,GAAA,GAJIF,YAAY;AAMlB,MAAMG,aAAa,GAAG/B,MAAM,CAACgC,MAAM;AACnC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AAACC,GAAA,GAfIF,aAAa;AAiBnB,MAAMG,UAAU,GAAGlC,MAAM,CAACmC,KAAK;AAC/B;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AAACC,GAAA,GARIF,UAAU;AAUhB,MAAMG,eAAe,GAAGrC,MAAM,CAACgC,MAAM;AACrC,sBAAsBb,KAAK,IAAIA,KAAK,CAACmB,MAAM,GAAG,sBAAsB,GAAG,wBAAwB;AAC/F,WAAWnB,KAAK,IAAIA,KAAK,CAACmB,MAAM,GAAG,OAAO,GAAG,mBAAmB;AAChE,sBAAsBnB,KAAK,IAAIA,KAAK,CAACmB,MAAM,GAAG,sBAAsB,GAAG,qBAAqB;AAC5F;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wBAAwBnB,KAAK,IAAIA,KAAK,CAACmB,MAAM,GAAG,sBAAsB,GAAG,qBAAqB;AAC9F;AACA,CAAC;AAACC,GAAA,GAfIF,eAAe;AAiBrB,MAAMG,UAAU,GAAGxC,MAAM,CAACgC,MAAM;AAChC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AAACS,GAAA,GAnBID,UAAU;AAqBhB,MAAME,KAAK,GAAG1C,MAAM,CAACc,GAAG;AACxB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AAAC6B,GAAA,GAXID,KAAK;AAaX,MAAME,YAAY,GAAG5C,MAAM,CAACc,GAAG;AAC/B;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AAAC+B,IAAA,GAPID,YAAY;AASlB,MAAME,WAAW,GAAG9C,MAAM,CAACc,GAAG;AAC9B;AACA;AACA;AACA;AACA,CAAC;AAACiC,IAAA,GALID,WAAW;AAOjB,MAAME,UAAU,GAAGhD,MAAM,CAACiD,EAAE;AAC5B;AACA;AACA;AACA,CAAC;AAACC,IAAA,GAJIF,UAAU;AAMhB,MAAMG,WAAW,GAAGnD,MAAM,CAACgC,MAAM;AACjC;AACA;AACA;AACA;AACA;AACA,CAAC;AAACoB,IAAA,GANID,WAAW;AAQjB,MAAME,QAAQ,GAAGrD,MAAM,CAACsD,QAAQ;AAChC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AAACC,IAAA,GAXIF,QAAQ;AAad,MAAMG,WAAW,GAAGxD,MAAM,CAACc,GAAG;AAC9B;AACA;AACA;AACA;AACA,CAAC;AAAC2C,IAAA,GALID,WAAW;AAOjB,MAAME,MAAM,GAAG1D,MAAM,CAACgC,MAAM;AAC5B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AAAC2B,IAAA,GAzBID,MAAM;AA2BZ,MAAME,UAAU,GAAG5D,MAAM,CAACc,GAAG;AAC7B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AAAC+C,IAAA,GAhBID,UAAU;AAkBhB,MAAME,YAAY,GAAG9D,MAAM,CAACgC,MAAM;AAClC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AAAC+B,IAAA,GAhBID,YAAY;AAkBlB,MAAME,WAAW,GAAGA,CAAC;EAAEC;AAAO,CAAC,KAAK;EAAAC,EAAA;EAClC;EACA,MAAM,CAACC,IAAI,EAAEC,OAAO,CAAC,GAAGvE,QAAQ,CAAC,oCAAoC,CAAC;EACtE,MAAM,CAACuB,QAAQ,EAAEiD,WAAW,CAAC,GAAGxE,QAAQ,CAAC,EAAE,CAAC;EAC5C,MAAM,CAACyE,KAAK,EAAEC,QAAQ,CAAC,GAAG1E,QAAQ,CAAC,CAAC,CAAC;EACrC,MAAM,CAACwB,SAAS,EAAEmD,YAAY,CAAC,GAAG3E,QAAQ,CAAC,IAAI,CAAC,CAAC,CAAC;EAClD,MAAM,CAACyB,QAAQ,EAAEmD,WAAW,CAAC,GAAG5E,QAAQ,CAAC,CAAC,CAAC;EAC3C,MAAM,CAAC6E,SAAS,EAAEC,YAAY,CAAC,GAAG9E,QAAQ,CAAC,KAAK,CAAC;EACjD,MAAM,CAAC+E,QAAQ,EAAEC,WAAW,CAAC,GAAGhF,QAAQ,CAAC,EAAE,CAAC;EAC5C,MAAM,CAACiF,YAAY,EAAEC,eAAe,CAAC,GAAGlF,QAAQ,CAAC,IAAI,CAAC;EACtD,MAAM,CAACmF,SAAS,EAAEC,YAAY,CAAC,GAAGpF,QAAQ,CAAC,KAAK,CAAC;EACjD,MAAM,CAACqF,SAAS,EAAEC,YAAY,CAAC,GAAGtF,QAAQ,CAAC;IAAEuF,aAAa,EAAE,CAAC,CAAC;IAAEC,QAAQ,EAAE,CAAC;EAAE,CAAC,CAAC;;EAE/E;EACA,MAAMC,YAAY,GAAGvF,MAAM,CAAC,IAAI,CAAC;EACjC,MAAMwF,OAAO,GAAGxF,MAAM,CAAC,IAAI,CAAC;EAC5B,MAAMyF,YAAY,GAAGzF,MAAM,CAAC,IAAI,CAAC;;EAEjC;EACAD,SAAS,CAAC,MAAM;IACd,MAAM2F,SAAS,GAAGvF,cAAc,CAAC,cAAc,EAAE,oCAAoC,CAAC;IACtF,MAAMwF,aAAa,GAAGxF,cAAc,CAAC,mBAAmB,EAAE,EAAE,CAAC;IAC7D,MAAMyF,UAAU,GAAGzF,cAAc,CAAC,eAAe,EAAE,CAAC,CAAC;IACrD,MAAM0F,cAAc,GAAG1F,cAAc,CAAC,mBAAmB,EAAE,IAAI,CAAC;IAEhEkE,OAAO,CAACqB,SAAS,CAAC;IAClBpB,WAAW,CAACqB,aAAa,CAAC;IAC1BnB,QAAQ,CAACoB,UAAU,CAAC;IACpBnB,YAAY,CAACoB,cAAc,CAAC;IAC5Bf,WAAW,CAACY,SAAS,CAAC;EACxB,CAAC,EAAE,EAAE,CAAC;;EAEN;EACA3F,SAAS,CAAC,MAAM;IACd,IAAI,CAACwF,YAAY,CAACO,OAAO,IAAI,CAACN,OAAO,CAACM,OAAO,EAAE;IAE/C,MAAMC,eAAe,GAAGA,CAAA,KAAM;MAC5B;MACAC,UAAU,CAAC,MAAM;QACf,IAAI,CAACT,YAAY,CAACO,OAAO,IAAI,CAACN,OAAO,CAACM,OAAO,EAAE;QAE/C,MAAMG,cAAc,GAAGV,YAAY,CAACO,OAAO,CAACI,WAAW;QACvD,MAAMC,eAAe,GAAGZ,YAAY,CAACO,OAAO,CAACM,YAAY;QACzD;QACA,MAAMC,SAAS,GAAGb,OAAO,CAACM,OAAO,CAACQ,WAAW;QAC7C,MAAMC,UAAU,GAAGf,OAAO,CAACM,OAAO,CAACU,YAAY;;QAE/C;QACApB,YAAY,CAAC;UACXC,aAAa,EAAE;YAAEoB,KAAK,EAAER,cAAc;YAAES,MAAM,EAAEP;UAAgB,CAAC;UACjEb,QAAQ,EAAE;YAAEmB,KAAK,EAAEJ,SAAS;YAAEK,MAAM,EAAEH;UAAW;QACnD,CAAC,CAAC;QAEF,IAAII,aAAa,GAAG,CAAC;QACrB,IAAIC,WAAW,GAAG,CAAC;QACnB,MAAMC,MAAM,GAAG,GAAG,CAAC,CAAC;;QAEpB;QACA,IAAIvF,SAAS,KAAK,IAAI,EAAE;UACtBqF,aAAa,GAAGR,eAAe,GAAGU,MAAM,CAAC,CAAC;UAC1CD,WAAW,GAAG,CAACL,UAAU,GAAGM,MAAM,CAAC,CAAC;QACtC,CAAC,MAAM,IAAIvF,SAAS,KAAK,MAAM,EAAE;UAC/BqF,aAAa,GAAG,CAACJ,UAAU,GAAGM,MAAM,CAAC,CAAC;UACtCD,WAAW,GAAGT,eAAe,GAAGU,MAAM,CAAC,CAAC;QAC1C,CAAC,MAAM,IAAIvF,SAAS,KAAK,MAAM,EAAE;UAC/BqF,aAAa,GAAGV,cAAc,GAAGY,MAAM,CAAC,CAAC;UACzCD,WAAW,GAAG,CAACP,SAAS,GAAGQ,MAAM,CAAC,CAAC;QACrC,CAAC,MAAM,IAAIvF,SAAS,KAAK,OAAO,EAAE;UAChCqF,aAAa,GAAG,CAACN,SAAS,GAAGQ,MAAM,CAAC,CAAC;UACrCD,WAAW,GAAGX,cAAc,GAAGY,MAAM,CAAC,CAAC;QACzC;;QAEA;QACAnC,WAAW,CAACiC,aAAa,CAAC;;QAE1B;QACA,MAAMG,OAAO,GAAGA,CAAA,KAAM;UACpBpC,WAAW,CAACqC,YAAY,IAAI;YAC1B;YACA,IAAIC,WAAW;YACf,IAAI1F,SAAS,KAAK,IAAI,IAAIA,SAAS,KAAK,MAAM,EAAE;cAC9C0F,WAAW,GAAGD,YAAY,GAAGE,IAAI,CAACC,GAAG,CAAC3C,KAAK,CAAC;YAC9C,CAAC,MAAM;cACLyC,WAAW,GAAGD,YAAY,GAAGE,IAAI,CAACC,GAAG,CAAC3C,KAAK,CAAC;YAC9C;;YAEA;YACA,IAAI,CAACjD,SAAS,KAAK,IAAI,IAAIA,SAAS,KAAK,MAAM,KAAK0F,WAAW,IAAIJ,WAAW,EAAE;cAC9E,OAAOD,aAAa;YACtB,CAAC,MAAM,IAAI,CAACrF,SAAS,KAAK,MAAM,IAAIA,SAAS,KAAK,OAAO,KAAK0F,WAAW,IAAIJ,WAAW,EAAE;cACxF,OAAOD,aAAa;YACtB;YAEA,OAAOK,WAAW;UACpB,CAAC,CAAC;UAEFvB,YAAY,CAACK,OAAO,GAAGqB,qBAAqB,CAACL,OAAO,CAAC;QACvD,CAAC;;QAED;QACA,IAAIrB,YAAY,CAACK,OAAO,EAAE;UACxBsB,oBAAoB,CAAC3B,YAAY,CAACK,OAAO,CAAC;QAC5C;;QAEA;QACAL,YAAY,CAACK,OAAO,GAAGqB,qBAAqB,CAACL,OAAO,CAAC;MACvD,CAAC,EAAE,EAAE,CAAC;IACR,CAAC;IAEDf,eAAe,CAAC,CAAC;;IAEjB;IACA,MAAMsB,YAAY,GAAGA,CAAA,KAAM;MACzBtB,eAAe,CAAC,CAAC;IACnB,CAAC;IAEDuB,MAAM,CAACC,gBAAgB,CAAC,QAAQ,EAAEF,YAAY,CAAC;;IAE/C;IACA,OAAO,MAAM;MACXC,MAAM,CAACE,mBAAmB,CAAC,QAAQ,EAAEH,YAAY,CAAC;MAClD,IAAI5B,YAAY,CAACK,OAAO,EAAE;QACxBsB,oBAAoB,CAAC3B,YAAY,CAACK,OAAO,CAAC;MAC5C;IACF,CAAC;EACH,CAAC,EAAE,CAACxE,SAAS,EAAEiD,KAAK,EAAEH,IAAI,EAAE/C,QAAQ,CAAC,CAAC;;EAEtC;EACA,MAAMoG,gBAAgB,GAAGA,CAAA,KAAM;IAC7B,MAAMC,OAAO,GAAGT,IAAI,CAACU,GAAG,CAACtG,QAAQ,GAAG,CAAC,EAAE,EAAE,CAAC;IAC1CiD,WAAW,CAACoD,OAAO,CAAC;IACpBxH,aAAa,CAAC,mBAAmB,EAAEwH,OAAO,CAAC;EAC7C,CAAC;;EAED;EACA,MAAME,gBAAgB,GAAGA,CAAA,KAAM;IAC7B,MAAMF,OAAO,GAAGT,IAAI,CAACY,GAAG,CAACxG,QAAQ,GAAG,CAAC,EAAE,EAAE,CAAC;IAC1CiD,WAAW,CAACoD,OAAO,CAAC;IACpBxH,aAAa,CAAC,mBAAmB,EAAEwH,OAAO,CAAC;EAC7C,CAAC;;EAED;EACA,MAAMI,iBAAiB,GAAIC,CAAC,IAAK;IAC/B,MAAMC,KAAK,GAAGC,UAAU,CAACF,CAAC,CAACG,MAAM,CAACF,KAAK,CAAC;IACxC,IAAI,CAACG,KAAK,CAACH,KAAK,CAAC,EAAE;MACjBxD,QAAQ,CAACwD,KAAK,CAAC;MACf9H,aAAa,CAAC,eAAe,EAAE8H,KAAK,CAAC;IACvC;EACF,CAAC;;EAED;EACA,MAAMI,kBAAkB,GAAIC,GAAG,IAAK;IAClC5D,YAAY,CAAC4D,GAAG,CAAC;IACjBnI,aAAa,CAAC,mBAAmB,EAAEmI,GAAG,CAAC;EACzC,CAAC;;EAED;EACA,MAAMC,iBAAiB,GAAGA,CAAA,KAAM;IAC9BxD,WAAW,CAACV,IAAI,CAAC;IACjBQ,YAAY,CAAC,IAAI,CAAC;EACpB,CAAC;;EAED;EACA,MAAM2D,UAAU,GAAGA,CAAA,KAAM;IACvB3D,YAAY,CAAC,KAAK,CAAC;EACrB,CAAC;;EAED;EACA,MAAM4D,gBAAgB,GAAIT,CAAC,IAAK;IAC9BjD,WAAW,CAACiD,CAAC,CAACG,MAAM,CAACF,KAAK,CAAC;EAC7B,CAAC;;EAED;EACA,MAAMS,YAAY,GAAGA,CAAA,KAAM;IACzBpE,OAAO,CAACQ,QAAQ,CAAC;IACjB3E,aAAa,CAAC,cAAc,EAAE2E,QAAQ,CAAC;IACvC0D,UAAU,CAAC,CAAC;EACd,CAAC;;EAED;EACA,MAAMG,cAAc,GAAGA,CAAA,KAAM;IAC3B1D,eAAe,CAAC2D,IAAI,IAAI,CAACA,IAAI,CAAC;EAChC,CAAC;;EAED;EACA,MAAMC,WAAW,GAAGA,CAAA,KAAM;IACxB1D,YAAY,CAACyD,IAAI,IAAI,CAACA,IAAI,CAAC;EAC7B,CAAC;EAED,oBACE9H,OAAA,CAACC,gBAAgB;IAAC+H,GAAG,EAAEtD,YAAa;IAAAuD,QAAA,gBAClCjI,OAAA,CAAC4B,UAAU;MAACsG,OAAO,EAAE7E,MAAO;MAAC8E,KAAK,EAAC,cAAI;MAAAF,QAAA,eACrCjI,OAAA,CAACT,aAAa;QAAA6I,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAE;IAAC;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACP,CAAC,eAEbvI,OAAA,CAACkD,YAAY;MAACgF,OAAO,EAAEL,cAAe;MAACM,KAAK,EAAC,sCAAQ;MAAAF,QAAA,EAClD/D,YAAY,GAAG,MAAM,GAAG;IAAM;MAAAkE,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACnB,CAAC,eAEfvI,OAAA,CAACI,gBAAgB;MAAA6H,QAAA,eACfjI,OAAA,CAACM,WAAW;QACV0H,GAAG,EAAErD,OAAQ;QACbnE,QAAQ,EAAEA,QAAS;QACnBC,SAAS,EAAEA,SAAU;QACrBC,QAAQ,EAAEA,QAAS;QAAAuH,QAAA,EAElB1E;MAAI;QAAA6E,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACM;IAAC;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACE,CAAC,EAElBrE,YAAY,iBACXlE,OAAA,CAACY,YAAY;MAAAqH,QAAA,gBACXjI,OAAA,CAACc,UAAU;QAAAmH,QAAA,gBACTjI,OAAA,CAACgB,YAAY;UAAAiH,QAAA,EAAC;QAAI;UAAAG,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAc,CAAC,eACjCvI,OAAA,CAACmB,aAAa;UAAC+G,OAAO,EAAEnB,gBAAiB;UAACoB,KAAK,EAAC,0BAAM;UAAAF,QAAA,eACpDjI,OAAA,CAACN,gBAAgB;YAAA0I,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAE;QAAC;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OACP,CAAC,eAChBvI,OAAA,CAACmB,aAAa;UAAC+G,OAAO,EAAEtB,gBAAiB;UAACuB,KAAK,EAAC,0BAAM;UAAAF,QAAA,eACpDjI,OAAA,CAACP,gBAAgB;YAAA2I,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAE;QAAC;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OACP,CAAC;MAAA;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACN,CAAC,eAEbvI,OAAA,CAACc,UAAU;QAAAmH,QAAA,gBACTjI,OAAA,CAACgB,YAAY;UAAAiH,QAAA,EAAC;QAAI;UAAAG,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAc,CAAC,eACjCvI,OAAA,CAACsB,UAAU;UACTkH,IAAI,EAAC,QAAQ;UACbrB,KAAK,EAAEzD,KAAM;UACb+E,QAAQ,EAAExB,iBAAkB;UAC5ByB,IAAI,EAAC,KAAK;UACV5B,GAAG,EAAC,KAAK;UACTE,GAAG,EAAC;QAAI;UAAAoB,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OACT,CAAC;MAAA;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACQ,CAAC,eAEbvI,OAAA,CAACc,UAAU;QAAAmH,QAAA,gBACTjI,OAAA,CAACgB,YAAY;UAAAiH,QAAA,EAAC;QAAI;UAAAG,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAc,CAAC,eACjCvI,OAAA,CAACyB,eAAe;UACdC,MAAM,EAAEjB,SAAS,KAAK,IAAK;UAC3ByH,OAAO,EAAEA,CAAA,KAAMX,kBAAkB,CAAC,IAAI,CAAE;UACxCY,KAAK,EAAC,0BAAM;UAAAF,QAAA,eAEZjI,OAAA,CAACL,eAAe;YAAAyI,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAE;QAAC;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OACJ,CAAC,eAClBvI,OAAA,CAACyB,eAAe;UACdC,MAAM,EAAEjB,SAAS,KAAK,MAAO;UAC7ByH,OAAO,EAAEA,CAAA,KAAMX,kBAAkB,CAAC,MAAM,CAAE;UAC1CY,KAAK,EAAC,0BAAM;UAAAF,QAAA,eAEZjI,OAAA,CAACJ,iBAAiB;YAAAwI,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAE;QAAC;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OACN,CAAC,eAClBvI,OAAA,CAACyB,eAAe;UACdC,MAAM,EAAEjB,SAAS,KAAK,MAAO;UAC7ByH,OAAO,EAAEA,CAAA,KAAMX,kBAAkB,CAAC,MAAM,CAAE;UAC1CY,KAAK,EAAC,0BAAM;UAAAF,QAAA,eAEZjI,OAAA,CAACF,cAAc;YAAAsI,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAE;QAAC;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OACH,CAAC,eAClBvI,OAAA,CAACyB,eAAe;UACdC,MAAM,EAAEjB,SAAS,KAAK,OAAQ;UAC9ByH,OAAO,EAAEA,CAAA,KAAMX,kBAAkB,CAAC,OAAO,CAAE;UAC3CY,KAAK,EAAC,0BAAM;UAAAF,QAAA,eAEZjI,OAAA,CAACH,gBAAgB;YAAAuI,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAE;QAAC;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OACL,CAAC;MAAA;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACR,CAAC,eAEbvI,OAAA,CAACc,UAAU;QAAAmH,QAAA,gBACTjI,OAAA,CAACmB,aAAa;UAAC+G,OAAO,EAAET,iBAAkB;UAACU,KAAK,EAAC,sCAAQ;UAAAF,QAAA,eACvDjI,OAAA,CAACR,YAAY;YAAA4I,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAE;QAAC;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OACH,CAAC,eAChBvI,OAAA,CAACmB,aAAa;UAAC+G,OAAO,EAAEH,WAAY;UAACI,KAAK,EAAC,0BAAM;UAAAF,QAAA,EAAC;QAElD;UAAAG,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAe,CAAC;MAAA;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACN,CAAC;IAAA;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACD,CACf,EAEAnE,SAAS,iBACRpE,OAAA,CAACgD,UAAU;MAAAiF,QAAA,gBACTjI,OAAA;QAAK2I,SAAS,EAAC,YAAY;QAAAV,QAAA,eACzBjI,OAAA;UAAAiI,QAAA,EAAQ;QAAK;UAAAG,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAQ;MAAC;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACnB,CAAC,eACNvI,OAAA;QAAK2I,SAAS,EAAC,YAAY;QAAAV,QAAA,GAAC,UACvB,EAAC3D,SAAS,CAACE,aAAa,CAACoB,KAAK,EAAC,IACpC;MAAA;QAAAwC,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAK,CAAC,eACNvI,OAAA;QAAK2I,SAAS,EAAC,YAAY;QAAAV,QAAA,GAAC,UACvB,EAAC3D,SAAS,CAACE,aAAa,CAACqB,MAAM,EAAC,IACrC;MAAA;QAAAuC,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAK,CAAC,eACNvI,OAAA;QAAK2I,SAAS,EAAC,YAAY;QAAAV,QAAA,eACzBjI,OAAA;UAAAiI,QAAA,EAAQ;QAAK;UAAAG,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAQ;MAAC;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACnB,CAAC,eACNvI,OAAA;QAAK2I,SAAS,EAAC,YAAY;QAAAV,QAAA,GAAC,UACvB,EAAC3D,SAAS,CAACG,QAAQ,CAACmB,KAAK,EAAC,IAC/B;MAAA;QAAAwC,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAK,CAAC,eACNvI,OAAA;QAAK2I,SAAS,EAAC,YAAY;QAAAV,QAAA,GAAC,UACvB,EAAC3D,SAAS,CAACG,QAAQ,CAACoB,MAAM,EAAC,IAChC;MAAA;QAAAuC,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAK,CAAC,eACNvI,OAAA;QAAK2I,SAAS,EAAC,YAAY;QAAAV,QAAA,gBACzBjI,OAAA;UAAAiI,QAAA,EAAQ;QAAK;UAAAG,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAQ,CAAC,KAAC,EAACnC,IAAI,CAACwC,KAAK,CAAClI,QAAQ,CAAC,EAAC,IAC/C;MAAA;QAAA0H,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAK,CAAC,eACNvI,OAAA;QAAK2I,SAAS,EAAC,YAAY;QAAAV,QAAA,gBACzBjI,OAAA;UAAAiI,QAAA,EAAQ;QAAK;UAAAG,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAQ,CAAC,KAAC,EAAC9H,SAAS;MAAA;QAAA2H,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAC9B,CAAC,eACNvI,OAAA;QAAK2I,SAAS,EAAC,YAAY;QAAAV,QAAA,gBACzBjI,OAAA;UAAAiI,QAAA,EAAQ;QAAK;UAAAG,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAQ,CAAC,KAAC,EAAC7E,KAAK,EAAC,UAChC;MAAA;QAAA0E,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAK,CAAC;IAAA;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACI,CACb,EAEAzE,SAAS,iBACR9D,OAAA,CAAC8B,KAAK;MAAAmG,QAAA,eACJjI,OAAA,CAACgC,YAAY;QAAAiG,QAAA,gBACXjI,OAAA,CAACkC,WAAW;UAAA+F,QAAA,gBACVjI,OAAA,CAACoC,UAAU;YAAA6F,QAAA,EAAC;UAAM;YAAAG,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAY,CAAC,eAC/BvI,OAAA,CAACuC,WAAW;YAAC2F,OAAO,EAAER,UAAW;YAAAO,QAAA,EAAC;UAAO;YAAAG,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAa,CAAC;QAAA;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAC5C,CAAC,eAEdvI,OAAA,CAACyC,QAAQ;UACP0E,KAAK,EAAEnD,QAAS;UAChByE,QAAQ,EAAEd,gBAAiB;UAC3BkB,WAAW,EAAC;QAAY;UAAAT,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OACzB,CAAC,eAEFvI,OAAA,CAAC4C,WAAW;UAAAqF,QAAA,gBACVjI,OAAA,CAAC8C,MAAM;YAAC6F,SAAS,EAAC,WAAW;YAACT,OAAO,EAAER,UAAW;YAAAO,QAAA,EAAC;UAAE;YAAAG,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAQ,CAAC,eAC9DvI,OAAA,CAAC8C,MAAM;YAAC6F,SAAS,EAAC,SAAS;YAACT,OAAO,EAAEN,YAAa;YAAAK,QAAA,EAAC;UAAE;YAAAG,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAQ,CAAC;QAAA;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OACnD,CAAC;MAAA;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACF;IAAC;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACV,CACR;EAAA;IAAAH,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,OACe,CAAC;AAEvB,CAAC;AAACjF,EAAA,CA5UIF,WAAW;AAAA0F,IAAA,GAAX1F,WAAW;AA8UjB,eAAeA,WAAW;AAAC,IAAAjD,EAAA,EAAAE,GAAA,EAAAM,GAAA,EAAAE,GAAA,EAAAE,GAAA,EAAAG,GAAA,EAAAG,GAAA,EAAAG,GAAA,EAAAG,GAAA,EAAAE,GAAA,EAAAE,GAAA,EAAAE,IAAA,EAAAE,IAAA,EAAAG,IAAA,EAAAE,IAAA,EAAAG,IAAA,EAAAE,IAAA,EAAAE,IAAA,EAAAE,IAAA,EAAAE,IAAA,EAAA2F,IAAA;AAAAC,YAAA,CAAA5I,EAAA;AAAA4I,YAAA,CAAA1I,GAAA;AAAA0I,YAAA,CAAApI,GAAA;AAAAoI,YAAA,CAAAlI,GAAA;AAAAkI,YAAA,CAAAhI,GAAA;AAAAgI,YAAA,CAAA7H,GAAA;AAAA6H,YAAA,CAAA1H,GAAA;AAAA0H,YAAA,CAAAvH,GAAA;AAAAuH,YAAA,CAAApH,GAAA;AAAAoH,YAAA,CAAAlH,GAAA;AAAAkH,YAAA,CAAAhH,GAAA;AAAAgH,YAAA,CAAA9G,IAAA;AAAA8G,YAAA,CAAA5G,IAAA;AAAA4G,YAAA,CAAAzG,IAAA;AAAAyG,YAAA,CAAAvG,IAAA;AAAAuG,YAAA,CAAApG,IAAA;AAAAoG,YAAA,CAAAlG,IAAA;AAAAkG,YAAA,CAAAhG,IAAA;AAAAgG,YAAA,CAAA9F,IAAA;AAAA8F,YAAA,CAAA5F,IAAA;AAAA4F,YAAA,CAAAD,IAAA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}