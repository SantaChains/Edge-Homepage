{"ast":null,"code":"/**\r\n * 从本地存储中获取数据\r\n * @param {string} key - 存储键名\r\n * @param {any} defaultValue - 默认值，如果存储中没有对应的值\r\n * @returns {any} 存储的值或默认值\r\n */export const getFromStorage=function(key){let defaultValue=arguments.length>1&&arguments[1]!==undefined?arguments[1]:null;try{const item=localStorage.getItem(key);return item?JSON.parse(item):defaultValue;}catch(error){console.error(`从存储中获取 ${key} 失败:`,error);return defaultValue;}};/**\r\n * 保存数据到本地存储\r\n * @param {string} key - 存储键名\r\n * @param {any} value - 要存储的值\r\n * @returns {boolean} 是否成功保存\r\n */export const saveToStorage=(key,value)=>{try{localStorage.setItem(key,JSON.stringify(value));return true;}catch(error){console.error(`保存 ${key} 到存储失败:`,error);return false;}};/**\r\n * 从本地存储中删除数据\r\n * @param {string} key - 存储键名\r\n * @returns {boolean} 是否成功删除\r\n */export const removeFromStorage=key=>{try{localStorage.removeItem(key);return true;}catch(error){console.error(`从存储中删除 ${key} 失败:`,error);return false;}};/**\r\n * 清空本地存储\r\n * @returns {boolean} 是否成功清空\r\n */export const clearStorage=()=>{try{localStorage.clear();return true;}catch(error){console.error('清空存储失败:',error);return false;}};/**\r\n * 获取所有存储的键\r\n * @returns {string[]} 所有存储的键\r\n */export const getAllStorageKeys=()=>{try{return Object.keys(localStorage);}catch(error){console.error('获取所有存储键失败:',error);return[];}};/**\r\n * 导出所有存储数据为JSON文件\r\n * @param {string} filename - 导出的文件名\r\n */export const exportStorageToFile=function(){let filename=arguments.length>0&&arguments[0]!==undefined?arguments[0]:'homepage-backup.json';try{const data={};const keys=getAllStorageKeys();keys.forEach(key=>{if(key.startsWith('homepage-')){data[key]=getFromStorage(key);}});const dataStr=JSON.stringify(data,null,2);const dataUri='data:application/json;charset=utf-8,'+encodeURIComponent(dataStr);const linkElement=document.createElement('a');linkElement.setAttribute('href',dataUri);linkElement.setAttribute('download',filename);linkElement.click();return true;}catch(error){console.error('导出存储数据失败:',error);return false;}};/**\r\n * 从JSON文件导入存储数据\r\n * @param {string} jsonString - JSON字符串\r\n * @returns {boolean} 是否成功导入\r\n */export const importStorageFromJson=jsonString=>{try{const data=JSON.parse(jsonString);Object.keys(data).forEach(key=>{if(key.startsWith('homepage-')){saveToStorage(key,data[key]);}});return true;}catch(error){console.error('导入存储数据失败:',error);return false;}};","map":{"version":3,"names":["getFromStorage","key","defaultValue","arguments","length","undefined","item","localStorage","getItem","JSON","parse","error","console","saveToStorage","value","setItem","stringify","removeFromStorage","removeItem","clearStorage","clear","getAllStorageKeys","Object","keys","exportStorageToFile","filename","data","forEach","startsWith","dataStr","dataUri","encodeURIComponent","linkElement","document","createElement","setAttribute","click","importStorageFromJson","jsonString"],"sources":["D:/Jliu Pureey/Documents/Editor/extion/homepage/src/utils/storage.js"],"sourcesContent":["/**\r\n * 从本地存储中获取数据\r\n * @param {string} key - 存储键名\r\n * @param {any} defaultValue - 默认值，如果存储中没有对应的值\r\n * @returns {any} 存储的值或默认值\r\n */\r\nexport const getFromStorage = (key, defaultValue = null) => {\r\n  try {\r\n    const item = localStorage.getItem(key);\r\n    return item ? JSON.parse(item) : defaultValue;\r\n  } catch (error) {\r\n    console.error(`从存储中获取 ${key} 失败:`, error);\r\n    return defaultValue;\r\n  }\r\n};\r\n\r\n/**\r\n * 保存数据到本地存储\r\n * @param {string} key - 存储键名\r\n * @param {any} value - 要存储的值\r\n * @returns {boolean} 是否成功保存\r\n */\r\nexport const saveToStorage = (key, value) => {\r\n  try {\r\n    localStorage.setItem(key, JSON.stringify(value));\r\n    return true;\r\n  } catch (error) {\r\n    console.error(`保存 ${key} 到存储失败:`, error);\r\n    return false;\r\n  }\r\n};\r\n\r\n/**\r\n * 从本地存储中删除数据\r\n * @param {string} key - 存储键名\r\n * @returns {boolean} 是否成功删除\r\n */\r\nexport const removeFromStorage = (key) => {\r\n  try {\r\n    localStorage.removeItem(key);\r\n    return true;\r\n  } catch (error) {\r\n    console.error(`从存储中删除 ${key} 失败:`, error);\r\n    return false;\r\n  }\r\n};\r\n\r\n/**\r\n * 清空本地存储\r\n * @returns {boolean} 是否成功清空\r\n */\r\nexport const clearStorage = () => {\r\n  try {\r\n    localStorage.clear();\r\n    return true;\r\n  } catch (error) {\r\n    console.error('清空存储失败:', error);\r\n    return false;\r\n  }\r\n};\r\n\r\n/**\r\n * 获取所有存储的键\r\n * @returns {string[]} 所有存储的键\r\n */\r\nexport const getAllStorageKeys = () => {\r\n  try {\r\n    return Object.keys(localStorage);\r\n  } catch (error) {\r\n    console.error('获取所有存储键失败:', error);\r\n    return [];\r\n  }\r\n};\r\n\r\n/**\r\n * 导出所有存储数据为JSON文件\r\n * @param {string} filename - 导出的文件名\r\n */\r\nexport const exportStorageToFile = (filename = 'homepage-backup.json') => {\r\n  try {\r\n    const data = {};\r\n    const keys = getAllStorageKeys();\r\n    \r\n    keys.forEach(key => {\r\n      if (key.startsWith('homepage-')) {\r\n        data[key] = getFromStorage(key);\r\n      }\r\n    });\r\n    \r\n    const dataStr = JSON.stringify(data, null, 2);\r\n    const dataUri = 'data:application/json;charset=utf-8,'+ encodeURIComponent(dataStr);\r\n    \r\n    const linkElement = document.createElement('a');\r\n    linkElement.setAttribute('href', dataUri);\r\n    linkElement.setAttribute('download', filename);\r\n    linkElement.click();\r\n    \r\n    return true;\r\n  } catch (error) {\r\n    console.error('导出存储数据失败:', error);\r\n    return false;\r\n  }\r\n};\r\n\r\n/**\r\n * 从JSON文件导入存储数据\r\n * @param {string} jsonString - JSON字符串\r\n * @returns {boolean} 是否成功导入\r\n */\r\nexport const importStorageFromJson = (jsonString) => {\r\n  try {\r\n    const data = JSON.parse(jsonString);\r\n    \r\n    Object.keys(data).forEach(key => {\r\n      if (key.startsWith('homepage-')) {\r\n        saveToStorage(key, data[key]);\r\n      }\r\n    });\r\n    \r\n    return true;\r\n  } catch (error) {\r\n    console.error('导入存储数据失败:', error);\r\n    return false;\r\n  }\r\n};"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}