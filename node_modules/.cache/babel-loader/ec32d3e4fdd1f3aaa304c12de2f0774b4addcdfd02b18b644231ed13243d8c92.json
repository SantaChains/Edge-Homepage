{"ast":null,"code":"import React,{useState,useEffect}from'react';import styled from'styled-components';import{format,addMonths,subMonths,startOfMonth,endOfMonth,startOfWeek,endOfWeek,addDays,isSameMonth,isSameDay}from'date-fns';import zhCN from'date-fns/locale/zh-CN';import{saveToStorage,getFromStorage}from'../../utils/storage';// 组件导入\nimport CountdownItem from'./components/CountdownItem';import CountdownModal from'./components/CountdownModal';// 图标导入\nimport AddIcon from'@mui/icons-material/Add';import ArrowBackIosNewIcon from'@mui/icons-material/ArrowBackIosNew';import ArrowForwardIosIcon from'@mui/icons-material/ArrowForwardIos';import ToggleOnIcon from'@mui/icons-material/ToggleOn';import ToggleOffIcon from'@mui/icons-material/ToggleOff';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const CalendarContainer=styled.div`\n  width: 100%;\n  max-width: 800px;\n  margin: 0 auto;\n  padding: 20px;\n`;const CalendarHeader=styled.div`\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  margin-bottom: 20px;\n`;const CalendarTitle=styled.h2`\n  margin: 0;\n  font-size: 24px;\n  font-weight: 500;\n`;const ActionButtons=styled.div`\n  display: flex;\n  gap: 10px;\n`;const ActionButton=styled.button`\n  background-color: var(--primary-color);\n  color: white;\n  border: none;\n  border-radius: 50%;\n  width: 36px;\n  height: 36px;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  cursor: pointer;\n  \n  &:hover {\n    background-color: #3a7bc8;\n  }\n`;const MonthNavigator=styled.div`\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  margin-bottom: 15px;\n`;const MonthTitle=styled.h3`\n  margin: 0;\n  font-size: 18px;\n  font-weight: 500;\n`;const NavButton=styled.button`\n  background-color: transparent;\n  border: none;\n  border-radius: 50%;\n  width: 30px;\n  height: 30px;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  cursor: pointer;\n  color: var(--text-color);\n  \n  &:hover {\n    background-color: rgba(0, 0, 0, 0.05);\n  }\n`;const CalendarGrid=styled.div`\n  display: grid;\n  grid-template-columns: repeat(7, 1fr);\n  gap: 5px;\n  margin-bottom: 30px;\n`;const WeekdayHeader=styled.div`\n  text-align: center;\n  font-weight: 500;\n  padding: 10px 0;\n  color: var(--text-secondary-color);\n`;const DayCell=styled.div`\n  aspect-ratio: 1;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  border-radius: 50%;\n  cursor: pointer;\n  position: relative;\n  \n  ${props=>props.isCurrentMonth?`\n    color: var(--text-color);\n  `:`\n    color: var(--text-secondary-color);\n    opacity: 0.5;\n  `}\n  \n  ${props=>props.isToday&&`\n    background-color: var(--primary-color);\n    color: white;\n  `}\n  \n  &:hover {\n    background-color: ${props=>props.isToday?'var(--primary-color)':'rgba(0, 0, 0, 0.05)'};\n  }\n`;const CountdownSection=styled.div`\n  margin-top: 30px;\n`;const CountdownHeader=styled.div`\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  margin-bottom: 15px;\n`;const CountdownTitle=styled.h3`\n  margin: 0;\n  font-size: 18px;\n  font-weight: 500;\n  display: flex;\n  align-items: center;\n  gap: 10px;\n`;const ToggleButton=styled.button`\n  background: none;\n  border: none;\n  cursor: pointer;\n  display: flex;\n  align-items: center;\n  padding: 0;\n  color: ${props=>props.active?'var(--primary-color)':'var(--text-secondary-color)'};\n`;const CountdownList=styled.div`\n  display: flex;\n  flex-direction: column;\n  gap: 10px;\n`;const EmptyState=styled.div`\n  text-align: center;\n  padding: 20px;\n  color: var(--text-color);\n  opacity: 0.7;\n`;const Calendar=()=>{// 状态\nconst[currentDate,setCurrentDate]=useState(new Date());const[selectedDate,setSelectedDate]=useState(new Date());const[countdowns,setCountdowns]=useState([]);const[showCountdownModal,setShowCountdownModal]=useState(false);const[editingCountdown,setEditingCountdown]=useState(null);const[useZhuJiLi,setUseZhuJiLi]=useState(false);// 初始化数据\nuseEffect(()=>{const savedCountdowns=getFromStorage('homepage-countdowns',[]);const savedUseZhuJiLi=getFromStorage('homepage-use-zhujili',false);setCountdowns(savedCountdowns);setUseZhuJiLi(savedUseZhuJiLi);},[]);// 处理月份导航\nconst prevMonth=()=>{setCurrentDate(subMonths(currentDate,1));};const nextMonth=()=>{setCurrentDate(addMonths(currentDate,1));};// 渲染日历头部（星期几）\nconst renderWeekdays=()=>{const weekdays=[];const start=startOfWeek(currentDate);for(let i=0;i<7;i++){const day=addDays(start,i);weekdays.push(/*#__PURE__*/_jsx(WeekdayHeader,{children:format(day,'E',{locale:zhCN})},i));}return weekdays;};// 渲染日历单元格\nconst renderCells=()=>{const monthStart=startOfMonth(currentDate);const monthEnd=endOfMonth(monthStart);const startDate=startOfWeek(monthStart);const endDate=endOfWeek(monthEnd);const rows=[];let days=[];let day=startDate;while(day<=endDate){for(let i=0;i<7;i++){const cloneDay=day;days.push(/*#__PURE__*/_jsx(DayCell,{isToday:isSameDay(day,new Date()),isCurrentMonth:isSameMonth(day,monthStart),onClick:()=>setSelectedDate(cloneDay),children:format(day,'d')},day));day=addDays(day,1);}rows.push(/*#__PURE__*/_jsx(React.Fragment,{children:days},day));days=[];}return rows;};// 打开添加倒数日模态框\nconst openAddCountdownModal=()=>{setEditingCountdown(null);setShowCountdownModal(true);};// 打开编辑倒数日模态框\nconst openEditCountdownModal=countdown=>{setEditingCountdown(countdown);setShowCountdownModal(true);};// 关闭倒数日模态框\nconst closeCountdownModal=()=>{setShowCountdownModal(false);setEditingCountdown(null);};// 保存倒数日\nconst saveCountdown=data=>{let updatedCountdowns;if(editingCountdown){// 编辑现有倒数日\nupdatedCountdowns=countdowns.map(item=>item.id===editingCountdown.id?{...data,id:editingCountdown.id}:item);}else{// 添加新倒数日\nupdatedCountdowns=[...countdowns,{...data,id:Date.now()}];}setCountdowns(updatedCountdowns);saveToStorage('homepage-countdowns',updatedCountdowns);closeCountdownModal();};// 删除倒数日\nconst deleteCountdown=id=>{if(window.confirm('确定要删除这个倒数日吗？')){const updatedCountdowns=countdowns.filter(item=>item.id!==id);setCountdowns(updatedCountdowns);saveToStorage('homepage-countdowns',updatedCountdowns);}};// 切换竺纪笠模式\nconst toggleZhuJiLi=()=>{const newValue=!useZhuJiLi;setUseZhuJiLi(newValue);saveToStorage('homepage-use-zhujili',newValue);};// 计算倒数天数\nconst calculateDaysLeft=targetDate=>{const now=new Date();now.setHours(0,0,0,0);const target=new Date(targetDate);target.setHours(0,0,0,0);const diffTime=target-now;const diffDays=Math.ceil(diffTime/(1000*60*60*24));return diffDays;};// 按日期排序倒数日\nconst sortedCountdowns=[...countdowns].sort((a,b)=>{const daysLeftA=calculateDaysLeft(a.date);const daysLeftB=calculateDaysLeft(b.date);// 将过去的日期放在后面\nif(daysLeftA<0&&daysLeftB<0||daysLeftA>=0&&daysLeftB>=0){return Math.abs(daysLeftA)-Math.abs(daysLeftB);}return daysLeftA<0?1:-1;});return/*#__PURE__*/_jsxs(CalendarContainer,{children:[/*#__PURE__*/_jsxs(CalendarHeader,{children:[/*#__PURE__*/_jsx(CalendarTitle,{children:\"\\u65E5\\u5386\"}),/*#__PURE__*/_jsx(ActionButtons,{children:/*#__PURE__*/_jsx(ActionButton,{onClick:openAddCountdownModal,title:\"\\u6DFB\\u52A0\\u5012\\u6570\\u65E5\",children:/*#__PURE__*/_jsx(AddIcon,{})})})]}),/*#__PURE__*/_jsxs(MonthNavigator,{children:[/*#__PURE__*/_jsx(NavButton,{onClick:prevMonth,children:/*#__PURE__*/_jsx(ArrowBackIosNewIcon,{fontSize:\"small\"})}),/*#__PURE__*/_jsx(MonthTitle,{children:format(currentDate,'yyyy年MM月',{locale:zhCN})}),/*#__PURE__*/_jsx(NavButton,{onClick:nextMonth,children:/*#__PURE__*/_jsx(ArrowForwardIosIcon,{fontSize:\"small\"})})]}),/*#__PURE__*/_jsxs(CalendarGrid,{children:[renderWeekdays(),renderCells()]}),/*#__PURE__*/_jsxs(CountdownSection,{children:[/*#__PURE__*/_jsx(CountdownHeader,{children:/*#__PURE__*/_jsxs(CountdownTitle,{children:[\"\\u5012\\u6570\\u65E5\",/*#__PURE__*/_jsxs(ToggleButton,{active:useZhuJiLi,onClick:toggleZhuJiLi,title:useZhuJiLi?\"关闭竺纪笠模式\":\"开启竺纪笠模式\",children:[useZhuJiLi?/*#__PURE__*/_jsx(ToggleOnIcon,{}):/*#__PURE__*/_jsx(ToggleOffIcon,{}),\"\\u7AFA\\u7EAA\\u7B20\"]})]})}),/*#__PURE__*/_jsxs(CountdownList,{children:[sortedCountdowns.map(countdown=>/*#__PURE__*/_jsx(CountdownItem,{countdown:countdown,useZhuJiLi:useZhuJiLi,onEdit:()=>openEditCountdownModal(countdown),onDelete:()=>deleteCountdown(countdown.id)},countdown.id)),countdowns.length===0&&/*#__PURE__*/_jsx(EmptyState,{children:/*#__PURE__*/_jsx(\"p\",{children:\"\\u6682\\u65E0\\u5012\\u6570\\u65E5\\uFF0C\\u70B9\\u51FB\\u53F3\\u4E0A\\u89D2\\u6DFB\\u52A0\"})})]})]}),/*#__PURE__*/_jsx(CountdownModal,{isOpen:showCountdownModal,onClose:closeCountdownModal,onSave:saveCountdown,countdown:editingCountdown})]});};export default Calendar;","map":{"version":3,"names":["React","useState","useEffect","styled","format","addMonths","subMonths","startOfMonth","endOfMonth","startOfWeek","endOfWeek","addDays","isSameMonth","isSameDay","zhCN","saveToStorage","getFromStorage","CountdownItem","CountdownModal","AddIcon","ArrowBackIosNewIcon","ArrowForwardIosIcon","ToggleOnIcon","ToggleOffIcon","jsx","_jsx","jsxs","_jsxs","CalendarContainer","div","CalendarHeader","CalendarTitle","h2","ActionButtons","ActionButton","button","MonthNavigator","MonthTitle","h3","NavButton","CalendarGrid","WeekdayHeader","DayCell","props","isCurrentMonth","isToday","CountdownSection","CountdownHeader","CountdownTitle","ToggleButton","active","CountdownList","EmptyState","Calendar","currentDate","setCurrentDate","Date","selectedDate","setSelectedDate","countdowns","setCountdowns","showCountdownModal","setShowCountdownModal","editingCountdown","setEditingCountdown","useZhuJiLi","setUseZhuJiLi","savedCountdowns","savedUseZhuJiLi","prevMonth","nextMonth","renderWeekdays","weekdays","start","i","day","push","children","locale","renderCells","monthStart","monthEnd","startDate","endDate","rows","days","cloneDay","onClick","Fragment","openAddCountdownModal","openEditCountdownModal","countdown","closeCountdownModal","saveCountdown","data","updatedCountdowns","map","item","id","now","deleteCountdown","window","confirm","filter","toggleZhuJiLi","newValue","calculateDaysLeft","targetDate","setHours","target","diffTime","diffDays","Math","ceil","sortedCountdowns","sort","a","b","daysLeftA","date","daysLeftB","abs","title","fontSize","onEdit","onDelete","length","isOpen","onClose","onSave"],"sources":["D:/Jliu Pureey/Documents/Editor/extion/homepage/src/modules/Calendar/Calendar.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport styled from 'styled-components';\r\nimport { format, addMonths, subMonths, startOfMonth, endOfMonth, startOfWeek, endOfWeek, addDays, isSameMonth, isSameDay } from 'date-fns';\r\nimport zhCN from 'date-fns/locale/zh-CN';\r\nimport { saveToStorage, getFromStorage } from '../../utils/storage';\r\n\r\n// 组件导入\r\nimport CountdownItem from './components/CountdownItem';\r\nimport CountdownModal from './components/CountdownModal';\r\n\r\n// 图标导入\r\nimport AddIcon from '@mui/icons-material/Add';\r\nimport ArrowBackIosNewIcon from '@mui/icons-material/ArrowBackIosNew';\r\nimport ArrowForwardIosIcon from '@mui/icons-material/ArrowForwardIos';\r\nimport ToggleOnIcon from '@mui/icons-material/ToggleOn';\r\nimport ToggleOffIcon from '@mui/icons-material/ToggleOff';\r\n\r\nconst CalendarContainer = styled.div`\r\n  width: 100%;\r\n  max-width: 800px;\r\n  margin: 0 auto;\r\n  padding: 20px;\r\n`;\r\n\r\nconst CalendarHeader = styled.div`\r\n  display: flex;\r\n  justify-content: space-between;\r\n  align-items: center;\r\n  margin-bottom: 20px;\r\n`;\r\n\r\nconst CalendarTitle = styled.h2`\r\n  margin: 0;\r\n  font-size: 24px;\r\n  font-weight: 500;\r\n`;\r\n\r\nconst ActionButtons = styled.div`\r\n  display: flex;\r\n  gap: 10px;\r\n`;\r\n\r\nconst ActionButton = styled.button`\r\n  background-color: var(--primary-color);\r\n  color: white;\r\n  border: none;\r\n  border-radius: 50%;\r\n  width: 36px;\r\n  height: 36px;\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n  cursor: pointer;\r\n  \r\n  &:hover {\r\n    background-color: #3a7bc8;\r\n  }\r\n`;\r\n\r\nconst MonthNavigator = styled.div`\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: space-between;\r\n  margin-bottom: 15px;\r\n`;\r\n\r\nconst MonthTitle = styled.h3`\r\n  margin: 0;\r\n  font-size: 18px;\r\n  font-weight: 500;\r\n`;\r\n\r\nconst NavButton = styled.button`\r\n  background-color: transparent;\r\n  border: none;\r\n  border-radius: 50%;\r\n  width: 30px;\r\n  height: 30px;\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n  cursor: pointer;\r\n  color: var(--text-color);\r\n  \r\n  &:hover {\r\n    background-color: rgba(0, 0, 0, 0.05);\r\n  }\r\n`;\r\n\r\nconst CalendarGrid = styled.div`\r\n  display: grid;\r\n  grid-template-columns: repeat(7, 1fr);\r\n  gap: 5px;\r\n  margin-bottom: 30px;\r\n`;\r\n\r\nconst WeekdayHeader = styled.div`\r\n  text-align: center;\r\n  font-weight: 500;\r\n  padding: 10px 0;\r\n  color: var(--text-secondary-color);\r\n`;\r\n\r\nconst DayCell = styled.div`\r\n  aspect-ratio: 1;\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n  border-radius: 50%;\r\n  cursor: pointer;\r\n  position: relative;\r\n  \r\n  ${props => props.isCurrentMonth ? `\r\n    color: var(--text-color);\r\n  ` : `\r\n    color: var(--text-secondary-color);\r\n    opacity: 0.5;\r\n  `}\r\n  \r\n  ${props => props.isToday && `\r\n    background-color: var(--primary-color);\r\n    color: white;\r\n  `}\r\n  \r\n  &:hover {\r\n    background-color: ${props => props.isToday ? 'var(--primary-color)' : 'rgba(0, 0, 0, 0.05)'};\r\n  }\r\n`;\r\n\r\nconst CountdownSection = styled.div`\r\n  margin-top: 30px;\r\n`;\r\n\r\nconst CountdownHeader = styled.div`\r\n  display: flex;\r\n  justify-content: space-between;\r\n  align-items: center;\r\n  margin-bottom: 15px;\r\n`;\r\n\r\nconst CountdownTitle = styled.h3`\r\n  margin: 0;\r\n  font-size: 18px;\r\n  font-weight: 500;\r\n  display: flex;\r\n  align-items: center;\r\n  gap: 10px;\r\n`;\r\n\r\nconst ToggleButton = styled.button`\r\n  background: none;\r\n  border: none;\r\n  cursor: pointer;\r\n  display: flex;\r\n  align-items: center;\r\n  padding: 0;\r\n  color: ${props => props.active ? 'var(--primary-color)' : 'var(--text-secondary-color)'};\r\n`;\r\n\r\nconst CountdownList = styled.div`\r\n  display: flex;\r\n  flex-direction: column;\r\n  gap: 10px;\r\n`;\r\n\r\nconst EmptyState = styled.div`\r\n  text-align: center;\r\n  padding: 20px;\r\n  color: var(--text-color);\r\n  opacity: 0.7;\r\n`;\r\n\r\nconst Calendar = () => {\r\n  // 状态\r\n  const [currentDate, setCurrentDate] = useState(new Date());\r\n  const [selectedDate, setSelectedDate] = useState(new Date());\r\n  const [countdowns, setCountdowns] = useState([]);\r\n  const [showCountdownModal, setShowCountdownModal] = useState(false);\r\n  const [editingCountdown, setEditingCountdown] = useState(null);\r\n  const [useZhuJiLi, setUseZhuJiLi] = useState(false);\r\n  \r\n  // 初始化数据\r\n  useEffect(() => {\r\n    const savedCountdowns = getFromStorage('homepage-countdowns', []);\r\n    const savedUseZhuJiLi = getFromStorage('homepage-use-zhujili', false);\r\n    setCountdowns(savedCountdowns);\r\n    setUseZhuJiLi(savedUseZhuJiLi);\r\n  }, []);\r\n  \r\n  // 处理月份导航\r\n  const prevMonth = () => {\r\n    setCurrentDate(subMonths(currentDate, 1));\r\n  };\r\n  \r\n  const nextMonth = () => {\r\n    setCurrentDate(addMonths(currentDate, 1));\r\n  };\r\n  \r\n  // 渲染日历头部（星期几）\r\n  const renderWeekdays = () => {\r\n    const weekdays = [];\r\n    const start = startOfWeek(currentDate);\r\n    \r\n    for (let i = 0; i < 7; i++) {\r\n      const day = addDays(start, i);\r\n      weekdays.push(\r\n        <WeekdayHeader key={i}>\r\n          {format(day, 'E', { locale: zhCN })}\r\n        </WeekdayHeader>\r\n      );\r\n    }\r\n    \r\n    return weekdays;\r\n  };\r\n  \r\n  // 渲染日历单元格\r\n  const renderCells = () => {\r\n    const monthStart = startOfMonth(currentDate);\r\n    const monthEnd = endOfMonth(monthStart);\r\n    const startDate = startOfWeek(monthStart);\r\n    const endDate = endOfWeek(monthEnd);\r\n    \r\n    const rows = [];\r\n    let days = [];\r\n    let day = startDate;\r\n    \r\n    while (day <= endDate) {\r\n      for (let i = 0; i < 7; i++) {\r\n        const cloneDay = day;\r\n        days.push(\r\n          <DayCell\r\n            key={day}\r\n            isToday={isSameDay(day, new Date())}\r\n            isCurrentMonth={isSameMonth(day, monthStart)}\r\n            onClick={() => setSelectedDate(cloneDay)}\r\n          >\r\n            {format(day, 'd')}\r\n          </DayCell>\r\n        );\r\n        day = addDays(day, 1);\r\n      }\r\n      rows.push(\r\n        <React.Fragment key={day}>\r\n          {days}\r\n        </React.Fragment>\r\n      );\r\n      days = [];\r\n    }\r\n    \r\n    return rows;\r\n  };\r\n  \r\n  // 打开添加倒数日模态框\r\n  const openAddCountdownModal = () => {\r\n    setEditingCountdown(null);\r\n    setShowCountdownModal(true);\r\n  };\r\n  \r\n  // 打开编辑倒数日模态框\r\n  const openEditCountdownModal = (countdown) => {\r\n    setEditingCountdown(countdown);\r\n    setShowCountdownModal(true);\r\n  };\r\n  \r\n  // 关闭倒数日模态框\r\n  const closeCountdownModal = () => {\r\n    setShowCountdownModal(false);\r\n    setEditingCountdown(null);\r\n  };\r\n  \r\n  // 保存倒数日\r\n  const saveCountdown = (data) => {\r\n    let updatedCountdowns;\r\n    \r\n    if (editingCountdown) {\r\n      // 编辑现有倒数日\r\n      updatedCountdowns = countdowns.map(item => \r\n        item.id === editingCountdown.id ? { ...data, id: editingCountdown.id } : item\r\n      );\r\n    } else {\r\n      // 添加新倒数日\r\n      updatedCountdowns = [...countdowns, { ...data, id: Date.now() }];\r\n    }\r\n    \r\n    setCountdowns(updatedCountdowns);\r\n    saveToStorage('homepage-countdowns', updatedCountdowns);\r\n    closeCountdownModal();\r\n  };\r\n  \r\n  // 删除倒数日\r\n  const deleteCountdown = (id) => {\r\n    if (window.confirm('确定要删除这个倒数日吗？')) {\r\n      const updatedCountdowns = countdowns.filter(item => item.id !== id);\r\n      setCountdowns(updatedCountdowns);\r\n      saveToStorage('homepage-countdowns', updatedCountdowns);\r\n    }\r\n  };\r\n  \r\n  // 切换竺纪笠模式\r\n  const toggleZhuJiLi = () => {\r\n    const newValue = !useZhuJiLi;\r\n    setUseZhuJiLi(newValue);\r\n    saveToStorage('homepage-use-zhujili', newValue);\r\n  };\r\n  \r\n  // 计算倒数天数\r\n  const calculateDaysLeft = (targetDate) => {\r\n    const now = new Date();\r\n    now.setHours(0, 0, 0, 0);\r\n    \r\n    const target = new Date(targetDate);\r\n    target.setHours(0, 0, 0, 0);\r\n    \r\n    const diffTime = target - now;\r\n    const diffDays = Math.ceil(diffTime / (1000 * 60 * 60 * 24));\r\n    \r\n    return diffDays;\r\n  };\r\n  \r\n  // 按日期排序倒数日\r\n  const sortedCountdowns = [...countdowns].sort((a, b) => {\r\n    const daysLeftA = calculateDaysLeft(a.date);\r\n    const daysLeftB = calculateDaysLeft(b.date);\r\n    \r\n    // 将过去的日期放在后面\r\n    if ((daysLeftA < 0 && daysLeftB < 0) || (daysLeftA >= 0 && daysLeftB >= 0)) {\r\n      return Math.abs(daysLeftA) - Math.abs(daysLeftB);\r\n    }\r\n    \r\n    return daysLeftA < 0 ? 1 : -1;\r\n  });\r\n  \r\n  return (\r\n    <CalendarContainer>\r\n      <CalendarHeader>\r\n        <CalendarTitle>日历</CalendarTitle>\r\n        <ActionButtons>\r\n          <ActionButton onClick={openAddCountdownModal} title=\"添加倒数日\">\r\n            <AddIcon />\r\n          </ActionButton>\r\n        </ActionButtons>\r\n      </CalendarHeader>\r\n      \r\n      <MonthNavigator>\r\n        <NavButton onClick={prevMonth}>\r\n          <ArrowBackIosNewIcon fontSize=\"small\" />\r\n        </NavButton>\r\n        <MonthTitle>\r\n          {format(currentDate, 'yyyy年MM月', { locale: zhCN })}\r\n        </MonthTitle>\r\n        <NavButton onClick={nextMonth}>\r\n          <ArrowForwardIosIcon fontSize=\"small\" />\r\n        </NavButton>\r\n      </MonthNavigator>\r\n      \r\n      <CalendarGrid>\r\n        {renderWeekdays()}\r\n        {renderCells()}\r\n      </CalendarGrid>\r\n      \r\n      <CountdownSection>\r\n        <CountdownHeader>\r\n          <CountdownTitle>\r\n            倒数日\r\n            <ToggleButton \r\n              active={useZhuJiLi} \r\n              onClick={toggleZhuJiLi}\r\n              title={useZhuJiLi ? \"关闭竺纪笠模式\" : \"开启竺纪笠模式\"}\r\n            >\r\n              {useZhuJiLi ? <ToggleOnIcon /> : <ToggleOffIcon />}\r\n              竺纪笠\r\n            </ToggleButton>\r\n          </CountdownTitle>\r\n        </CountdownHeader>\r\n        \r\n        <CountdownList>\r\n          {sortedCountdowns.map(countdown => (\r\n            <CountdownItem \r\n              key={countdown.id}\r\n              countdown={countdown}\r\n              useZhuJiLi={useZhuJiLi}\r\n              onEdit={() => openEditCountdownModal(countdown)}\r\n              onDelete={() => deleteCountdown(countdown.id)}\r\n            />\r\n          ))}\r\n          \r\n          {countdowns.length === 0 && (\r\n            <EmptyState>\r\n              <p>暂无倒数日，点击右上角添加</p>\r\n            </EmptyState>\r\n          )}\r\n        </CountdownList>\r\n      </CountdownSection>\r\n      \r\n      <CountdownModal \r\n        isOpen={showCountdownModal}\r\n        onClose={closeCountdownModal}\r\n        onSave={saveCountdown}\r\n        countdown={editingCountdown}\r\n      />\r\n    </CalendarContainer>\r\n  );\r\n};\r\n\r\nexport default Calendar;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}