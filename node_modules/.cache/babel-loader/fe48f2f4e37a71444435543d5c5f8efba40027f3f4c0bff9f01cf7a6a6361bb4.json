{"ast":null,"code":"var _jsxFileName = \"D:\\\\Jliu Pureey\\\\Documents\\\\Editor\\\\extion\\\\homepage\\\\src\\\\modules\\\\Todo\\\\Todo.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect } from 'react';\nimport styled from 'styled-components';\nimport { saveToStorage, getFromStorage } from '../../utils/storage';\n\n// 组件导入\nimport TodoItem from './components/TodoItem';\nimport TodoModal from './components/TodoModal';\n\n// 图标导入\nimport AddIcon from '@mui/icons-material/Add';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst TodoContainer = styled.div`\n  width: 100%;\n  max-width: 800px;\n  margin: 0 auto;\n  padding: 20px;\n`;\n_c = TodoContainer;\nconst TodoHeader = styled.div`\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  margin-bottom: 20px;\n`;\n_c2 = TodoHeader;\nconst TodoTitle = styled.h2`\n  margin: 0;\n  font-size: 24px;\n  font-weight: 500;\n`;\n_c3 = TodoTitle;\nconst ActionButton = styled.button`\n  background-color: var(--primary-color);\n  color: white;\n  border: none;\n  border-radius: 50%;\n  width: 36px;\n  height: 36px;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  cursor: pointer;\n  \n  &:hover {\n    background-color: #3a7bc8;\n  }\n`;\n_c4 = ActionButton;\nconst TodoList = styled.div`\n  display: flex;\n  flex-direction: column;\n  gap: 10px;\n`;\n_c5 = TodoList;\nconst EmptyState = styled.div`\n  text-align: center;\n  padding: 40px 20px;\n  color: var(--text-color);\n  opacity: 0.7;\n`;\n\n// 提醒音频\n_c6 = EmptyState;\nconst notificationSound = new Audio('data:audio/wav;base64,UklGRnoGAABXQVZFZm10IBAAAAABAAEAQB8AAEAfAAABAAgAZGF0YQoGAACBhYqFbF1fdJivrJBhNjVgodDbq2EcBhxQo97tuHQpCRRAlN/svn0xDxZBi9nkvX0yEBdBitnj7tHQpGxPMzFV0/j/4LlmSTtDWrr/+N6xcVRCQlSl7PXeulpEQFRqwfPo1LVqUkdLXKzr6Nmm9/7kzK1yWk1JVZPf7N7QxbCLdGlaSmaJ2OTdx8mwlX5xXlBcerDR5Oa5zryrfWBXVmFwi8Pf6cqEm7KJbGBdVl1qlMjj6MF6lrCOb2FeW1tkfLHZ6t2j1NzEo4XO3r+TgHRpXFxkdZnH3OC8qqykkHpweGRVX3WUvdnk5dCkqq+jgXBualpcZ4O11uDn0LWvqqmUc2VwbWBcaH6qzeHm1cCjr7CjfGl1cWVfa4q0z9/j2bqhq66mh3JqdGthXnCVw9nj4MWnqK2pjHRpdG9mYGmEsc3e5dC3qKyspIBtcXNrZGFvjrzW4OG8qaWqqJN4a3FyaWVldo+91ODevaqlqaibeGxxcmpmZXCPvdTg3r2qpamom3hscXJqZmVwj73U4N69qqWpqJt4bHFyamZlcI+91ODevaqluaibeGxxcmpmZXCPvdTg3r2qpamomnhscXJqZmVwj73U4N69qqWpqJt4bHFyamZlcI+91ODevaqluaibeGxxcmpmZXCPvdTg3r2qpamomnhscXJqZmVwj73U4N69qqWpqJt4bHFyamZlcI+91ODeuaqluaibeGxxcmpmZXCPvdTg3r2qpamomnhscXJqZmVwj73U4N69qqWpqJt4bHFyamZlcI+91ODeuaqluaibeGxxcmpmZXCPvdTg3r2qpamomnhscXJqZmVwj73U4N69qqWpqJt4bHFyamZlcI+91ODeuaqluaibeGxxcmpmZXCPvdTg3r2qpamomnhscXJqZmVwj73U4N69qqWpqJt4bHFyamZlcI+91ODeuaqluaibeGxxcmpmZXCPvdTg3r2qpamomnhscXJqZmVwj73U4N69qqWpqJt4bHFyamZlcI+91ODeuaqluaibeGxxcmpmZXCPvdTg3r2qpamomnhscXJqZmVwj73U4N69qqWpqJt4bHFyamZlcI+91ODeuaqluaibeGxxcmpmZXCPvdTg3r2qpamomnhscXJqZmVwj73U4N69qqWpqJt4bHFyamZlcI+91ODeuaqluaibeGxxcmpmZXCPvdTg3r2qpamomnhscXJqZmVwj73U4N69qqWpqJt4bHFyamZlcI+91ODeuaqluaibeGxxcmpmZXCPvdTg3r2qpamomnhscXJqZmVwj73U4N69qqWpqJt4bHFyamZlcI+91ODeuaqluaibeGxxcmpmZXCPvdTg3r2qpamomnhscXJqZmVwj73U4N69qqWpqJt4bHFyamZlcI+91ODeuaqluaibeGxxcmpmZXCPvdTg3r2qpamomnhscXJqZmVwj73U4N69qqWpqJt4bHFyamZlcI+91ODeuaqluaibeGxxcmpmZXCPvdTg3r2qpamomnhscXJqZmVwj73U4N69qqWpqJt4bHFyamZlcI+91ODeuaqluaibeGxxcmpmZXCPvdTg3r2qpamomnhscXJqZmVwj73U4N69qqWpqJt4bHFyamZlcI+91ODeuaqluaibeGxxcmpmZXCPvdTg3r2qpamomnhscXJqZmVwj73U4N69qqWpqJt4bHFyamZlcI+91ODeuaqluaibeGxxcmpmZXCPvdTg3r2qpamomnhscXJqZmVwj73U4N69qqWpqJt4bHFyamZlcI+91ODeuaqluaibeGxxcmpmZXCPvdTg3r2qpamomnhscXJqZmVwj73U4N69qqWpqJt4bHFyamZlcI+91ODeuaqluaibeGxxcmpmZXCPvdTg3r2qpamomnhscXJqZmVwj73U4N69qqWpqJt4bHFyamZlcI+91ODeuaqluaibeGxxcmpmZXCPvdTg3r2qpamomnhscXJqZmVwj73U4N69qqWpqJt4bHFyamZlcI+91ODeuaqluaibeGxxcmpmZXCPvdTg3r2qpamomnhscXJqZmVwj73U4N69qqWpqJt4bHFyamZlcI+91ODeuaqluaibeGxxcmpmZXCPvdTg3r2qpamomnhscXJqZmVwj73U4N69qqWpqJt4bHFyamZlcI+91ODeuaqluaibeGxxcmpmZXCPvdTg3r2qpamomnhscXJqZmVwj73U4N69qqWpqJt4bHFyamZlcI+91ODeuaqluaibeGxxcmpmZXCPvdTg3r2qpamomnhscXJqZmVwj73U4N69qqWpqJt4bHFyamZlcI+91ODeuaqluaibeGxxcmpmZXCPvdTg3r2qpamomnhscXJqZmVwj73U4N69qqWpqJt4bHFyamZlcI+91ODeuaqluaibeGxxcmpmZXCPvdTg3r2qpamomnhscXJqZmVwj73U4N69qqWpqJt4bHFyamZlcI+91ODeuaqluaibeGxxcmpmZXCPvdTg3r2qpamomnhscXJqZmVwj73U4N69qqWpqJt4bHFyamZlcI+91ODeuaqluaibeGxxcmpmZXCPvdTg3r2qpamomnhscXJqZmVwj73U4N69qqWpqJt4bHFyamZlcI+91ODeuaqluaibeGxxcmpmZXCPvdTg3r2qpamomnhscXJqZmVwj73U4N69qqWpqJt4bHFyamZlcI+91ODeuaqluaibeGxxcmpmZXCPvdTg3r2qpamomnhscXJqZmVwj73U4N69qqWpqJt4bHFyamZlcI+91ODeuaqluaibeGxxcmpmZXCPvdTg3r2qpamomnhscXJqZmVwj73U4N69qqWpqJt4bHFyamZlcI+91ODeuaqluaibeGxxcmpmZXCPvdTg3r2qpamomnhscXJqZmVwj73U4N69qqWpqJt4bHFyamZlcI+91ODeuaqluaibeGxxcmpmZXCPvdTg3r2qpamomnhscXJqZmVwj73U4N69qqWpqJt4bHFyamZlcI+91ODeuaqluaibeGxxcmpmZXCPvdTg3r2qpamomnhscXJqZmVwj73U4N69qqWpqJt4bHFyamZlcI+91ODeuaqluaibeGxxcmpmZXCPvdTg3r2qpamomnhscXJqZmVwj73U4N69qqWpqJt4bHFyamZlcI+91ODeuaqluaibeGxxcmpmZXCPvdTg3r2qpamomnhscXJqZmVwj73U4N69qqWpqJt4bHFyamZlcI+91ODeuaqluaibeGxxcmpmZXCPvdTg3r2qpamomnhscXJqZmVwj73U4N69qqWpqJt4bHFyamZlcI+91ODeuaqluaibeGxxcmpmZXCPvdTg3r2qpamomnhscXJqZmVwj73U4N69qqWpqJt4bHFyamZlcI+91ODeuaqluaibeGxxcmpmZXCPvdTg3r2qpamomnhscXJqZmVwj73U4N69qqWpqJt4bHFyamZlcI+91ODeuaqluaibeGxxcmpmZXCPvdTg3r2qpamomnhscXJqZmVwj73U4N69qqWpqJt4bHFyamZlcI+91ODeuaqluaibeGxxcmpmZXCPvdTg3r2qpamomnhscXJqZmVwj73U4N69qqWpqJt4bHFyamZlcI+91ODeuaqluaibeGxxcmpmZXCPvdTg3r2qpamomnhscXJqZmVwj73U4N69qqWpqJt4bHFyamZlcI+91ODeuaqluaibeGxxcmpmZXCPvdTg3r2qpamomnhscXJqZmVwj73U4N69qqWpqJt4bHFyamZlcI+91ODeuaqluaibeGxxcmpmZXCPvdTg3r2qpamomnhscXJqZmVwj73U4N69qqWpqJt4bHFyamZlcI+91ODeuaqluaibeGxxcmpmZXCPvdTg3r2qpamomnhscXJqZmVwj73U4N69qqWpqJt4bHFyamZlcI+91ODeuaqluaibeGxxcmpmZXCPvdTg3r2qpamomnhscXJqZmVwj73U4N69qqWpqJt4bHFyamZlcI+91ODeuaqluaibeGxxcmpmZXCPvdTg3r2qpamomnhscXJqZmVwj73U4N69qqWpqJt4bHFyamZlcI+91ODeuaqluaibeGxxcmpmZXCPvdTg3r2qpamomnhscXJqZmVwj73U4N69qqWpqJt4bHFyamZlcI+91ODeuaqluaibeGxxcmpmZXCPvdTg3r2qpamomnhscXJqZmVwj73U4N69qqWpqJt4bHFyamZlcI+91ODeuaqluaibeGxxcmpmZXCPvdTg3r2qpamomnhscXJqZmVwj73U4N69qqWpqJt4bHFyamZlcI+91ODeuaqluaibeGxxcmpmZXCPvdTg3r2qpamomnhscXJqZmVwj73U4N69qqWpqJt4bHFyamZlcI+91ODeuaqluaibeGxxcmpmZXCPvdTg3r2qpamomnhscXJqZmVwj73U4N69qqWpqJt4bHFyamZlcI+91ODeuaqluaibeGxxcmpmZXCPvdTg3r2qpamomnhscXJqZmVwj73U4N69qqWpqJt4bHFyamZlcI+91ODeuaqluaibeGxxcmpmZXCPvdTg3r2qpamomnhscXJqZmVwj73U4N69qqWpqJt4bHFyamZlcI+91ODeuaqluaibeGxxcmpmZXCPvdTg3r2qpamomnhscXJqZmVwj73U4N69qqWpqJt4bHFyamZlcI+91ODeuaqluaibeGxxcmpmZXCPvdTg3r2qpamomnhscXJqZmVwj73U4N69qqWpqJt4bHFyamZlcI+91ODeuaqluaibeGxxcmpmZXCPvdTg3r2qpamomnhscXJqZmVwj73U4N69qqWpqJt4bHFyamZlcI+91ODeuaqluaibeGxxcmpmZXCPvdTg3r2qpamomnhscXJqZmVwj73U4N69qqWpqJt4bHFyamZlcI+91ODeuaqluaibeGxxcmpmZXCPvdTg3r2qpamomnhscXJqZmVwj73U4N69qqWpqJt4bHFyamZlcI+91ODeuaqluaibeGxxcmpmZXCPvdTg3r2qpamomnhscXJqZmVwj73U4N69qqWpqJt4bHFyamZlcI+91ODeuaqluaibeGxxcmpmZXCPvdTg3r2qpamomnhscXJqZmVwj73U4N69qqWpqJt4bHFyamZlcI+91ODeuaqluaibeGxxcmpmZXCPvdTg3r2qpamomnhscXJqZmVwj73U4N69qqWpqJt4bHFyamZlcI+91ODeuaqluaibeGxxcmpmZXCPvdTg3r2qpamomnhscXJqZmVwj73U4N69qqWpqJt4bHFyamZlcI+91ODeuaqluaibeGxxcmpmZXCPvdTg3r2qpamomnhscXJqZmVwj73U4N69qqWpqJt4bHFyamZlcI+91ODeuaqluaibeGxxcmpmZXCPvdTg3r2qpamomnhscXJqZmVwj73U4N69qqWpqJt4bHFyamZlcI+91ODeuaqluaibeGxxcmpmZXCPvdTg3r2qpamomnhscXJqZmVwj73U4N69qqWpqJt4bHFyamZlcI+91ODeuaqluaibeGxxcmpmZXCPvdTg3r2qpamomnhscXJqZmVwj73U4N69qqWpqJt4bHFyamZlcI+91ODeuaqluaibeGxxcmpmZXCPvdTg3r2qpamomnhscXJqZmVwj73U4N69qqWpqJt4bHFyamZlcI+91ODeuaqluaibeGxxcmpmZXCPvdTg3r2qpamomnhscXJqZmVwj73U4N69qqWpqJt4bHFyamZlcI+91ODeuaqluaibeGxxcmpmZXCPvdTg3r2qpamomnhscXJqZmVwj73U4N69qqWpqJt4bHFyamZlcI+91ODeuaqluaibeGxxcmpmZXCPvdTg3r2qpamomnhscXJqZmVwj73U4N69qqWpqJt4bHFyamZlcI+91ODeuaqluaibeGxxcmpmZXCPvdTg3r2qpamomnhscXJqZmVwj73U4N69qqWpqJt4bHFyamZlcI+91ODeuaqluaibeGxxcmpmZXCPvdTg3r2qpamomnhscXJqZmVwj73U4N69qqWpqJt4bHFyamZlcI+91ODeuaqluaibeGxxcmpmZXCPvdTg3r2qpamomnhscXJqZmVwj73U4N69qqWpqJt4bHFyamZlcI+91ODeuaqluaibeGxxcmpmZXCPvdTg3r2qpamomnhscXJqZmVwj73U4N69qqWpqJt4bHFyamZlcI+91ODeuaqluaibeGxxcmpmZXCPvdTg3r2qpamomnhscXJqZmVwj73U4N69qqWpqJt4bHFyamZlcI+91ODeuaqluaibeGxxcmpmZXCPvdTg3r2qpamomnhscXJqZmVwj73U4N69qqWpqJt4bHFyamZlcI+91ODeuaqluaibeGxxcmpmZXCPvdTg3r2qpamomnhscXJqZmVwj73U4N69qqWpqJt4bHFyamZlcI+91ODeuaqluaibeGxxcmpmZXCPvdTg3r2qpamomnhscXJqZmVwj73U4N69qqWpqJt4bHFyamZlcI+91ODeuaqluaibeGxxcmpmZXCPvdTg3r2qpamomnhscXJqZmVwj73U4N69qqWpqJt4bHFyamZlcI+91ODeuaqluaibeGxxcmpmZXCPvdTg3r2qpamomnhscXJqZmVwj73U4N69qqWpqJt4bHFyamZlcI+91ODeuaqluaibeGxxcmpmZXCPvdTg3r2qpamomnhscXJqZmVwj73U4N69qqWpqJt4bHFyamZlcI+91ODeuaqluaibeGxxcmpmZXCPvdTg3r2qpamomnhscXJqZmVwj73U4N69qqWpqJt4bHFyamZlcI+91ODeuaqluaibeGxxcmpmZXCPvdTg3r2qpamomnhscXJqZmVwj73U4N69qqWpqJt4bHFyamZlcI+91ODeuaqluaibeGxxcmpmZXCPvdTg3r2qpamomnhscXJqZmVwj73U4N69qqWpqJt4bHFyamZlcI+91ODeuaqluaibeGxxcmpmZXCPvdTg3r2qpamomnhscXJqZmVwj73U4N69qqWpqJt4bHFyamZlcI+91ODeuaqluaibeGxxcmpmZXCPvdTg3r2qpamomnhscXJqZmVwj73U4N69qqWpqJt4bHFyamZlcI+91ODeuaqluaibeGxxcmpmZXCPvdTg3r2qpamomnhscXJqZmVwj73U4N69qqWpqJt4bHFyamZlcI+91ODeuaqluaibeGxxcmpmZXCPvdTg3r2qpamomnhscXJqZmVwj73U4N69qqWpqJt4bHFyamZlcI+91ODeuaqluaibeGxxcmpmZXCPvdTg3r2qpamomnhscXJqZmVwj73U4N69qqWpqJt4bHFyamZlcI+91ODeuaqluaibeGxxcmpmZXCPvdTg3r2qpamomnhscXJqZmVwj73U4N69qqWpqJt4bHFyamZlcI+91ODeuaqluaibeGxxcmpmZXCPvdTg3r2qpamomnhscXJqZmVwj73U4N69qqWpqJt4bHFyamZlcI+91ODeuaqluaibeGxxcmpmZXCPvdTg3r2qpamomnhscXJqZmVwj73U4N69qqWpqJt4bHFyamZlcI+91ODeuaqluaibeGxxcmpmZXCPvdTg3r2qpamomnhscXJqZmVwj73U4N69qqWpqJt4bHFyamZlcI+91ODeuaqluaibeGxxcmpmZXCPvdTg3r2qpamomnhscXJqZmVwj73U4N69qqWpqJt4bHFyamZlcI+91ODeuaqluaibeGxxcmpmZXCPvdTg3r2qpamomnhscXJqZmVwj73U');\nconst Todo = () => {\n  _s();\n  // 状态\n  const [todos, setTodos] = useState([]);\n  const [showModal, setShowModal] = useState(false);\n  const [modalMode, setModalMode] = useState('add'); // add, edit\n  const [editingItem, setEditingItem] = useState(null);\n\n  // 初始化数据\n  useEffect(() => {\n    const savedTodos = getFromStorage('homepage-todos', []);\n    setTodos(savedTodos);\n\n    // 设置通知检查定时器\n    const checkNotifications = () => {\n      const now = new Date();\n      savedTodos.forEach(todo => {\n        if (todo.notification && !todo.completed) {\n          const notificationTime = new Date(todo.notification);\n\n          // 如果当前时间在通知时间的前后1分钟内，且尚未通知过\n          if (Math.abs(now - notificationTime) < 60000 && !todo.notified) {\n            // 显示通知\n            if (Notification.permission === 'granted') {\n              new Notification('待办提醒', {\n                body: todo.name,\n                icon: '/icons/icon128.png'\n              });\n\n              // 播放提示音\n              notificationSound.play();\n\n              // 标记为已通知\n              const updatedTodos = savedTodos.map(item => {\n                if (item.id === todo.id) {\n                  return {\n                    ...item,\n                    notified: true\n                  };\n                }\n                return item;\n              });\n              setTodos(updatedTodos);\n              saveToStorage('homepage-todos', updatedTodos);\n            }\n          }\n        }\n      });\n    };\n\n    // 每分钟检查一次通知\n    const notificationInterval = setInterval(checkNotifications, 60000);\n\n    // 请求通知权限\n    if (Notification.permission !== 'granted' && Notification.permission !== 'denied') {\n      Notification.requestPermission();\n    }\n    return () => {\n      clearInterval(notificationInterval);\n    };\n  }, []);\n\n  // 打开添加待办事项模态框\n  const openAddTodoModal = () => {\n    setModalMode('add');\n    setEditingItem(null);\n    setShowModal(true);\n  };\n\n  // 打开编辑待办事项模态框\n  const openEditTodoModal = todo => {\n    setModalMode('edit');\n    setEditingItem(todo);\n    setShowModal(true);\n  };\n\n  // 关闭模态框\n  const closeModal = () => {\n    setShowModal(false);\n  };\n\n  // 保存待办事项\n  const saveTodo = formData => {\n    const newTodo = {\n      id: editingItem ? editingItem.id : Date.now(),\n      name: formData.name,\n      date: formData.date,\n      notification: formData.notification,\n      completed: formData.completed || false,\n      notified: false\n    };\n    let updatedTodos;\n    if (modalMode === 'edit') {\n      // 编辑现有待办事项\n      updatedTodos = todos.map(item => item.id === editingItem.id ? newTodo : item);\n    } else {\n      // 添加新待办事项\n      updatedTodos = [...todos, newTodo];\n    }\n    setTodos(updatedTodos);\n    saveToStorage('homepage-todos', updatedTodos);\n    closeModal();\n  };\n\n  // 删除待办事项\n  const deleteTodo = id => {\n    if (window.confirm('确定要删除这个待办事项吗？')) {\n      const updatedTodos = todos.filter(item => item.id !== id);\n      setTodos(updatedTodos);\n      saveToStorage('homepage-todos', updatedTodos);\n    }\n  };\n\n  // 切换待办事项完成状态\n  const toggleTodoComplete = id => {\n    const updatedTodos = todos.map(todo => {\n      if (todo.id === id) {\n        return {\n          ...todo,\n          completed: !todo.completed\n        };\n      }\n      return todo;\n    });\n    setTodos(updatedTodos);\n    saveToStorage('homepage-todos', updatedTodos);\n  };\n\n  // 按日期排序，未完成的在前，已完成的在后\n  const sortedTodos = [...todos].sort((a, b) => {\n    // 首先按完成状态排序\n    if (a.completed !== b.completed) {\n      return a.completed ? 1 : -1;\n    }\n\n    // 然后按日期排序\n    return new Date(a.date) - new Date(b.date);\n  });\n  return /*#__PURE__*/_jsxDEV(TodoContainer, {\n    children: [/*#__PURE__*/_jsxDEV(TodoHeader, {\n      children: [/*#__PURE__*/_jsxDEV(TodoTitle, {\n        children: \"\\u5F85\\u529E\\u4E8B\\u9879\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 209,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(ActionButton, {\n        onClick: openAddTodoModal,\n        title: \"\\u6DFB\\u52A0\\u5F85\\u529E\\u4E8B\\u9879\",\n        children: /*#__PURE__*/_jsxDEV(AddIcon, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 211,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 210,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 208,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(TodoList, {\n      children: [sortedTodos.map(todo => /*#__PURE__*/_jsxDEV(TodoItem, {\n        todo: todo,\n        onToggleComplete: toggleTodoComplete,\n        onEdit: openEditTodoModal,\n        onDelete: deleteTodo\n      }, todo.id, false, {\n        fileName: _jsxFileName,\n        lineNumber: 217,\n        columnNumber: 11\n      }, this)), todos.length === 0 && /*#__PURE__*/_jsxDEV(EmptyState, {\n        children: /*#__PURE__*/_jsxDEV(\"p\", {\n          children: \"\\u6682\\u65E0\\u5F85\\u529E\\u4E8B\\u9879\\uFF0C\\u70B9\\u51FB\\u53F3\\u4E0A\\u89D2\\u6DFB\\u52A0\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 228,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 227,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 215,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(TodoModal, {\n      isOpen: showModal,\n      onClose: closeModal,\n      onSave: saveTodo,\n      todo: editingItem\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 233,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 207,\n    columnNumber: 5\n  }, this);\n};\n_s(Todo, \"ky0yU2wKwO7VtiGvE+COP8hgw/M=\");\n_c7 = Todo;\nexport default Todo;\nvar _c, _c2, _c3, _c4, _c5, _c6, _c7;\n$RefreshReg$(_c, \"TodoContainer\");\n$RefreshReg$(_c2, \"TodoHeader\");\n$RefreshReg$(_c3, \"TodoTitle\");\n$RefreshReg$(_c4, \"ActionButton\");\n$RefreshReg$(_c5, \"TodoList\");\n$RefreshReg$(_c6, \"EmptyState\");\n$RefreshReg$(_c7, \"Todo\");","map":{"version":3,"names":["React","useState","useEffect","styled","saveToStorage","getFromStorage","TodoItem","TodoModal","AddIcon","jsxDEV","_jsxDEV","TodoContainer","div","_c","TodoHeader","_c2","TodoTitle","h2","_c3","ActionButton","button","_c4","TodoList","_c5","EmptyState","_c6","notificationSound","Audio","Todo","_s","todos","setTodos","showModal","setShowModal","modalMode","setModalMode","editingItem","setEditingItem","savedTodos","checkNotifications","now","Date","forEach","todo","notification","completed","notificationTime","Math","abs","notified","Notification","permission","body","name","icon","play","updatedTodos","map","item","id","notificationInterval","setInterval","requestPermission","clearInterval","openAddTodoModal","openEditTodoModal","closeModal","saveTodo","formData","newTodo","date","deleteTodo","window","confirm","filter","toggleTodoComplete","sortedTodos","sort","a","b","children","fileName","_jsxFileName","lineNumber","columnNumber","onClick","title","onToggleComplete","onEdit","onDelete","length","isOpen","onClose","onSave","_c7","$RefreshReg$"],"sources":["D:/Jliu Pureey/Documents/Editor/extion/homepage/src/modules/Todo/Todo.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport styled from 'styled-components';\r\nimport { saveToStorage, getFromStorage } from '../../utils/storage';\r\n\r\n// 组件导入\r\nimport TodoItem from './components/TodoItem';\r\nimport TodoModal from './components/TodoModal';\r\n\r\n// 图标导入\r\nimport AddIcon from '@mui/icons-material/Add';\r\n\r\nconst TodoContainer = styled.div`\r\n  width: 100%;\r\n  max-width: 800px;\r\n  margin: 0 auto;\r\n  padding: 20px;\r\n`;\r\n\r\nconst TodoHeader = styled.div`\r\n  display: flex;\r\n  justify-content: space-between;\r\n  align-items: center;\r\n  margin-bottom: 20px;\r\n`;\r\n\r\nconst TodoTitle = styled.h2`\r\n  margin: 0;\r\n  font-size: 24px;\r\n  font-weight: 500;\r\n`;\r\n\r\nconst ActionButton = styled.button`\r\n  background-color: var(--primary-color);\r\n  color: white;\r\n  border: none;\r\n  border-radius: 50%;\r\n  width: 36px;\r\n  height: 36px;\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n  cursor: pointer;\r\n  \r\n  &:hover {\r\n    background-color: #3a7bc8;\r\n  }\r\n`;\r\n\r\nconst TodoList = styled.div`\r\n  display: flex;\r\n  flex-direction: column;\r\n  gap: 10px;\r\n`;\r\n\r\nconst EmptyState = styled.div`\r\n  text-align: center;\r\n  padding: 40px 20px;\r\n  color: var(--text-color);\r\n  opacity: 0.7;\r\n`;\r\n\r\n// 提醒音频\r\nconst notificationSound = new Audio('data:audio/wav;base64,UklGRnoGAABXQVZFZm10IBAAAAABAAEAQB8AAEAfAAABAAgAZGF0YQoGAACBhYqFbF1fdJivrJBhNjVgodDbq2EcBhxQo97tuHQpCRRAlN/svn0xDxZBi9nkvX0yEBdBitnj7tHQpGxPMzFV0/j/4LlmSTtDWrr/+N6xcVRCQlSl7PXeulpEQFRqwfPo1LVqUkdLXKzr6Nmm9/7kzK1yWk1JVZPf7N7QxbCLdGlaSmaJ2OTdx8mwlX5xXlBcerDR5Oa5zryrfWBXVmFwi8Pf6cqEm7KJbGBdVl1qlMjj6MF6lrCOb2FeW1tkfLHZ6t2j1NzEo4XO3r+TgHRpXFxkdZnH3OC8qqykkHpweGRVX3WUvdnk5dCkqq+jgXBualpcZ4O11uDn0LWvqqmUc2VwbWBcaH6qzeHm1cCjr7CjfGl1cWVfa4q0z9/j2bqhq66mh3JqdGthXnCVw9nj4MWnqK2pjHRpdG9mYGmEsc3e5dC3qKyspIBtcXNrZGFvjrzW4OG8qaWqqJN4a3FyaWVldo+91ODevaqlqaibeGxxcmpmZXCPvdTg3r2qpamom3hscXJqZmVwj73U4N69qqWpqJt4bHFyamZlcI+91ODevaqluaibeGxxcmpmZXCPvdTg3r2qpamomnhscXJqZmVwj73U4N69qqWpqJt4bHFyamZlcI+91ODevaqluaibeGxxcmpmZXCPvdTg3r2qpamomnhscXJqZmVwj73U4N69qqWpqJt4bHFyamZlcI+91ODeuaqluaibeGxxcmpmZXCPvdTg3r2qpamomnhscXJqZmVwj73U4N69qqWpqJt4bHFyamZlcI+91ODeuaqluaibeGxxcmpmZXCPvdTg3r2qpamomnhscXJqZmVwj73U4N69qqWpqJt4bHFyamZlcI+91ODeuaqluaibeGxxcmpmZXCPvdTg3r2qpamomnhscXJqZmVwj73U4N69qqWpqJt4bHFyamZlcI+91ODeuaqluaibeGxxcmpmZXCPvdTg3r2qpamomnhscXJqZmVwj73U4N69qqWpqJt4bHFyamZlcI+91ODeuaqluaibeGxxcmpmZXCPvdTg3r2qpamomnhscXJqZmVwj73U4N69qqWpqJt4bHFyamZlcI+91ODeuaqluaibeGxxcmpmZXCPvdTg3r2qpamomnhscXJqZmVwj73U4N69qqWpqJt4bHFyamZlcI+91ODeuaqluaibeGxxcmpmZXCPvdTg3r2qpamomnhscXJqZmVwj73U4N69qqWpqJt4bHFyamZlcI+91ODeuaqluaibeGxxcmpmZXCPvdTg3r2qpamomnhscXJqZmVwj73U4N69qqWpqJt4bHFyamZlcI+91ODeuaqluaibeGxxcmpmZXCPvdTg3r2qpamomnhscXJqZmVwj73U4N69qqWpqJt4bHFyamZlcI+91ODeuaqluaibeGxxcmpmZXCPvdTg3r2qpamomnhscXJqZmVwj73U4N69qqWpqJt4bHFyamZlcI+91ODeuaqluaibeGxxcmpmZXCPvdTg3r2qpamomnhscXJqZmVwj73U4N69qqWpqJt4bHFyamZlcI+91ODeuaqluaibeGxxcmpmZXCPvdTg3r2qpamomnhscXJqZmVwj73U4N69qqWpqJt4bHFyamZlcI+91ODeuaqluaibeGxxcmpmZXCPvdTg3r2qpamomnhscXJqZmVwj73U4N69qqWpqJt4bHFyamZlcI+91ODeuaqluaibeGxxcmpmZXCPvdTg3r2qpamomnhscXJqZmVwj73U4N69qqWpqJt4bHFyamZlcI+91ODeuaqluaibeGxxcmpmZXCPvdTg3r2qpamomnhscXJqZmVwj73U4N69qqWpqJt4bHFyamZlcI+91ODeuaqluaibeGxxcmpmZXCPvdTg3r2qpamomnhscXJqZmVwj73U4N69qqWpqJt4bHFyamZlcI+91ODeuaqluaibeGxxcmpmZXCPvdTg3r2qpamomnhscXJqZmVwj73U4N69qqWpqJt4bHFyamZlcI+91ODeuaqluaibeGxxcmpmZXCPvdTg3r2qpamomnhscXJqZmVwj73U4N69qqWpqJt4bHFyamZlcI+91ODeuaqluaibeGxxcmpmZXCPvdTg3r2qpamomnhscXJqZmVwj73U4N69qqWpqJt4bHFyamZlcI+91ODeuaqluaibeGxxcmpmZXCPvdTg3r2qpamomnhscXJqZmVwj73U4N69qqWpqJt4bHFyamZlcI+91ODeuaqluaibeGxxcmpmZXCPvdTg3r2qpamomnhscXJqZmVwj73U4N69qqWpqJt4bHFyamZlcI+91ODeuaqluaibeGxxcmpmZXCPvdTg3r2qpamomnhscXJqZmVwj73U4N69qqWpqJt4bHFyamZlcI+91ODeuaqluaibeGxxcmpmZXCPvdTg3r2qpamomnhscXJqZmVwj73U4N69qqWpqJt4bHFyamZlcI+91ODeuaqluaibeGxxcmpmZXCPvdTg3r2qpamomnhscXJqZmVwj73U4N69qqWpqJt4bHFyamZlcI+91ODeuaqluaibeGxxcmpmZXCPvdTg3r2qpamomnhscXJqZmVwj73U4N69qqWpqJt4bHFyamZlcI+91ODeuaqluaibeGxxcmpmZXCPvdTg3r2qpamomnhscXJqZmVwj73U4N69qqWpqJt4bHFyamZlcI+91ODeuaqluaibeGxxcmpmZXCPvdTg3r2qpamomnhscXJqZmVwj73U4N69qqWpqJt4bHFyamZlcI+91ODeuaqluaibeGxxcmpmZXCPvdTg3r2qpamomnhscXJqZmVwj73U4N69qqWpqJt4bHFyamZlcI+91ODeuaqluaibeGxxcmpmZXCPvdTg3r2qpamomnhscXJqZmVwj73U4N69qqWpqJt4bHFyamZlcI+91ODeuaqluaibeGxxcmpmZXCPvdTg3r2qpamomnhscXJqZmVwj73U4N69qqWpqJt4bHFyamZlcI+91ODeuaqluaibeGxxcmpmZXCPvdTg3r2qpamomnhscXJqZmVwj73U4N69qqWpqJt4bHFyamZlcI+91ODeuaqluaibeGxxcmpmZXCPvdTg3r2qpamomnhscXJqZmVwj73U4N69qqWpqJt4bHFyamZlcI+91ODeuaqluaibeGxxcmpmZXCPvdTg3r2qpamomnhscXJqZmVwj73U4N69qqWpqJt4bHFyamZlcI+91ODeuaqluaibeGxxcmpmZXCPvdTg3r2qpamomnhscXJqZmVwj73U4N69qqWpqJt4bHFyamZlcI+91ODeuaqluaibeGxxcmpmZXCPvdTg3r2qpamomnhscXJqZmVwj73U4N69qqWpqJt4bHFyamZlcI+91ODeuaqluaibeGxxcmpmZXCPvdTg3r2qpamomnhscXJqZmVwj73U4N69qqWpqJt4bHFyamZlcI+91ODeuaqluaibeGxxcmpmZXCPvdTg3r2qpamomnhscXJqZmVwj73U4N69qqWpqJt4bHFyamZlcI+91ODeuaqluaibeGxxcmpmZXCPvdTg3r2qpamomnhscXJqZmVwj73U4N69qqWpqJt4bHFyamZlcI+91ODeuaqluaibeGxxcmpmZXCPvdTg3r2qpamomnhscXJqZmVwj73U4N69qqWpqJt4bHFyamZlcI+91ODeuaqluaibeGxxcmpmZXCPvdTg3r2qpamomnhscXJqZmVwj73U4N69qqWpqJt4bHFyamZlcI+91ODeuaqluaibeGxxcmpmZXCPvdTg3r2qpamomnhscXJqZmVwj73U4N69qqWpqJt4bHFyamZlcI+91ODeuaqluaibeGxxcmpmZXCPvdTg3r2qpamomnhscXJqZmVwj73U4N69qqWpqJt4bHFyamZlcI+91ODeuaqluaibeGxxcmpmZXCPvdTg3r2qpamomnhscXJqZmVwj73U4N69qqWpqJt4bHFyamZlcI+91ODeuaqluaibeGxxcmpmZXCPvdTg3r2qpamomnhscXJqZmVwj73U4N69qqWpqJt4bHFyamZlcI+91ODeuaqluaibeGxxcmpmZXCPvdTg3r2qpamomnhscXJqZmVwj73U4N69qqWpqJt4bHFyamZlcI+91ODeuaqluaibeGxxcmpmZXCPvdTg3r2qpamomnhscXJqZmVwj73U4N69qqWpqJt4bHFyamZlcI+91ODeuaqluaibeGxxcmpmZXCPvdTg3r2qpamomnhscXJqZmVwj73U4N69qqWpqJt4bHFyamZlcI+91ODeuaqluaibeGxxcmpmZXCPvdTg3r2qpamomnhscXJqZmVwj73U4N69qqWpqJt4bHFyamZlcI+91ODeuaqluaibeGxxcmpmZXCPvdTg3r2qpamomnhscXJqZmVwj73U4N69qqWpqJt4bHFyamZlcI+91ODeuaqluaibeGxxcmpmZXCPvdTg3r2qpamomnhscXJqZmVwj73U4N69qqWpqJt4bHFyamZlcI+91ODeuaqluaibeGxxcmpmZXCPvdTg3r2qpamomnhscXJqZmVwj73U4N69qqWpqJt4bHFyamZlcI+91ODeuaqluaibeGxxcmpmZXCPvdTg3r2qpamomnhscXJqZmVwj73U4N69qqWpqJt4bHFyamZlcI+91ODeuaqluaibeGxxcmpmZXCPvdTg3r2qpamomnhscXJqZmVwj73U4N69qqWpqJt4bHFyamZlcI+91ODeuaqluaibeGxxcmpmZXCPvdTg3r2qpamomnhscXJqZmVwj73U4N69qqWpqJt4bHFyamZlcI+91ODeuaqluaibeGxxcmpmZXCPvdTg3r2qpamomnhscXJqZmVwj73U4N69qqWpqJt4bHFyamZlcI+91ODeuaqluaibeGxxcmpmZXCPvdTg3r2qpamomnhscXJqZmVwj73U4N69qqWpqJt4bHFyamZlcI+91ODeuaqluaibeGxxcmpmZXCPvdTg3r2qpamomnhscXJqZmVwj73U4N69qqWpqJt4bHFyamZlcI+91ODeuaqluaibeGxxcmpmZXCPvdTg3r2qpamomnhscXJqZmVwj73U4N69qqWpqJt4bHFyamZlcI+91ODeuaqluaibeGxxcmpmZXCPvdTg3r2qpamomnhscXJqZmVwj73U4N69qqWpqJt4bHFyamZlcI+91ODeuaqluaibeGxxcmpmZXCPvdTg3r2qpamomnhscXJqZmVwj73U4N69qqWpqJt4bHFyamZlcI+91ODeuaqluaibeGxxcmpmZXCPvdTg3r2qpamomnhscXJqZmVwj73U4N69qqWpqJt4bHFyamZlcI+91ODeuaqluaibeGxxcmpmZXCPvdTg3r2qpamomnhscXJqZmVwj73U4N69qqWpqJt4bHFyamZlcI+91ODeuaqluaibeGxxcmpmZXCPvdTg3r2qpamomnhscXJqZmVwj73U4N69qqWpqJt4bHFyamZlcI+91ODeuaqluaibeGxxcmpmZXCPvdTg3r2qpamomnhscXJqZmVwj73U4N69qqWpqJt4bHFyamZlcI+91ODeuaqluaibeGxxcmpmZXCPvdTg3r2qpamomnhscXJqZmVwj73U4N69qqWpqJt4bHFyamZlcI+91ODeuaqluaibeGxxcmpmZXCPvdTg3r2qpamomnhscXJqZmVwj73U4N69qqWpqJt4bHFyamZlcI+91ODeuaqluaibeGxxcmpmZXCPvdTg3r2qpamomnhscXJqZmVwj73U4N69qqWpqJt4bHFyamZlcI+91ODeuaqluaibeGxxcmpmZXCPvdTg3r2qpamomnhscXJqZmVwj73U4N69qqWpqJt4bHFyamZlcI+91ODeuaqluaibeGxxcmpmZXCPvdTg3r2qpamomnhscXJqZmVwj73U4N69qqWpqJt4bHFyamZlcI+91ODeuaqluaibeGxxcmpmZXCPvdTg3r2qpamomnhscXJqZmVwj73U4N69qqWpqJt4bHFyamZlcI+91ODeuaqluaibeGxxcmpmZXCPvdTg3r2qpamomnhscXJqZmVwj73U4N69qqWpqJt4bHFyamZlcI+91ODeuaqluaibeGxxcmpmZXCPvdTg3r2qpamomnhscXJqZmVwj73U4N69qqWpqJt4bHFyamZlcI+91ODeuaqluaibeGxxcmpmZXCPvdTg3r2qpamomnhscXJqZmVwj73U4N69qqWpqJt4bHFyamZlcI+91ODeuaqluaibeGxxcmpmZXCPvdTg3r2qpamomnhscXJqZmVwj73U4N69qqWpqJt4bHFyamZlcI+91ODeuaqluaibeGxxcmpmZXCPvdTg3r2qpamomnhscXJqZmVwj73U4N69qqWpqJt4bHFyamZlcI+91ODeuaqluaibeGxxcmpmZXCPvdTg3r2qpamomnhscXJqZmVwj73U4N69qqWpqJt4bHFyamZlcI+91ODeuaqluaibeGxxcmpmZXCPvdTg3r2qpamomnhscXJqZmVwj73U4N69qqWpqJt4bHFyamZlcI+91ODeuaqluaibeGxxcmpmZXCPvdTg3r2qpamomnhscXJqZmVwj73U4N69qqWpqJt4bHFyamZlcI+91ODeuaqluaibeGxxcmpmZXCPvdTg3r2qpamomnhscXJqZmVwj73U4N69qqWpqJt4bHFyamZlcI+91ODeuaqluaibeGxxcmpmZXCPvdTg3r2qpamomnhscXJqZmVwj73U4N69qqWpqJt4bHFyamZlcI+91ODeuaqluaibeGxxcmpmZXCPvdTg3r2qpamomnhscXJqZmVwj73U4N69qqWpqJt4bHFyamZlcI+91ODeuaqluaibeGxxcmpmZXCPvdTg3r2qpamomnhscXJqZmVwj73U4N69qqWpqJt4bHFyamZlcI+91ODeuaqluaibeGxxcmpmZXCPvdTg3r2qpamomnhscXJqZmVwj73U4N69qqWpqJt4bHFyamZlcI+91ODeuaqluaibeGxxcmpmZXCPvdTg3r2qpamomnhscXJqZmVwj73U4N69qqWpqJt4bHFyamZlcI+91ODeuaqluaibeGxxcmpmZXCPvdTg3r2qpamomnhscXJqZmVwj73U4N69qqWpqJt4bHFyamZlcI+91ODeuaqluaibeGxxcmpmZXCPvdTg3r2qpamomnhscXJqZmVwj73U4N69qqWpqJt4bHFyamZlcI+91ODeuaqluaibeGxxcmpmZXCPvdTg3r2qpamomnhscXJqZmVwj73U4N69qqWpqJt4bHFyamZlcI+91ODeuaqluaibeGxxcmpmZXCPvdTg3r2qpamomnhscXJqZmVwj73U4N69qqWpqJt4bHFyamZlcI+91ODeuaqluaibeGxxcmpmZXCPvdTg3r2qpamomnhscXJqZmVwj73U4N69qqWpqJt4bHFyamZlcI+91ODeuaqluaibeGxxcmpmZXCPvdTg3r2qpamomnhscXJqZmVwj73U4N69qqWpqJt4bHFyamZlcI+91ODeuaqluaibeGxxcmpmZXCPvdTg3r2qpamomnhscXJqZmVwj73U4N69qqWpqJt4bHFyamZlcI+91ODeuaqluaibeGxxcmpmZXCPvdTg3r2qpamomnhscXJqZmVwj73U4N69qqWpqJt4bHFyamZlcI+91ODeuaqluaibeGxxcmpmZXCPvdTg3r2qpamomnhscXJqZmVwj73U');\r\n\r\nconst Todo = () => {\r\n  // 状态\r\n  const [todos, setTodos] = useState([]);\r\n  const [showModal, setShowModal] = useState(false);\r\n  const [modalMode, setModalMode] = useState('add'); // add, edit\r\n  const [editingItem, setEditingItem] = useState(null);\r\n  \r\n  // 初始化数据\r\n  useEffect(() => {\r\n    const savedTodos = getFromStorage('homepage-todos', []);\r\n    setTodos(savedTodos);\r\n    \r\n    // 设置通知检查定时器\r\n    const checkNotifications = () => {\r\n      const now = new Date();\r\n      \r\n      savedTodos.forEach(todo => {\r\n        if (todo.notification && !todo.completed) {\r\n          const notificationTime = new Date(todo.notification);\r\n          \r\n          // 如果当前时间在通知时间的前后1分钟内，且尚未通知过\r\n          if (Math.abs(now - notificationTime) < 60000 && !todo.notified) {\r\n            // 显示通知\r\n            if (Notification.permission === 'granted') {\r\n              new Notification('待办提醒', {\r\n                body: todo.name,\r\n                icon: '/icons/icon128.png'\r\n              });\r\n              \r\n              // 播放提示音\r\n              notificationSound.play();\r\n              \r\n              // 标记为已通知\r\n              const updatedTodos = savedTodos.map(item => {\r\n                if (item.id === todo.id) {\r\n                  return { ...item, notified: true };\r\n                }\r\n                return item;\r\n              });\r\n              \r\n              setTodos(updatedTodos);\r\n              saveToStorage('homepage-todos', updatedTodos);\r\n            }\r\n          }\r\n        }\r\n      });\r\n    };\r\n    \r\n    // 每分钟检查一次通知\r\n    const notificationInterval = setInterval(checkNotifications, 60000);\r\n    \r\n    // 请求通知权限\r\n    if (Notification.permission !== 'granted' && Notification.permission !== 'denied') {\r\n      Notification.requestPermission();\r\n    }\r\n    \r\n    return () => {\r\n      clearInterval(notificationInterval);\r\n    };\r\n  }, []);\r\n  \r\n  // 打开添加待办事项模态框\r\n  const openAddTodoModal = () => {\r\n    setModalMode('add');\r\n    setEditingItem(null);\r\n    setShowModal(true);\r\n  };\r\n  \r\n  // 打开编辑待办事项模态框\r\n  const openEditTodoModal = (todo) => {\r\n    setModalMode('edit');\r\n    setEditingItem(todo);\r\n    setShowModal(true);\r\n  };\r\n  \r\n  // 关闭模态框\r\n  const closeModal = () => {\r\n    setShowModal(false);\r\n  };\r\n  \r\n  // 保存待办事项\r\n  const saveTodo = (formData) => {\r\n    const newTodo = {\r\n      id: editingItem ? editingItem.id : Date.now(),\r\n      name: formData.name,\r\n      date: formData.date,\r\n      notification: formData.notification,\r\n      completed: formData.completed || false,\r\n      notified: false\r\n    };\r\n    \r\n    let updatedTodos;\r\n    \r\n    if (modalMode === 'edit') {\r\n      // 编辑现有待办事项\r\n      updatedTodos = todos.map(item => \r\n        item.id === editingItem.id ? newTodo : item\r\n      );\r\n    } else {\r\n      // 添加新待办事项\r\n      updatedTodos = [...todos, newTodo];\r\n    }\r\n    \r\n    setTodos(updatedTodos);\r\n    saveToStorage('homepage-todos', updatedTodos);\r\n    closeModal();\r\n  };\r\n  \r\n  // 删除待办事项\r\n  const deleteTodo = (id) => {\r\n    if (window.confirm('确定要删除这个待办事项吗？')) {\r\n      const updatedTodos = todos.filter(item => item.id !== id);\r\n      setTodos(updatedTodos);\r\n      saveToStorage('homepage-todos', updatedTodos);\r\n    }\r\n  };\r\n  \r\n  // 切换待办事项完成状态\r\n  const toggleTodoComplete = (id) => {\r\n    const updatedTodos = todos.map(todo => {\r\n      if (todo.id === id) {\r\n        return { ...todo, completed: !todo.completed };\r\n      }\r\n      return todo;\r\n    });\r\n    \r\n    setTodos(updatedTodos);\r\n    saveToStorage('homepage-todos', updatedTodos);\r\n  };\r\n  \r\n  // 按日期排序，未完成的在前，已完成的在后\r\n  const sortedTodos = [...todos].sort((a, b) => {\r\n    // 首先按完成状态排序\r\n    if (a.completed !== b.completed) {\r\n      return a.completed ? 1 : -1;\r\n    }\r\n    \r\n    // 然后按日期排序\r\n    return new Date(a.date) - new Date(b.date);\r\n  });\r\n  \r\n  return (\r\n    <TodoContainer>\r\n      <TodoHeader>\r\n        <TodoTitle>待办事项</TodoTitle>\r\n        <ActionButton onClick={openAddTodoModal} title=\"添加待办事项\">\r\n          <AddIcon />\r\n        </ActionButton>\r\n      </TodoHeader>\r\n      \r\n      <TodoList>\r\n        {sortedTodos.map(todo => (\r\n          <TodoItem \r\n            key={todo.id}\r\n            todo={todo}\r\n            onToggleComplete={toggleTodoComplete}\r\n            onEdit={openEditTodoModal}\r\n            onDelete={deleteTodo}\r\n          />\r\n        ))}\r\n        \r\n        {todos.length === 0 && (\r\n          <EmptyState>\r\n            <p>暂无待办事项，点击右上角添加</p>\r\n          </EmptyState>\r\n        )}\r\n      </TodoList>\r\n      \r\n      <TodoModal \r\n        isOpen={showModal}\r\n        onClose={closeModal}\r\n        onSave={saveTodo}\r\n        todo={editingItem}\r\n      />\r\n    </TodoContainer>\r\n  );\r\n};\r\n\r\nexport default Todo;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}