{"ast":null,"code":"/**\r\n * åº”ç”¨å¯åŠ¨ç®¡ç†å™¨\r\n * å¤„ç†åº”ç”¨åˆå§‹åŒ–ã€è®¾ç½®åŠ è½½å’Œå»¶è¿Ÿæ˜¾ç¤º\r\n */import configManager from'./simpleConfigManager';import backgroundManager from'./backgroundManager';class AppInitializer{constructor(){this.isInitialized=false;this.initPromise=null;this.settings={};}/**\r\n   * åˆå§‹åŒ–åº”ç”¨\r\n   * @param {Object} options åˆå§‹åŒ–é€‰é¡¹\r\n   * @returns {Promise<Object>} åˆå§‹åŒ–ç»“æœ\r\n   */async initialize(){let options=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};if(this.initPromise){return this.initPromise;}this.initPromise=this._performInitialization(options);return this.initPromise;}/**\r\n   * æ‰§è¡Œåˆå§‹åŒ–è¿‡ç¨‹\r\n   * @private\r\n   */async _performInitialization(options){try{const{delay=150,// å»¶è¿Ÿæ—¶é—´ï¼Œé¿å…é—ªçƒ\nshowLoadingScreen=true}=options;console.log('ğŸš€ å¼€å§‹åº”ç”¨åˆå§‹åŒ–...');// æ˜¾ç¤ºåŠ è½½å±å¹•\nif(showLoadingScreen){this._showLoadingScreen();}// é¢„å…ˆåº”ç”¨åŸºç¡€æ ·å¼ï¼Œé¿å…é—ªçƒ\nthis._applyBaseStyles();// å»¶è¿Ÿåˆå§‹åŒ–ï¼Œé¿å…é—ªçƒ\nif(delay>0){await new Promise(resolve=>setTimeout(resolve,delay));}// åˆå§‹åŒ–é…ç½®ç®¡ç†å™¨\nconsole.log('ğŸ“ åˆå§‹åŒ–é…ç½®ç®¡ç†å™¨...');await configManager.initialize();// åŠ è½½è®¾ç½®\nconsole.log('âš™ï¸ åŠ è½½ç”¨æˆ·è®¾ç½®...');this.settings=configManager.get('settings',{});console.log('ğŸ“‹ å·²åŠ è½½è®¾ç½®é¡¹:',Object.keys(this.settings).length);// åº”ç”¨åŸºç¡€è®¾ç½®\nthis._applyBaseSettings(this.settings);// ç¡®å®šå¯åŠ¨æ¨¡å—\nconst startupModule=this._determineStartupModule(this.settings);console.log('ğŸ“± ç¡®å®šå¯åŠ¨æ¨¡å—:',startupModule);// åº”ç”¨å®Œæ•´è®¾ç½®\nconsole.log('ğŸ¨ åº”ç”¨å®Œæ•´è®¾ç½®...');this._applyFullSettings(this.settings);// éšè—åŠ è½½å±å¹•\nif(showLoadingScreen){this._hideLoadingScreen();}this.isInitialized=true;console.log('âœ… åº”ç”¨åˆå§‹åŒ–å®Œæˆ');return{success:true,settings:this.settings,startupModule,message:'åº”ç”¨åˆå§‹åŒ–æˆåŠŸ'};}catch(error){console.error('âŒ åº”ç”¨åˆå§‹åŒ–å¤±è´¥:',error);// éšè—åŠ è½½å±å¹•\nthis._hideLoadingScreen();// åº”ç”¨é»˜è®¤è®¾ç½®ï¼Œç¡®ä¿åº”ç”¨å¯ç”¨\nthis._applyDefaultSettings();return{success:false,error,settings:{},startupModule:'quote',message:'åº”ç”¨åˆå§‹åŒ–å¤±è´¥ï¼Œä½¿ç”¨é»˜è®¤è®¾ç½®'};}}/**\r\n   * ç¡®å®šå¯åŠ¨æ¨¡å—\r\n   * @private\r\n   */_determineStartupModule(settings){const moduleComponents=['calendar','bookmark','todo','note','quote','news'];let startupModule='quote';// é»˜è®¤ä¸ºä¸€è¯­\nif(settings.startupModuleType==='last'){// ç»§æ‰¿ä¸Šæ¬¡ä½¿ç”¨çš„æ¨¡å—\nconst lastModule=configManager.get('data.lastActiveModule','quote');startupModule=lastModule;}else if(settings.startupModuleType==='specific'){// ä½¿ç”¨æŒ‡å®šçš„æ¨¡å—\nstartupModule=settings.startupModule||'quote';}else{// å¦‚æœæ²¡æœ‰è®¾ç½®ï¼Œæ£€æŸ¥æ˜¯å¦æœ‰ä¸Šæ¬¡ä½¿ç”¨çš„æ¨¡å—\nconst lastModule=configManager.get('data.lastActiveModule',null);if(lastModule){startupModule=lastModule;}}// éªŒè¯æ¨¡å—æ˜¯å¦å­˜åœ¨\nif(!moduleComponents.includes(startupModule)){startupModule='quote';}return startupModule;}/**\r\n   * åº”ç”¨åŸºç¡€æ ·å¼ï¼ˆåœ¨é…ç½®åŠ è½½å‰ï¼‰\r\n   * @private\r\n   */_applyBaseStyles(){const root=document.documentElement;// è®¾ç½®é¡µé¢æ ‡é¢˜\ndocument.title='æ™‚';// åº”ç”¨åŸºç¡€CSSå˜é‡\nroot.style.setProperty('--primary-color','#4a90e2');root.style.setProperty('--transition-speed','0.3s');// ç¡®ä¿åŸºç¡€å˜é‡å­˜åœ¨\nroot.style.setProperty('--background-color','#ffffff');root.style.setProperty('--card-background','#f8f8f8');root.style.setProperty('--border-color','#e0e0e0');root.style.setProperty('--text-color','#333333');root.style.setProperty('--text-secondary-color','#666666');root.style.setProperty('--hover-background','#f0f0f0');}/**\r\n   * åº”ç”¨åŸºç¡€è®¾ç½®\r\n   * @private\r\n   */_applyBaseSettings(settings){const root=document.documentElement;// åº”ç”¨ç”¨æˆ·è‡ªå®šä¹‰çš„åŸºç¡€CSSå˜é‡\nroot.style.setProperty('--primary-color',settings.linkColor||'#4a90e2');// é¢„è®¾ä¸»é¢˜å˜é‡ï¼Œé¿å…é—ªçƒ\nif(settings.theme==='dark'){document.body.classList.add('dark-mode');}else{document.body.classList.remove('dark-mode');}}/**\r\n   * åº”ç”¨é»˜è®¤è®¾ç½®ï¼ˆåˆå§‹åŒ–å¤±è´¥æ—¶ä½¿ç”¨ï¼‰\r\n   * @private\r\n   */_applyDefaultSettings(){const root=document.documentElement;// è®¾ç½®é¡µé¢æ ‡é¢˜\ndocument.title='æ™‚';// åº”ç”¨é»˜è®¤ä¸»é¢˜\nroot.style.setProperty('--background-color','#ffffff');root.style.setProperty('--card-background','#f8f8f8');root.style.setProperty('--border-color','#e0e0e0');root.style.setProperty('--text-color','#333333');root.style.setProperty('--text-secondary-color','#666666');root.style.setProperty('--hover-background','#f0f0f0');root.style.setProperty('--primary-color','#4a90e2');document.body.classList.remove('dark-mode');console.log('ğŸ”§ å·²åº”ç”¨é»˜è®¤è®¾ç½®');}/**\r\n   * åº”ç”¨å®Œæ•´è®¾ç½®\r\n   * @private\r\n   */_applyFullSettings(settings){try{const root=document.documentElement;const body=document.body;// åº”ç”¨ä¸»é¢˜\nconst theme=settings.theme||'light';if(theme==='dark'){root.style.setProperty('--background-color','#121212');root.style.setProperty('--card-background','#1e1e1e');root.style.setProperty('--border-color','#333333');root.style.setProperty('--text-color',settings.textColor||'#e0e0e0');root.style.setProperty('--text-secondary-color','#a0a0a0');root.style.setProperty('--hover-background','#333333');root.style.setProperty('--primary-color-light','rgba(74, 144, 226, 0.2)');body.classList.add('dark-mode');}else{root.style.setProperty('--background-color','#ffffff');root.style.setProperty('--card-background','#f8f8f8');root.style.setProperty('--border-color','#e0e0e0');root.style.setProperty('--text-color',settings.textColor||'#333333');root.style.setProperty('--text-secondary-color','#666666');root.style.setProperty('--hover-background','#f0f0f0');root.style.setProperty('--primary-color-light','rgba(74, 144, 226, 0.1)');body.classList.remove('dark-mode');}// åº”ç”¨å­—ä½“è®¾ç½®\nif(settings.fontFamily){root.style.setProperty('--font-family',settings.fontFamily);}// ä½¿ç”¨èƒŒæ™¯ç®¡ç†å™¨åº”ç”¨èƒŒæ™¯è®¾ç½®\nbackgroundManager.applySettings(settings);}catch(error){console.error('åº”ç”¨å®Œæ•´è®¾ç½®æ—¶å‡ºé”™:',error);}}/**\r\n   * æ˜¾ç¤ºåŠ è½½å±å¹•\r\n   * @private\r\n   */_showLoadingScreen(){// æ£€æŸ¥æ˜¯å¦å·²å­˜åœ¨åŠ è½½å±å¹•\nif(document.getElementById('app-loading-screen')){return;}const loadingScreen=document.createElement('div');loadingScreen.id='app-loading-screen';loadingScreen.innerHTML=`\n      <div style=\"\n        position: fixed;\n        top: 0;\n        left: 0;\n        width: 100vw;\n        height: 100vh;\n        background: var(--background-color, #ffffff);\n        display: flex;\n        flex-direction: column;\n        align-items: center;\n        justify-content: center;\n        z-index: 9999;\n        transition: opacity 0.3s ease;\n      \">\n        <div style=\"\n          width: 60px;\n          height: 60px;\n          border: 3px solid var(--border-color, #e0e0e0);\n          border-top: 3px solid var(--primary-color, #4a90e2);\n          border-radius: 50%;\n          animation: spin 1s linear infinite;\n          margin-bottom: 20px;\n        \"></div>\n        <div style=\"\n          font-size: 18px;\n          font-weight: 500;\n          color: var(--text-color, #333333);\n          margin-bottom: 8px;\n        \">æ­£åœ¨åŠ è½½...</div>\n        <div style=\"\n          font-size: 14px;\n          color: var(--text-secondary-color, #666666);\n        \">è¯·ç¨å€™ï¼Œæ­£åœ¨åˆå§‹åŒ–åº”ç”¨ç¨‹åº</div>\n      </div>\n      <style>\n        @keyframes spin {\n          0% { transform: rotate(0deg); }\n          100% { transform: rotate(360deg); }\n        }\n      </style>\n    `;document.body.appendChild(loadingScreen);}/**\r\n   * éšè—åŠ è½½å±å¹•\r\n   * @private\r\n   */_hideLoadingScreen(){const loadingScreen=document.getElementById('app-loading-screen');if(loadingScreen){loadingScreen.style.opacity='0';setTimeout(()=>{if(loadingScreen.parentNode){loadingScreen.parentNode.removeChild(loadingScreen);}},300);}}/**\r\n   * è·å–å½“å‰è®¾ç½®\r\n   */getSettings(){return this.settings;}/**\r\n   * æ›´æ–°è®¾ç½®\r\n   */updateSettings(newSettings){this.settings={...this.settings,...newSettings};this._applyFullSettings(this.settings);}/**\r\n   * é‡ç½®åˆå§‹åŒ–çŠ¶æ€\r\n   */reset(){this.isInitialized=false;this.initPromise=null;this.settings={};}}// åˆ›å»ºå•ä¾‹å®ä¾‹\nconst appInitializer=new AppInitializer();export default appInitializer;","map":{"version":3,"names":["configManager","backgroundManager","AppInitializer","constructor","isInitialized","initPromise","settings","initialize","options","arguments","length","undefined","_performInitialization","delay","showLoadingScreen","console","log","_showLoadingScreen","_applyBaseStyles","Promise","resolve","setTimeout","get","Object","keys","_applyBaseSettings","startupModule","_determineStartupModule","_applyFullSettings","_hideLoadingScreen","success","message","error","_applyDefaultSettings","moduleComponents","startupModuleType","lastModule","includes","root","document","documentElement","title","style","setProperty","linkColor","theme","body","classList","add","remove","textColor","fontFamily","applySettings","getElementById","loadingScreen","createElement","id","innerHTML","appendChild","opacity","parentNode","removeChild","getSettings","updateSettings","newSettings","reset","appInitializer"],"sources":["D:/Jliu Pureey/Documents/Editor/extion/homepage/src/utils/appInitializer.js"],"sourcesContent":["/**\r\n * åº”ç”¨å¯åŠ¨ç®¡ç†å™¨\r\n * å¤„ç†åº”ç”¨åˆå§‹åŒ–ã€è®¾ç½®åŠ è½½å’Œå»¶è¿Ÿæ˜¾ç¤º\r\n */\r\n\r\nimport configManager from './simpleConfigManager';\r\nimport backgroundManager from './backgroundManager';\r\n\r\nclass AppInitializer {\r\n  constructor() {\r\n    this.isInitialized = false;\r\n    this.initPromise = null;\r\n    this.settings = {};\r\n  }\r\n\r\n  /**\r\n   * åˆå§‹åŒ–åº”ç”¨\r\n   * @param {Object} options åˆå§‹åŒ–é€‰é¡¹\r\n   * @returns {Promise<Object>} åˆå§‹åŒ–ç»“æœ\r\n   */\r\n  async initialize(options = {}) {\r\n    if (this.initPromise) {\r\n      return this.initPromise;\r\n    }\r\n\r\n    this.initPromise = this._performInitialization(options);\r\n    return this.initPromise;\r\n  }\r\n\r\n  /**\r\n   * æ‰§è¡Œåˆå§‹åŒ–è¿‡ç¨‹\r\n   * @private\r\n   */\r\n  async _performInitialization(options) {\r\n    try {\r\n      const { \r\n        delay = 150, // å»¶è¿Ÿæ—¶é—´ï¼Œé¿å…é—ªçƒ\r\n        showLoadingScreen = true \r\n      } = options;\r\n\r\n      console.log('ğŸš€ å¼€å§‹åº”ç”¨åˆå§‹åŒ–...');\r\n\r\n      // æ˜¾ç¤ºåŠ è½½å±å¹•\r\n      if (showLoadingScreen) {\r\n        this._showLoadingScreen();\r\n      }\r\n\r\n      // é¢„å…ˆåº”ç”¨åŸºç¡€æ ·å¼ï¼Œé¿å…é—ªçƒ\r\n      this._applyBaseStyles();\r\n\r\n      // å»¶è¿Ÿåˆå§‹åŒ–ï¼Œé¿å…é—ªçƒ\r\n      if (delay > 0) {\r\n        await new Promise(resolve => setTimeout(resolve, delay));\r\n      }\r\n\r\n      // åˆå§‹åŒ–é…ç½®ç®¡ç†å™¨\r\n      console.log('ğŸ“ åˆå§‹åŒ–é…ç½®ç®¡ç†å™¨...');\r\n      await configManager.initialize();\r\n\r\n      // åŠ è½½è®¾ç½®\r\n      console.log('âš™ï¸ åŠ è½½ç”¨æˆ·è®¾ç½®...');\r\n      this.settings = configManager.get('settings', {});\r\n      console.log('ğŸ“‹ å·²åŠ è½½è®¾ç½®é¡¹:', Object.keys(this.settings).length);\r\n\r\n      // åº”ç”¨åŸºç¡€è®¾ç½®\r\n      this._applyBaseSettings(this.settings);\r\n\r\n      // ç¡®å®šå¯åŠ¨æ¨¡å—\r\n      const startupModule = this._determineStartupModule(this.settings);\r\n      console.log('ğŸ“± ç¡®å®šå¯åŠ¨æ¨¡å—:', startupModule);\r\n\r\n      // åº”ç”¨å®Œæ•´è®¾ç½®\r\n      console.log('ğŸ¨ åº”ç”¨å®Œæ•´è®¾ç½®...');\r\n      this._applyFullSettings(this.settings);\r\n\r\n      // éšè—åŠ è½½å±å¹•\r\n      if (showLoadingScreen) {\r\n        this._hideLoadingScreen();\r\n      }\r\n\r\n      this.isInitialized = true;\r\n      console.log('âœ… åº”ç”¨åˆå§‹åŒ–å®Œæˆ');\r\n\r\n      return {\r\n        success: true,\r\n        settings: this.settings,\r\n        startupModule,\r\n        message: 'åº”ç”¨åˆå§‹åŒ–æˆåŠŸ'\r\n      };\r\n\r\n    } catch (error) {\r\n      console.error('âŒ åº”ç”¨åˆå§‹åŒ–å¤±è´¥:', error);\r\n      \r\n      // éšè—åŠ è½½å±å¹•\r\n      this._hideLoadingScreen();\r\n\r\n      // åº”ç”¨é»˜è®¤è®¾ç½®ï¼Œç¡®ä¿åº”ç”¨å¯ç”¨\r\n      this._applyDefaultSettings();\r\n\r\n      return {\r\n        success: false,\r\n        error,\r\n        settings: {},\r\n        startupModule: 'quote',\r\n        message: 'åº”ç”¨åˆå§‹åŒ–å¤±è´¥ï¼Œä½¿ç”¨é»˜è®¤è®¾ç½®'\r\n      };\r\n    }\r\n  }\r\n\r\n  /**\r\n   * ç¡®å®šå¯åŠ¨æ¨¡å—\r\n   * @private\r\n   */\r\n  _determineStartupModule(settings) {\r\n    const moduleComponents = ['calendar', 'bookmark', 'todo', 'note', 'quote', 'news'];\r\n    let startupModule = 'quote'; // é»˜è®¤ä¸ºä¸€è¯­\r\n\r\n    if (settings.startupModuleType === 'last') {\r\n      // ç»§æ‰¿ä¸Šæ¬¡ä½¿ç”¨çš„æ¨¡å—\r\n      const lastModule = configManager.get('data.lastActiveModule', 'quote');\r\n      startupModule = lastModule;\r\n    } else if (settings.startupModuleType === 'specific') {\r\n      // ä½¿ç”¨æŒ‡å®šçš„æ¨¡å—\r\n      startupModule = settings.startupModule || 'quote';\r\n    } else {\r\n      // å¦‚æœæ²¡æœ‰è®¾ç½®ï¼Œæ£€æŸ¥æ˜¯å¦æœ‰ä¸Šæ¬¡ä½¿ç”¨çš„æ¨¡å—\r\n      const lastModule = configManager.get('data.lastActiveModule', null);\r\n      if (lastModule) {\r\n        startupModule = lastModule;\r\n      }\r\n    }\r\n\r\n    // éªŒè¯æ¨¡å—æ˜¯å¦å­˜åœ¨\r\n    if (!moduleComponents.includes(startupModule)) {\r\n      startupModule = 'quote';\r\n    }\r\n\r\n    return startupModule;\r\n  }\r\n\r\n  /**\r\n   * åº”ç”¨åŸºç¡€æ ·å¼ï¼ˆåœ¨é…ç½®åŠ è½½å‰ï¼‰\r\n   * @private\r\n   */\r\n  _applyBaseStyles() {\r\n    const root = document.documentElement;\r\n    \r\n    // è®¾ç½®é¡µé¢æ ‡é¢˜\r\n    document.title = 'æ™‚';\r\n    \r\n    // åº”ç”¨åŸºç¡€CSSå˜é‡\r\n    root.style.setProperty('--primary-color', '#4a90e2');\r\n    root.style.setProperty('--transition-speed', '0.3s');\r\n    \r\n    // ç¡®ä¿åŸºç¡€å˜é‡å­˜åœ¨\r\n    root.style.setProperty('--background-color', '#ffffff');\r\n    root.style.setProperty('--card-background', '#f8f8f8');\r\n    root.style.setProperty('--border-color', '#e0e0e0');\r\n    root.style.setProperty('--text-color', '#333333');\r\n    root.style.setProperty('--text-secondary-color', '#666666');\r\n    root.style.setProperty('--hover-background', '#f0f0f0');\r\n  }\r\n\r\n  /**\r\n   * åº”ç”¨åŸºç¡€è®¾ç½®\r\n   * @private\r\n   */\r\n  _applyBaseSettings(settings) {\r\n    const root = document.documentElement;\r\n    \r\n    // åº”ç”¨ç”¨æˆ·è‡ªå®šä¹‰çš„åŸºç¡€CSSå˜é‡\r\n    root.style.setProperty('--primary-color', settings.linkColor || '#4a90e2');\r\n    \r\n    // é¢„è®¾ä¸»é¢˜å˜é‡ï¼Œé¿å…é—ªçƒ\r\n    if (settings.theme === 'dark') {\r\n      document.body.classList.add('dark-mode');\r\n    } else {\r\n      document.body.classList.remove('dark-mode');\r\n    }\r\n  }\r\n\r\n  /**\r\n   * åº”ç”¨é»˜è®¤è®¾ç½®ï¼ˆåˆå§‹åŒ–å¤±è´¥æ—¶ä½¿ç”¨ï¼‰\r\n   * @private\r\n   */\r\n  _applyDefaultSettings() {\r\n    const root = document.documentElement;\r\n    \r\n    // è®¾ç½®é¡µé¢æ ‡é¢˜\r\n    document.title = 'æ™‚';\r\n    \r\n    // åº”ç”¨é»˜è®¤ä¸»é¢˜\r\n    root.style.setProperty('--background-color', '#ffffff');\r\n    root.style.setProperty('--card-background', '#f8f8f8');\r\n    root.style.setProperty('--border-color', '#e0e0e0');\r\n    root.style.setProperty('--text-color', '#333333');\r\n    root.style.setProperty('--text-secondary-color', '#666666');\r\n    root.style.setProperty('--hover-background', '#f0f0f0');\r\n    root.style.setProperty('--primary-color', '#4a90e2');\r\n    \r\n    document.body.classList.remove('dark-mode');\r\n    \r\n    console.log('ğŸ”§ å·²åº”ç”¨é»˜è®¤è®¾ç½®');\r\n  }\r\n\r\n  /**\r\n   * åº”ç”¨å®Œæ•´è®¾ç½®\r\n   * @private\r\n   */\r\n  _applyFullSettings(settings) {\r\n    try {\r\n      const root = document.documentElement;\r\n      const body = document.body;\r\n      \r\n      // åº”ç”¨ä¸»é¢˜\r\n      const theme = settings.theme || 'light';\r\n      if (theme === 'dark') {\r\n        root.style.setProperty('--background-color', '#121212');\r\n        root.style.setProperty('--card-background', '#1e1e1e');\r\n        root.style.setProperty('--border-color', '#333333');\r\n        root.style.setProperty('--text-color', settings.textColor || '#e0e0e0');\r\n        root.style.setProperty('--text-secondary-color', '#a0a0a0');\r\n        root.style.setProperty('--hover-background', '#333333');\r\n        root.style.setProperty('--primary-color-light', 'rgba(74, 144, 226, 0.2)');\r\n        body.classList.add('dark-mode');\r\n      } else {\r\n        root.style.setProperty('--background-color', '#ffffff');\r\n        root.style.setProperty('--card-background', '#f8f8f8');\r\n        root.style.setProperty('--border-color', '#e0e0e0');\r\n        root.style.setProperty('--text-color', settings.textColor || '#333333');\r\n        root.style.setProperty('--text-secondary-color', '#666666');\r\n        root.style.setProperty('--hover-background', '#f0f0f0');\r\n        root.style.setProperty('--primary-color-light', 'rgba(74, 144, 226, 0.1)');\r\n        body.classList.remove('dark-mode');\r\n      }\r\n      \r\n      // åº”ç”¨å­—ä½“è®¾ç½®\r\n      if (settings.fontFamily) {\r\n        root.style.setProperty('--font-family', settings.fontFamily);\r\n      }\r\n      \r\n      // ä½¿ç”¨èƒŒæ™¯ç®¡ç†å™¨åº”ç”¨èƒŒæ™¯è®¾ç½®\r\n      backgroundManager.applySettings(settings);\r\n      \r\n    } catch (error) {\r\n      console.error('åº”ç”¨å®Œæ•´è®¾ç½®æ—¶å‡ºé”™:', error);\r\n    }\r\n  }\r\n\r\n  /**\r\n   * æ˜¾ç¤ºåŠ è½½å±å¹•\r\n   * @private\r\n   */\r\n  _showLoadingScreen() {\r\n    // æ£€æŸ¥æ˜¯å¦å·²å­˜åœ¨åŠ è½½å±å¹•\r\n    if (document.getElementById('app-loading-screen')) {\r\n      return;\r\n    }\r\n\r\n    const loadingScreen = document.createElement('div');\r\n    loadingScreen.id = 'app-loading-screen';\r\n    loadingScreen.innerHTML = `\r\n      <div style=\"\r\n        position: fixed;\r\n        top: 0;\r\n        left: 0;\r\n        width: 100vw;\r\n        height: 100vh;\r\n        background: var(--background-color, #ffffff);\r\n        display: flex;\r\n        flex-direction: column;\r\n        align-items: center;\r\n        justify-content: center;\r\n        z-index: 9999;\r\n        transition: opacity 0.3s ease;\r\n      \">\r\n        <div style=\"\r\n          width: 60px;\r\n          height: 60px;\r\n          border: 3px solid var(--border-color, #e0e0e0);\r\n          border-top: 3px solid var(--primary-color, #4a90e2);\r\n          border-radius: 50%;\r\n          animation: spin 1s linear infinite;\r\n          margin-bottom: 20px;\r\n        \"></div>\r\n        <div style=\"\r\n          font-size: 18px;\r\n          font-weight: 500;\r\n          color: var(--text-color, #333333);\r\n          margin-bottom: 8px;\r\n        \">æ­£åœ¨åŠ è½½...</div>\r\n        <div style=\"\r\n          font-size: 14px;\r\n          color: var(--text-secondary-color, #666666);\r\n        \">è¯·ç¨å€™ï¼Œæ­£åœ¨åˆå§‹åŒ–åº”ç”¨ç¨‹åº</div>\r\n      </div>\r\n      <style>\r\n        @keyframes spin {\r\n          0% { transform: rotate(0deg); }\r\n          100% { transform: rotate(360deg); }\r\n        }\r\n      </style>\r\n    `;\r\n\r\n    document.body.appendChild(loadingScreen);\r\n  }\r\n\r\n  /**\r\n   * éšè—åŠ è½½å±å¹•\r\n   * @private\r\n   */\r\n  _hideLoadingScreen() {\r\n    const loadingScreen = document.getElementById('app-loading-screen');\r\n    if (loadingScreen) {\r\n      loadingScreen.style.opacity = '0';\r\n      setTimeout(() => {\r\n        if (loadingScreen.parentNode) {\r\n          loadingScreen.parentNode.removeChild(loadingScreen);\r\n        }\r\n      }, 300);\r\n    }\r\n  }\r\n\r\n  /**\r\n   * è·å–å½“å‰è®¾ç½®\r\n   */\r\n  getSettings() {\r\n    return this.settings;\r\n  }\r\n\r\n  /**\r\n   * æ›´æ–°è®¾ç½®\r\n   */\r\n  updateSettings(newSettings) {\r\n    this.settings = { ...this.settings, ...newSettings };\r\n    this._applyFullSettings(this.settings);\r\n  }\r\n\r\n  /**\r\n   * é‡ç½®åˆå§‹åŒ–çŠ¶æ€\r\n   */\r\n  reset() {\r\n    this.isInitialized = false;\r\n    this.initPromise = null;\r\n    this.settings = {};\r\n  }\r\n}\r\n\r\n// åˆ›å»ºå•ä¾‹å®ä¾‹\r\nconst appInitializer = new AppInitializer();\r\n\r\nexport default appInitializer;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}