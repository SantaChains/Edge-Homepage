{"ast":null,"code":"import React,{useState,useEffect,useCallback}from'react';import styled from'styled-components';import{SettingsProvider}from'./contexts/SettingsContext';import{ThemeProvider}from'./contexts/ThemeContext';import configManager from'./utils/simpleConfigManager';import{getFromStorage,saveToStorage}from'./utils/storage';// 组件导入\nimport Header from'./components/Header/Header';import Search from'./components/Search/Search';import ModuleSwitch from'./components/ModuleSwitch/ModuleSwitch';import SettingsPanel from'./settings/SettingsPanel';import Loading from'./components/Loading/Loading';// 模块导入\nimport Calendar from'./modules/Calendar/Calendar';import Bookmark from'./modules/Bookmark/Bookmark';import Todo from'./modules/Todo/Todo';import Note from'./modules/Note/Note';import Quote from'./modules/Quote/Quote';import News from'./modules/News/News';// 模式导入\nimport ZenMode from'./modes/ZenMode/ZenMode';import CurtainMode from'./modes/CurtainMode/CurtainMode';import{jsxs as _jsxs,jsx as _jsx}from\"react/jsx-runtime\";const AppContainer=styled.div`\n  min-height: 100vh;\n  background: var(--background-color, #ffffff);\n  color: var(--text-color, #333333);\n  font-family: var(--font-family, 'Microsoft YaHei', sans-serif);\n  transition: all 0.3s ease;\n  position: relative;\n  overflow-x: hidden;\n`;const MainContent=styled.main`\n  padding: 20px;\n  max-width: 1200px;\n  margin: 0 auto;\n  min-height: calc(100vh - 80px);\n  display: flex;\n  flex-direction: column;\n  gap: 20px;\n`;const ErrorContainer=styled.div`\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  min-height: 100vh;\n  background: var(--background-color, #ffffff);\n  color: var(--text-color, #333333);\n  text-align: center;\n  padding: 20px;\n`;const ErrorContent=styled.div`\n  max-width: 500px;\n  \n  h2 {\n    color: #e74c3c;\n    margin-bottom: 15px;\n  }\n  \n  p {\n    margin-bottom: 20px;\n    line-height: 1.6;\n  }\n  \n  button {\n    background: var(--primary-color, #4a90e2);\n    color: white;\n    border: none;\n    padding: 10px 20px;\n    border-radius: 5px;\n    cursor: pointer;\n    font-size: 16px;\n    \n    &:hover {\n      opacity: 0.9;\n    }\n  }\n`;// 模块映射\nconst moduleComponents={calendar:Calendar,bookmark:Bookmark,todo:Todo,note:Note,quote:Quote,news:News};function App(){const[currentModule,setCurrentModule]=useState('quote');const[isSettingsOpen,setIsSettingsOpen]=useState(false);const[currentMode,setCurrentMode]=useState('normal');const[isInitialized,setIsInitialized]=useState(false);const[error,setError]=useState(null);const[isLoading,setIsLoading]=useState(true);// 错误边界处理\nconst handleError=useCallback((error,errorInfo)=>{console.error('应用错误:',error,errorInfo);setError(error);},[]);// 应用完整设置\nconst applyFullSettings=useCallback(settings=>{try{const root=document.documentElement;const body=document.body;// 设置页面标题\ndocument.title='時';// 应用基础CSS变量\nroot.style.setProperty('--primary-color',settings.linkColor||'#4a90e2');root.style.setProperty('--transition-speed','0.3s');// 应用主题\nconst theme=settings.theme||'light';if(theme==='dark'){root.style.setProperty('--background-color','#121212');root.style.setProperty('--card-background','#1e1e1e');root.style.setProperty('--border-color','#333333');root.style.setProperty('--text-color',settings.textColor||'#e0e0e0');root.style.setProperty('--text-secondary-color','#a0a0a0');root.style.setProperty('--primary-color-light','rgba(74, 144, 226, 0.2)');body.classList.add('dark-mode');}else{root.style.setProperty('--background-color','#ffffff');root.style.setProperty('--card-background','#f8f8f8');root.style.setProperty('--border-color','#e0e0e0');root.style.setProperty('--text-color',settings.textColor||'#333333');root.style.setProperty('--text-secondary-color','#666666');root.style.setProperty('--primary-color-light','rgba(74, 144, 226, 0.1)');body.classList.remove('dark-mode');}// 应用字体设置\nif(settings.fontFamily){root.style.setProperty('--font-family',settings.fontFamily);}// 应用背景设置 - 简化版本，避免复杂的DOM操作\nif(settings.showBackground!==false){if(settings.backgroundType==='color'&&settings.backgroundColor){body.style.background=settings.backgroundColor;body.style.backgroundImage='none';}else if(settings.backgroundType==='image'&&settings.backgroundImage){body.style.backgroundImage=`url(\"${settings.backgroundImage}\")`;body.style.backgroundSize=settings.backgroundFit||'cover';body.style.backgroundPosition='center';body.style.backgroundRepeat='no-repeat';body.style.backgroundAttachment='fixed';}else if(settings.backgroundType==='gradient'&&settings.gradientColors){const{gradientType='linear',gradientDirection='to right',gradientColors,gradientStops=[0,100]}=settings;if(gradientColors&&gradientColors.length>=2){const gradient=`${gradientType}-gradient(${gradientDirection}, ${gradientColors[0]} ${gradientStops[0]}%, ${gradientColors[1]} ${gradientStops[1]}%)`;body.style.background=gradient;body.style.backgroundImage='none';}}// 应用背景效果\nbody.style.opacity=settings.backgroundOpacity!==undefined?settings.backgroundOpacity:1;const filters=[];if(settings.backgroundBrightness!==undefined&&settings.backgroundBrightness!==1){filters.push(`brightness(${settings.backgroundBrightness})`);}if(settings.backgroundBlur!==undefined&&settings.backgroundBlur>0){filters.push(`blur(${settings.backgroundBlur}px)`);}if(filters.length>0){body.style.filter=filters.join(' ');}}else{body.style.background=theme==='dark'?'#121212':'#ffffff';body.style.backgroundImage='none';body.style.opacity=1;body.style.filter='none';}}catch(error){console.error('应用设置时出错:',error);}},[]);// 初始化应用\nuseEffect(()=>{const initializeApp=async()=>{try{setIsLoading(true);// 设置页面标题\ndocument.title='時';// 延迟初始化以避免闪烁\nawait new Promise(resolve=>setTimeout(resolve,100));// 初始化配置管理器\nawait configManager.initialize();// 获取保存的设置\nconst savedSettings=configManager.get('settings',{});// 确定启动模块\nlet startupModule='quote';// 默认为一语\nif(savedSettings.startupModuleType==='last'){// 继承上次使用的模块\nconst lastModule=configManager.get('data.lastActiveModule','quote');startupModule=lastModule;}else if(savedSettings.startupModuleType==='specific'){// 使用指定的模块\nstartupModule=savedSettings.startupModule||'quote';}else{// 如果没有设置，检查是否有上次使用的模块\nconst lastModule=configManager.get('data.lastActiveModule',null);if(lastModule){startupModule=lastModule;}}// 验证模块是否存在\nif(!moduleComponents[startupModule]){startupModule='quote';}setCurrentModule(startupModule);// 应用完整设置\napplyFullSettings(savedSettings);console.log('应用初始化完成，启动模块:',startupModule);setIsInitialized(true);}catch(error){console.error('初始化应用时出错:',error);handleError(error);}finally{setIsLoading(false);}};initializeApp();},[handleError,applyFullSettings]);// 处理模块切换\nconst handleModuleChange=useCallback(module=>{try{if(moduleComponents[module]){setCurrentModule(module);// 保存当前模块为上次使用的模块\nconfigManager.set('data.lastActiveModule',module);}}catch(error){console.error('切换模块时出错:',error);handleError(error);}},[handleError]);// 处理模式切换\nconst handleModeChange=useCallback(mode=>{try{setCurrentMode(mode);}catch(error){console.error('切换模式时出错:',error);handleError(error);}},[handleError]);// 渲染当前模块\nconst renderCurrentModule=useCallback(()=>{try{const ModuleComponent=moduleComponents[currentModule];if(!ModuleComponent){return/*#__PURE__*/_jsxs(\"div\",{children:[\"\\u6A21\\u5757\\u4E0D\\u5B58\\u5728: \",currentModule]});}return/*#__PURE__*/_jsx(ModuleComponent,{});}catch(error){console.error('渲染模块时出错:',error);return/*#__PURE__*/_jsx(\"div\",{children:\"\\u6A21\\u5757\\u52A0\\u8F7D\\u5931\\u8D25\\uFF0C\\u8BF7\\u5237\\u65B0\\u9875\\u9762\\u91CD\\u8BD5\"});}},[currentModule]);// 错误状态\nif(error){return/*#__PURE__*/_jsx(ErrorContainer,{children:/*#__PURE__*/_jsxs(ErrorContent,{children:[/*#__PURE__*/_jsx(\"h2\",{children:\"\\u5E94\\u7528\\u51FA\\u73B0\\u9519\\u8BEF\"}),/*#__PURE__*/_jsx(\"p\",{children:\"\\u62B1\\u6B49\\uFF0C\\u5E94\\u7528\\u9047\\u5230\\u4E86\\u4E00\\u4E2A\\u9519\\u8BEF\\u3002\\u8BF7\\u5C1D\\u8BD5\\u5237\\u65B0\\u9875\\u9762\\u3002\"}),/*#__PURE__*/_jsxs(\"p\",{style:{fontSize:'14px',color:'var(--text-secondary-color)'},children:[\"\\u9519\\u8BEF\\u4FE1\\u606F: \",error.message]}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>window.location.reload(),children:\"\\u5237\\u65B0\\u9875\\u9762\"})]})});}// 加载状态\nif(isLoading||!isInitialized){return/*#__PURE__*/_jsx(Loading,{text:\"\\u6B63\\u5728\\u52A0\\u8F7D...\",subtext:\"\\u8BF7\\u7A0D\\u5019\\uFF0C\\u6B63\\u5728\\u521D\\u59CB\\u5316\\u5E94\\u7528\\u7A0B\\u5E8F\"});}// 特殊模式渲染\nif(currentMode==='zen'){return/*#__PURE__*/_jsx(ThemeProvider,{children:/*#__PURE__*/_jsx(SettingsProvider,{children:/*#__PURE__*/_jsx(ZenMode,{onBack:()=>handleModeChange('normal')})})});}if(currentMode==='curtain'){return/*#__PURE__*/_jsx(ThemeProvider,{children:/*#__PURE__*/_jsx(SettingsProvider,{children:/*#__PURE__*/_jsx(CurtainMode,{onBack:()=>handleModeChange('normal')})})});}// 正常模式渲染\nreturn/*#__PURE__*/_jsx(ThemeProvider,{children:/*#__PURE__*/_jsx(SettingsProvider,{children:/*#__PURE__*/_jsxs(AppContainer,{children:[/*#__PURE__*/_jsx(Header,{onSettingsClick:()=>setIsSettingsOpen(true),onModeChange:handleModeChange,currentMode:currentMode,showBackButton:false,onBackClick:()=>{}}),/*#__PURE__*/_jsxs(MainContent,{children:[/*#__PURE__*/_jsx(Search,{}),/*#__PURE__*/_jsx(ModuleSwitch,{activeModule:currentModule,onModuleChange:handleModuleChange}),renderCurrentModule()]}),/*#__PURE__*/_jsx(SettingsPanel,{isOpen:isSettingsOpen,onClose:()=>setIsSettingsOpen(false),onModeChange:handleModeChange})]})})});}export default App;","map":{"version":3,"names":["React","useState","useEffect","useCallback","styled","SettingsProvider","ThemeProvider","configManager","getFromStorage","saveToStorage","Header","Search","ModuleSwitch","SettingsPanel","Loading","Calendar","Bookmark","Todo","Note","Quote","News","ZenMode","CurtainMode","jsxs","_jsxs","jsx","_jsx","AppContainer","div","MainContent","main","ErrorContainer","ErrorContent","moduleComponents","calendar","bookmark","todo","note","quote","news","App","currentModule","setCurrentModule","isSettingsOpen","setIsSettingsOpen","currentMode","setCurrentMode","isInitialized","setIsInitialized","error","setError","isLoading","setIsLoading","handleError","errorInfo","console","applyFullSettings","settings","root","document","documentElement","body","title","style","setProperty","linkColor","theme","textColor","classList","add","remove","fontFamily","showBackground","backgroundType","backgroundColor","background","backgroundImage","backgroundSize","backgroundFit","backgroundPosition","backgroundRepeat","backgroundAttachment","gradientColors","gradientType","gradientDirection","gradientStops","length","gradient","opacity","backgroundOpacity","undefined","filters","backgroundBrightness","push","backgroundBlur","filter","join","initializeApp","Promise","resolve","setTimeout","initialize","savedSettings","get","startupModule","startupModuleType","lastModule","log","handleModuleChange","module","set","handleModeChange","mode","renderCurrentModule","ModuleComponent","children","fontSize","color","message","onClick","window","location","reload","text","subtext","onBack","onSettingsClick","onModeChange","showBackButton","onBackClick","activeModule","onModuleChange","isOpen","onClose"],"sources":["D:/Jliu Pureey/Documents/Editor/extion/homepage/src/App.js"],"sourcesContent":["import React, { useState, useEffect, useCallback } from 'react';\r\nimport styled from 'styled-components';\r\nimport { SettingsProvider } from './contexts/SettingsContext';\r\nimport { ThemeProvider } from './contexts/ThemeContext';\r\nimport configManager from './utils/simpleConfigManager';\r\nimport { getFromStorage, saveToStorage } from './utils/storage';\r\n\r\n// 组件导入\r\nimport Header from './components/Header/Header';\r\nimport Search from './components/Search/Search';\r\nimport ModuleSwitch from './components/ModuleSwitch/ModuleSwitch';\r\nimport SettingsPanel from './settings/SettingsPanel';\r\nimport Loading from './components/Loading/Loading';\r\n\r\n// 模块导入\r\nimport Calendar from './modules/Calendar/Calendar';\r\nimport Bookmark from './modules/Bookmark/Bookmark';\r\nimport Todo from './modules/Todo/Todo';\r\nimport Note from './modules/Note/Note';\r\nimport Quote from './modules/Quote/Quote';\r\nimport News from './modules/News/News';\r\n\r\n// 模式导入\r\nimport ZenMode from './modes/ZenMode/ZenMode';\r\nimport CurtainMode from './modes/CurtainMode/CurtainMode';\r\n\r\nconst AppContainer = styled.div`\r\n  min-height: 100vh;\r\n  background: var(--background-color, #ffffff);\r\n  color: var(--text-color, #333333);\r\n  font-family: var(--font-family, 'Microsoft YaHei', sans-serif);\r\n  transition: all 0.3s ease;\r\n  position: relative;\r\n  overflow-x: hidden;\r\n`;\r\n\r\nconst MainContent = styled.main`\r\n  padding: 20px;\r\n  max-width: 1200px;\r\n  margin: 0 auto;\r\n  min-height: calc(100vh - 80px);\r\n  display: flex;\r\n  flex-direction: column;\r\n  gap: 20px;\r\n`;\r\n\r\n\r\nconst ErrorContainer = styled.div`\r\n  display: flex;\r\n  justify-content: center;\r\n  align-items: center;\r\n  min-height: 100vh;\r\n  background: var(--background-color, #ffffff);\r\n  color: var(--text-color, #333333);\r\n  text-align: center;\r\n  padding: 20px;\r\n`;\r\n\r\nconst ErrorContent = styled.div`\r\n  max-width: 500px;\r\n  \r\n  h2 {\r\n    color: #e74c3c;\r\n    margin-bottom: 15px;\r\n  }\r\n  \r\n  p {\r\n    margin-bottom: 20px;\r\n    line-height: 1.6;\r\n  }\r\n  \r\n  button {\r\n    background: var(--primary-color, #4a90e2);\r\n    color: white;\r\n    border: none;\r\n    padding: 10px 20px;\r\n    border-radius: 5px;\r\n    cursor: pointer;\r\n    font-size: 16px;\r\n    \r\n    &:hover {\r\n      opacity: 0.9;\r\n    }\r\n  }\r\n`;\r\n\r\n// 模块映射\r\nconst moduleComponents = {\r\n  calendar: Calendar,\r\n  bookmark: Bookmark,\r\n  todo: Todo,\r\n  note: Note,\r\n  quote: Quote,\r\n  news: News\r\n};\r\n\r\nfunction App() {\r\n  const [currentModule, setCurrentModule] = useState('quote');\r\n  const [isSettingsOpen, setIsSettingsOpen] = useState(false);\r\n  const [currentMode, setCurrentMode] = useState('normal');\r\n  const [isInitialized, setIsInitialized] = useState(false);\r\n  const [error, setError] = useState(null);\r\n  const [isLoading, setIsLoading] = useState(true);\r\n\r\n  // 错误边界处理\r\n  const handleError = useCallback((error, errorInfo) => {\r\n    console.error('应用错误:', error, errorInfo);\r\n    setError(error);\r\n  }, []);\r\n\r\n  // 应用完整设置\r\n  const applyFullSettings = useCallback((settings) => {\r\n    try {\r\n      const root = document.documentElement;\r\n      const body = document.body;\r\n      \r\n      // 设置页面标题\r\n      document.title = '時';\r\n      \r\n      // 应用基础CSS变量\r\n      root.style.setProperty('--primary-color', settings.linkColor || '#4a90e2');\r\n      root.style.setProperty('--transition-speed', '0.3s');\r\n      \r\n      // 应用主题\r\n      const theme = settings.theme || 'light';\r\n      if (theme === 'dark') {\r\n        root.style.setProperty('--background-color', '#121212');\r\n        root.style.setProperty('--card-background', '#1e1e1e');\r\n        root.style.setProperty('--border-color', '#333333');\r\n        root.style.setProperty('--text-color', settings.textColor || '#e0e0e0');\r\n        root.style.setProperty('--text-secondary-color', '#a0a0a0');\r\n        root.style.setProperty('--primary-color-light', 'rgba(74, 144, 226, 0.2)');\r\n        body.classList.add('dark-mode');\r\n      } else {\r\n        root.style.setProperty('--background-color', '#ffffff');\r\n        root.style.setProperty('--card-background', '#f8f8f8');\r\n        root.style.setProperty('--border-color', '#e0e0e0');\r\n        root.style.setProperty('--text-color', settings.textColor || '#333333');\r\n        root.style.setProperty('--text-secondary-color', '#666666');\r\n        root.style.setProperty('--primary-color-light', 'rgba(74, 144, 226, 0.1)');\r\n        body.classList.remove('dark-mode');\r\n      }\r\n      \r\n      // 应用字体设置\r\n      if (settings.fontFamily) {\r\n        root.style.setProperty('--font-family', settings.fontFamily);\r\n      }\r\n      \r\n      // 应用背景设置 - 简化版本，避免复杂的DOM操作\r\n      if (settings.showBackground !== false) {\r\n        if (settings.backgroundType === 'color' && settings.backgroundColor) {\r\n          body.style.background = settings.backgroundColor;\r\n          body.style.backgroundImage = 'none';\r\n        } else if (settings.backgroundType === 'image' && settings.backgroundImage) {\r\n          body.style.backgroundImage = `url(\"${settings.backgroundImage}\")`;\r\n          body.style.backgroundSize = settings.backgroundFit || 'cover';\r\n          body.style.backgroundPosition = 'center';\r\n          body.style.backgroundRepeat = 'no-repeat';\r\n          body.style.backgroundAttachment = 'fixed';\r\n        } else if (settings.backgroundType === 'gradient' && settings.gradientColors) {\r\n          const { gradientType = 'linear', gradientDirection = 'to right', gradientColors, gradientStops = [0, 100] } = settings;\r\n          if (gradientColors && gradientColors.length >= 2) {\r\n            const gradient = `${gradientType}-gradient(${gradientDirection}, ${gradientColors[0]} ${gradientStops[0]}%, ${gradientColors[1]} ${gradientStops[1]}%)`;\r\n            body.style.background = gradient;\r\n            body.style.backgroundImage = 'none';\r\n          }\r\n        }\r\n        \r\n        // 应用背景效果\r\n        body.style.opacity = settings.backgroundOpacity !== undefined ? settings.backgroundOpacity : 1;\r\n        \r\n        const filters = [];\r\n        if (settings.backgroundBrightness !== undefined && settings.backgroundBrightness !== 1) {\r\n          filters.push(`brightness(${settings.backgroundBrightness})`);\r\n        }\r\n        if (settings.backgroundBlur !== undefined && settings.backgroundBlur > 0) {\r\n          filters.push(`blur(${settings.backgroundBlur}px)`);\r\n        }\r\n        if (filters.length > 0) {\r\n          body.style.filter = filters.join(' ');\r\n        }\r\n      } else {\r\n        body.style.background = theme === 'dark' ? '#121212' : '#ffffff';\r\n        body.style.backgroundImage = 'none';\r\n        body.style.opacity = 1;\r\n        body.style.filter = 'none';\r\n      }\r\n    } catch (error) {\r\n      console.error('应用设置时出错:', error);\r\n    }\r\n  }, []);\r\n\r\n  // 初始化应用\r\n  useEffect(() => {\r\n    const initializeApp = async () => {\r\n      try {\r\n        setIsLoading(true);\r\n        \r\n        // 设置页面标题\r\n        document.title = '時';\r\n        \r\n        // 延迟初始化以避免闪烁\r\n        await new Promise(resolve => setTimeout(resolve, 100));\r\n        \r\n        // 初始化配置管理器\r\n        await configManager.initialize();\r\n        \r\n        // 获取保存的设置\r\n        const savedSettings = configManager.get('settings', {});\r\n        \r\n        // 确定启动模块\r\n        let startupModule = 'quote'; // 默认为一语\r\n        \r\n        if (savedSettings.startupModuleType === 'last') {\r\n          // 继承上次使用的模块\r\n          const lastModule = configManager.get('data.lastActiveModule', 'quote');\r\n          startupModule = lastModule;\r\n        } else if (savedSettings.startupModuleType === 'specific') {\r\n          // 使用指定的模块\r\n          startupModule = savedSettings.startupModule || 'quote';\r\n        } else {\r\n          // 如果没有设置，检查是否有上次使用的模块\r\n          const lastModule = configManager.get('data.lastActiveModule', null);\r\n          if (lastModule) {\r\n            startupModule = lastModule;\r\n          }\r\n        }\r\n        \r\n        // 验证模块是否存在\r\n        if (!moduleComponents[startupModule]) {\r\n          startupModule = 'quote';\r\n        }\r\n        \r\n        setCurrentModule(startupModule);\r\n        \r\n        // 应用完整设置\r\n        applyFullSettings(savedSettings);\r\n        \r\n        console.log('应用初始化完成，启动模块:', startupModule);\r\n        \r\n        setIsInitialized(true);\r\n      } catch (error) {\r\n        console.error('初始化应用时出错:', error);\r\n        handleError(error);\r\n      } finally {\r\n        setIsLoading(false);\r\n      }\r\n    };\r\n\r\n    initializeApp();\r\n  }, [handleError, applyFullSettings]);\r\n\r\n  // 处理模块切换\r\n  const handleModuleChange = useCallback((module) => {\r\n    try {\r\n      if (moduleComponents[module]) {\r\n        setCurrentModule(module);\r\n        // 保存当前模块为上次使用的模块\r\n        configManager.set('data.lastActiveModule', module);\r\n      }\r\n    } catch (error) {\r\n      console.error('切换模块时出错:', error);\r\n      handleError(error);\r\n    }\r\n  }, [handleError]);\r\n\r\n  // 处理模式切换\r\n  const handleModeChange = useCallback((mode) => {\r\n    try {\r\n      setCurrentMode(mode);\r\n    } catch (error) {\r\n      console.error('切换模式时出错:', error);\r\n      handleError(error);\r\n    }\r\n  }, [handleError]);\r\n\r\n  // 渲染当前模块\r\n  const renderCurrentModule = useCallback(() => {\r\n    try {\r\n      const ModuleComponent = moduleComponents[currentModule];\r\n      if (!ModuleComponent) {\r\n        return <div>模块不存在: {currentModule}</div>;\r\n      }\r\n      return <ModuleComponent />;\r\n    } catch (error) {\r\n      console.error('渲染模块时出错:', error);\r\n      return <div>模块加载失败，请刷新页面重试</div>;\r\n    }\r\n  }, [currentModule]);\r\n\r\n  // 错误状态\r\n  if (error) {\r\n    return (\r\n      <ErrorContainer>\r\n        <ErrorContent>\r\n          <h2>应用出现错误</h2>\r\n          <p>抱歉，应用遇到了一个错误。请尝试刷新页面。</p>\r\n          <p style={{ fontSize: '14px', color: 'var(--text-secondary-color)' }}>\r\n            错误信息: {error.message}\r\n          </p>\r\n          <button onClick={() => window.location.reload()}>\r\n            刷新页面\r\n          </button>\r\n        </ErrorContent>\r\n      </ErrorContainer>\r\n    );\r\n  }\r\n\r\n  // 加载状态\r\n  if (isLoading || !isInitialized) {\r\n    return <Loading text=\"正在加载...\" subtext=\"请稍候，正在初始化应用程序\" />;\r\n  }\r\n\r\n  // 特殊模式渲染\r\n  if (currentMode === 'zen') {\r\n    return (\r\n      <ThemeProvider>\r\n        <SettingsProvider>\r\n          <ZenMode onBack={() => handleModeChange('normal')} />\r\n        </SettingsProvider>\r\n      </ThemeProvider>\r\n    );\r\n  }\r\n\r\n  if (currentMode === 'curtain') {\r\n    return (\r\n      <ThemeProvider>\r\n        <SettingsProvider>\r\n          <CurtainMode onBack={() => handleModeChange('normal')} />\r\n        </SettingsProvider>\r\n      </ThemeProvider>\r\n    );\r\n  }\r\n\r\n  // 正常模式渲染\r\n  return (\r\n    <ThemeProvider>\r\n      <SettingsProvider>\r\n        <AppContainer>\r\n          <Header \r\n            onSettingsClick={() => setIsSettingsOpen(true)}\r\n            onModeChange={handleModeChange}\r\n            currentMode={currentMode}\r\n            showBackButton={false}\r\n            onBackClick={() => {}}\r\n          />\r\n          \r\n          <MainContent>\r\n            <Search />\r\n            \r\n            <ModuleSwitch \r\n              activeModule={currentModule}\r\n              onModuleChange={handleModuleChange}\r\n            />\r\n            \r\n            {renderCurrentModule()}\r\n          </MainContent>\r\n          \r\n        <SettingsPanel \r\n          isOpen={isSettingsOpen}\r\n          onClose={() => setIsSettingsOpen(false)}\r\n          onModeChange={handleModeChange}\r\n        />\r\n        </AppContainer>\r\n      </SettingsProvider>\r\n    </ThemeProvider>\r\n  );\r\n}\r\n\r\nexport default App;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}