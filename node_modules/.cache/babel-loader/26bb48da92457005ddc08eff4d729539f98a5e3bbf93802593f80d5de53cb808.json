{"ast":null,"code":"import React,{useState,useContext,useRef,useEffect}from'react';import styled from'styled-components';import{buildSearchUrl,cleanSearchQuery,isValidUrl}from'../../utils/urlHandler';import{SettingsContext}from'../../contexts/SettingsContext';// 图标导入\nimport SearchIcon from'@mui/icons-material/Search';import CleaningServicesIcon from'@mui/icons-material/CleaningServices';import SettingsIcon from'@mui/icons-material/Settings';import ArrowDropDownIcon from'@mui/icons-material/ArrowDropDown';import EditIcon from'@mui/icons-material/Edit';import DeleteIcon from'@mui/icons-material/Delete';import ArrowUpwardIcon from'@mui/icons-material/ArrowUpward';import ArrowDownwardIcon from'@mui/icons-material/ArrowDownward';import CheckIcon from'@mui/icons-material/Check';import CloseIcon from'@mui/icons-material/Close';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const SearchContainer=styled.div`\n  width: 100%;\n  max-width: 600px;\n  margin: 0 auto;\n  padding: 10px;\n  position: relative;\n`;const SearchForm=styled.form`\n  display: flex;\n  align-items: center;\n  background-color: var(--card-background);\n  border-radius: 24px;\n  padding: 5px 15px;\n  box-shadow: 0 2px 5px var(--shadow-color);\n  transition: all var(--transition-speed);\n  \n  &:focus-within {\n    box-shadow: 0 4px 10px var(--shadow-color);\n    transform: translateY(-2px);\n  }\n`;const SearchInput=styled.input`\n  flex: 1;\n  border: none;\n  background: transparent;\n  padding: 10px;\n  font-size: 16px;\n  color: var(--text-color);\n  outline: none;\n`;const SearchButton=styled.button`\n  background: none;\n  border: none;\n  color: var(--text-secondary-color);\n  cursor: pointer;\n  padding: 8px;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  transition: color var(--transition-speed);\n  \n  &:hover {\n    color: var(--primary-color);\n  }\n`;const CleanButton=styled(SearchButton)`\n  margin-right: 5px;\n  color: ${props=>props.active?'var(--primary-color)':'var(--text-secondary-color)'};\n`;const EngineButton=styled(SearchButton)`\n  display: flex;\n  align-items: center;\n  gap: 2px;\n  margin-right: 5px;\n  font-weight: 500;\n  color: var(--primary-color);\n`;const EngineDropdown=styled.div`\n  position: absolute;\n  top: 60px;\n  left: 50%;\n  transform: translateX(-50%);\n  background-color: var(--card-background);\n  border-radius: 8px;\n  box-shadow: 0 4px 12px var(--shadow-color);\n  padding: 10px;\n  z-index: 100;\n  width: 90%;\n  max-width: 500px;\n  display: ${props=>props.show?'block':'none'};\n`;const EngineGrid=styled.div`\n  display: grid;\n  grid-template-columns: repeat(3, 1fr);\n  gap: 10px;\n  margin-bottom: 15px;\n`;const EngineOption=styled.button`\n  background-color: ${props=>props.active?'var(--primary-color-light)':'transparent'};\n  border: 1px solid ${props=>props.active?'var(--primary-color)':'var(--border-color)'};\n  border-radius: 6px;\n  padding: 8px 12px;\n  cursor: pointer;\n  font-size: 14px;\n  color: ${props=>props.active?'var(--primary-color)':'var(--text-color)'};\n  font-weight: ${props=>props.active?'500':'normal'};\n  transition: all var(--transition-speed);\n  \n  &:hover {\n    background-color: var(--primary-color-light);\n    border-color: var(--primary-color);\n    color: var(--primary-color);\n  }\n`;const CustomEngineForm=styled.div`\n  display: flex;\n  flex-direction: column;\n  gap: 10px;\n  border-top: 1px solid var(--border-color);\n  padding-top: 15px;\n`;const CustomEngineList=styled.div`\n  margin-top: 15px;\n  border-top: 1px solid var(--border-color);\n  padding-top: 15px;\n`;const CustomEngineItem=styled.div`\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  padding: 8px;\n  border: 1px solid var(--border-color);\n  border-radius: 4px;\n  margin-bottom: 8px;\n  background-color: var(--background-color);\n  \n  &:hover {\n    background-color: var(--primary-color-light);\n  }\n`;const EngineName=styled.div`\n  flex: 1;\n  font-weight: ${props=>props.active?'500':'normal'};\n  color: ${props=>props.active?'var(--primary-color)':'var(--text-color)'};\n`;const EngineUrl=styled.div`\n  flex: 2;\n  font-size: 12px;\n  color: var(--text-secondary-color);\n  white-space: nowrap;\n  overflow: hidden;\n  text-overflow: ellipsis;\n  margin: 0 10px;\n`;const ActionButtons=styled.div`\n  display: flex;\n  gap: 5px;\n`;const ActionButton=styled.button`\n  background: none;\n  border: none;\n  color: var(--text-secondary-color);\n  cursor: pointer;\n  padding: 4px;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  \n  &:hover {\n    color: var(--primary-color);\n  }\n`;const TestButton=styled.button`\n  background-color: var(--background-color);\n  border: 1px solid var(--border-color);\n  border-radius: 4px;\n  padding: 4px 8px;\n  font-size: 12px;\n  cursor: pointer;\n  \n  &:hover {\n    background-color: var(--primary-color-light);\n    border-color: var(--primary-color);\n    color: var(--primary-color);\n  }\n`;const EditForm=styled.div`\n  display: flex;\n  flex-direction: column;\n  gap: 8px;\n  padding: 8px;\n  border: 1px solid var(--primary-color);\n  border-radius: 4px;\n  margin-bottom: 8px;\n  background-color: var(--card-background);\n`;const EditFormButtons=styled.div`\n  display: flex;\n  justify-content: flex-end;\n  gap: 8px;\n`;const EditFormButton=styled.button`\n  background-color: ${props=>props.primary?'var(--primary-color)':'var(--background-color)'};\n  color: ${props=>props.primary?'white':'var(--text-color)'};\n  border: 1px solid ${props=>props.primary?'var(--primary-color)':'var(--border-color)'};\n  border-radius: 4px;\n  padding: 4px 8px;\n  font-size: 12px;\n  cursor: pointer;\n  \n  &:hover {\n    background-color: ${props=>props.primary?'#3a7bc8':'var(--primary-color-light)'};\n  }\n`;const FormRow=styled.div`\n  display: flex;\n  gap: 10px;\n  align-items: center;\n`;const Label=styled.label`\n  font-size: 14px;\n  color: var(--text-color);\n  width: 80px;\n`;const Input=styled.input`\n  flex: 1;\n  padding: 8px;\n  border: 1px solid var(--border-color);\n  border-radius: 4px;\n  background-color: var(--background-color);\n  color: var(--text-color);\n  font-size: 14px;\n  \n  &:focus {\n    border-color: var(--primary-color);\n    outline: none;\n  }\n`;const AddButton=styled.button`\n  background-color: var(--primary-color);\n  color: white;\n  border: none;\n  border-radius: 4px;\n  padding: 8px 16px;\n  cursor: pointer;\n  font-size: 14px;\n  margin-left: auto;\n  \n  &:hover {\n    background-color: #3a7bc8;\n  }\n`;// 添加缺失的组件\nconst SwitchContainer=styled.div`\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  gap: 10px;\n`;const SwitchLabel=styled.span`\n  font-size: 14px;\n  color: var(--text-color);\n`;const Switch=styled.label`\n  position: relative;\n  display: inline-block;\n  width: 40px;\n  height: 20px;\n  \n  input {\n    opacity: 0;\n    width: 0;\n    height: 0;\n  }\n`;const Slider2=styled.span`\n  position: absolute;\n  cursor: pointer;\n  top: 0;\n  left: 0;\n  right: 0;\n  bottom: 0;\n  background-color: #ccc;\n  transition: .4s;\n  border-radius: 20px;\n  \n  &:before {\n    position: absolute;\n    content: \"\";\n    height: 14px;\n    width: 14px;\n    left: 3px;\n    bottom: 3px;\n    background-color: white;\n    transition: .4s;\n    border-radius: 50%;\n  }\n  \n  input:checked + & {\n    background-color: var(--primary-color);\n  }\n  \n  input:checked + &:before {\n    transform: translateX(20px);\n  }\n`;const Search=()=>{var _settings$search,_settings$search2,_settings$search3,_settings$search4;const{settings,updateSpecificSettings}=useContext(SettingsContext);const[query,setQuery]=useState('');const[autoClean,setAutoClean]=useState((settings===null||settings===void 0?void 0:(_settings$search=settings.search)===null||_settings$search===void 0?void 0:_settings$search.autoCleanUrl)||false);const[removeNonUrl,setRemoveNonUrl]=useState((settings===null||settings===void 0?void 0:(_settings$search2=settings.search)===null||_settings$search2===void 0?void 0:_settings$search2.removeNonUrl)||false);const[engine,setEngine]=useState((settings===null||settings===void 0?void 0:(_settings$search3=settings.search)===null||_settings$search3===void 0?void 0:_settings$search3.defaultEngine)||'bing');const[showEngineDropdown,setShowEngineDropdown]=useState(false);const[customEngineName,setCustomEngineName]=useState('');const[customEngineUrl,setCustomEngineUrl]=useState('');const[customEngines,setCustomEngines]=useState((settings===null||settings===void 0?void 0:(_settings$search4=settings.search)===null||_settings$search4===void 0?void 0:_settings$search4.customEngines)||[]);const[editingEngine,setEditingEngine]=useState(null);const[editName,setEditName]=useState('');const[editUrl,setEditUrl]=useState('');const[testQuery,setTestQuery]=useState('测试查询[移除]');const dropdownRef=useRef(null);const searchFormRef=useRef(null);// 点击外部关闭下拉菜单\nuseEffect(()=>{const handleClickOutside=event=>{if(dropdownRef.current&&!dropdownRef.current.contains(event.target)&&searchFormRef.current&&!searchFormRef.current.contains(event.target)){setShowEngineDropdown(false);}};document.addEventListener('mousedown',handleClickOutside);return()=>{document.removeEventListener('mousedown',handleClickOutside);};},[]);// 初始化自定义引擎\nuseEffect(()=>{var _settings$search5;if(settings!==null&&settings!==void 0&&(_settings$search5=settings.search)!==null&&_settings$search5!==void 0&&_settings$search5.customEngines){setCustomEngines(settings.search.customEngines);}},[settings]);// 处理搜索提交\nconst handleSubmit=e=>{e.preventDefault();if(!query.trim())return;try{var _settings$search9;let processedQuery=query;let originalIsUrl=false;// 首先检查原始查询是否是有效URL\nif(isValidUrl(query)||query.startsWith('file:/')){originalIsUrl=true;// 如果是URL，直接跳转\nif(!autoClean){var _settings$search6;if(settings!==null&&settings!==void 0&&(_settings$search6=settings.search)!==null&&_settings$search6!==void 0&&_settings$search6.openInNewTab){window.open(query,'_blank');}else{window.location.href=query;}return;}}// 如果启用了URL清理\nif(autoClean){// 按照要求处理URL:\n// 1. 首先去除[]内的内容及[]本身\n// 2. 然后去除中文\n// 3. 将中文标点符号转化为英文标点\n// 4. 最后去除非URL的字符\nprocessedQuery=cleanSearchQuery(query);// 如果清理后的查询是有效URL，直接跳转\nif(isValidUrl(processedQuery)||processedQuery.startsWith('file:/')){var _settings$search7;if(settings!==null&&settings!==void 0&&(_settings$search7=settings.search)!==null&&_settings$search7!==void 0&&_settings$search7.openInNewTab){window.open(processedQuery,'_blank');}else{window.location.href=processedQuery;}return;}// 如果原始查询是URL但清理后不是，使用原始URL\nif(originalIsUrl){var _settings$search8;if(settings!==null&&settings!==void 0&&(_settings$search8=settings.search)!==null&&_settings$search8!==void 0&&_settings$search8.openInNewTab){window.open(query,'_blank');}else{window.location.href=query;}return;}}// 如果不是URL，使用搜索引擎\n// 检查是否是自定义引擎\nconst customEngine=customEngines.find(e=>e.id===engine);let searchUrl;if(customEngine){searchUrl=customEngine.url.replace('{query}',encodeURIComponent(processedQuery));}else{searchUrl=buildSearchUrl(processedQuery,engine,removeNonUrl,customEngines);}if(settings!==null&&settings!==void 0&&(_settings$search9=settings.search)!==null&&_settings$search9!==void 0&&_settings$search9.openInNewTab){window.open(searchUrl,'_blank');}else{window.location.href=searchUrl;}}catch(error){console.error('搜索处理错误:',error);// 使用默认搜索引擎作为后备\nconst backupUrl=`https://www.bing.com/search?q=${encodeURIComponent(query)}`;window.open(backupUrl,'_blank');}};// 处理输入变化\nconst handleInputChange=e=>{setQuery(e.target.value);};// 切换自动清理URL\nconst toggleAutoClean=()=>{const newValue=!autoClean;setAutoClean(newValue);updateSpecificSettings('search.autoCleanUrl',newValue);};// 切换移除非URL字符\nconst toggleRemoveNonUrl=()=>{const newValue=!removeNonUrl;setRemoveNonUrl(newValue);updateSpecificSettings('search.removeNonUrl',newValue);};// 切换搜索引擎\nconst changeEngine=newEngine=>{setEngine(newEngine);updateSpecificSettings('search.defaultEngine',newEngine);setShowEngineDropdown(false);};// 添加自定义搜索引擎\nconst addCustomEngine=()=>{if(!customEngineName.trim()||!customEngineUrl.trim()||!customEngineUrl.includes('{query}')){alert('请输入有效的名称和URL，URL中必须包含{query}作为搜索词的占位符');return;}const newEngine={id:`custom_${Date.now()}`,name:customEngineName,url:customEngineUrl};const updatedEngines=[...customEngines,newEngine];setCustomEngines(updatedEngines);updateSpecificSettings('search.customEngines',updatedEngines);// 切换到新添加的引擎\nsetEngine(newEngine.id);updateSpecificSettings('search.defaultEngine',newEngine.id);// 清空输入框\nsetCustomEngineName('');setCustomEngineUrl('');};// 开始编辑自定义搜索引擎\nconst startEditEngine=engine=>{setEditingEngine(engine.id);setEditName(engine.name);setEditUrl(engine.url);};// 保存编辑的自定义搜索引擎\nconst saveEditEngine=()=>{if(!editName.trim()||!editUrl.trim()||!editUrl.includes('{query}')){alert('请输入有效的名称和URL，URL中必须包含{query}作为搜索词的占位符');return;}const updatedEngines=customEngines.map(engine=>engine.id===editingEngine?{...engine,name:editName,url:editUrl}:engine);setCustomEngines(updatedEngines);updateSpecificSettings('search.customEngines',updatedEngines);// 取消编辑状态\ncancelEditEngine();};// 取消编辑\nconst cancelEditEngine=()=>{setEditingEngine(null);setEditName('');setEditUrl('');};// 删除自定义搜索引擎\nconst deleteEngine=engineId=>{if(window.confirm('确定要删除这个搜索引擎吗？')){const updatedEngines=customEngines.filter(engine=>engine.id!==engineId);setCustomEngines(updatedEngines);updateSpecificSettings('search.customEngines',updatedEngines);// 如果删除的是当前选中的引擎，切换到默认引擎\nif(engine===engineId){setEngine('bing');updateSpecificSettings('search.defaultEngine','bing');}}};// 上移自定义搜索引擎\nconst moveEngineUp=index=>{if(index<=0)return;const updatedEngines=[...customEngines];[updatedEngines[index],updatedEngines[index-1]]=[updatedEngines[index-1],updatedEngines[index]];setCustomEngines(updatedEngines);updateSpecificSettings('search.customEngines',updatedEngines);};// 下移自定义搜索引擎\nconst moveEngineDown=index=>{if(index>=customEngines.length-1)return;const updatedEngines=[...customEngines];[updatedEngines[index],updatedEngines[index+1]]=[updatedEngines[index+1],updatedEngines[index]];setCustomEngines(updatedEngines);updateSpecificSettings('search.customEngines',updatedEngines);};// 测试自定义搜索引擎\nconst testEngine=engineUrl=>{try{// 处理测试查询\nlet processedQuery=testQuery;if(autoClean){processedQuery=cleanSearchQuery(testQuery);}const testUrl=engineUrl.replace('{query}',encodeURIComponent(processedQuery));window.open(testUrl,'_blank');}catch(error){console.error('测试搜索引擎失败:',error);alert('测试失败，请检查URL格式');}};// 获取当前引擎名称\nconst getCurrentEngineName=()=>{const predefinedEngines={'bing':'必应','google':'谷歌','baidu':'百度','sogou':'搜狗','mita':'秘塔AI'};if(predefinedEngines[engine]){return predefinedEngines[engine];}const customEngine=customEngines.find(e=>e.id===engine);return customEngine?customEngine.name:'必应';};return/*#__PURE__*/_jsxs(SearchContainer,{children:[/*#__PURE__*/_jsxs(SearchForm,{onSubmit:handleSubmit,ref:searchFormRef,children:[/*#__PURE__*/_jsxs(EngineButton,{type:\"button\",onClick:()=>setShowEngineDropdown(!showEngineDropdown),title:\"\\u9009\\u62E9\\u641C\\u7D22\\u5F15\\u64CE\",children:[getCurrentEngineName(),/*#__PURE__*/_jsx(ArrowDropDownIcon,{fontSize:\"small\"})]}),/*#__PURE__*/_jsx(SearchInput,{type:\"text\",placeholder:\"\\u641C\\u7D22\\u6216\\u8F93\\u5165\\u7F51\\u5740\",value:query,onChange:handleInputChange,autoFocus:true}),/*#__PURE__*/_jsx(CleanButton,{type:\"button\",onClick:toggleAutoClean,active:autoClean,title:autoClean?'已启用URL清理':'已禁用URL清理',children:/*#__PURE__*/_jsx(CleaningServicesIcon,{fontSize:\"small\"})}),/*#__PURE__*/_jsx(SearchButton,{type:\"submit\",title:\"\\u641C\\u7D22\",children:/*#__PURE__*/_jsx(SearchIcon,{})})]}),showEngineDropdown&&/*#__PURE__*/_jsxs(EngineDropdown,{show:showEngineDropdown,ref:dropdownRef,children:[/*#__PURE__*/_jsxs(EngineGrid,{children:[/*#__PURE__*/_jsx(EngineOption,{onClick:()=>changeEngine('bing'),active:engine==='bing',children:\"\\u5FC5\\u5E94\"}),/*#__PURE__*/_jsx(EngineOption,{onClick:()=>changeEngine('google'),active:engine==='google',children:\"\\u8C37\\u6B4C\"}),/*#__PURE__*/_jsx(EngineOption,{onClick:()=>changeEngine('baidu'),active:engine==='baidu',children:\"\\u767E\\u5EA6\"}),/*#__PURE__*/_jsx(EngineOption,{onClick:()=>changeEngine('sogou'),active:engine==='sogou',children:\"\\u641C\\u72D7\"}),/*#__PURE__*/_jsx(EngineOption,{onClick:()=>changeEngine('mita'),active:engine==='mita',children:\"\\u79D8\\u5854AI\"}),customEngines.map(customEngine=>/*#__PURE__*/_jsx(EngineOption,{onClick:()=>changeEngine(customEngine.id),active:engine===customEngine.id,children:customEngine.name},customEngine.id))]}),/*#__PURE__*/_jsxs(CustomEngineForm,{children:[/*#__PURE__*/_jsxs(FormRow,{children:[/*#__PURE__*/_jsx(Label,{children:\"\\u540D\\u79F0:\"}),/*#__PURE__*/_jsx(Input,{type:\"text\",value:customEngineName,onChange:e=>setCustomEngineName(e.target.value),placeholder:\"\\u81EA\\u5B9A\\u4E49\\u5F15\\u64CE\\u540D\\u79F0\"})]}),/*#__PURE__*/_jsxs(FormRow,{children:[/*#__PURE__*/_jsx(Label,{children:\"URL:\"}),/*#__PURE__*/_jsx(Input,{type:\"text\",value:customEngineUrl,onChange:e=>setCustomEngineUrl(e.target.value),placeholder:\"https://example.com/search?q={query}\"})]}),/*#__PURE__*/_jsxs(FormRow,{children:[/*#__PURE__*/_jsxs(SwitchContainer,{children:[/*#__PURE__*/_jsx(SwitchLabel,{children:\"URL\\u6E05\\u7406\"}),/*#__PURE__*/_jsxs(Switch,{children:[/*#__PURE__*/_jsx(\"input\",{type:\"checkbox\",checked:autoClean,onChange:toggleAutoClean}),/*#__PURE__*/_jsx(Slider2,{})]})]}),/*#__PURE__*/_jsx(AddButton,{onClick:addCustomEngine,children:\"\\u6DFB\\u52A0\\u81EA\\u5B9A\\u4E49\\u5F15\\u64CE\"})]})]}),customEngines.length>0&&/*#__PURE__*/_jsx(CustomEngineList,{children:customEngines.map((customEngine,index)=>editingEngine===customEngine.id?/*#__PURE__*/_jsxs(EditForm,{children:[/*#__PURE__*/_jsxs(FormRow,{children:[/*#__PURE__*/_jsx(Label,{children:\"\\u540D\\u79F0:\"}),/*#__PURE__*/_jsx(Input,{type:\"text\",value:editName,onChange:e=>setEditName(e.target.value)})]}),/*#__PURE__*/_jsxs(FormRow,{children:[/*#__PURE__*/_jsx(Label,{children:\"URL:\"}),/*#__PURE__*/_jsx(Input,{type:\"text\",value:editUrl,onChange:e=>setEditUrl(e.target.value)})]}),/*#__PURE__*/_jsxs(EditFormButtons,{children:[/*#__PURE__*/_jsxs(EditFormButton,{onClick:cancelEditEngine,children:[/*#__PURE__*/_jsx(CloseIcon,{fontSize:\"small\"}),\" \\u53D6\\u6D88\"]}),/*#__PURE__*/_jsxs(EditFormButton,{primary:true,onClick:saveEditEngine,children:[/*#__PURE__*/_jsx(CheckIcon,{fontSize:\"small\"}),\" \\u4FDD\\u5B58\"]})]})]},customEngine.id):/*#__PURE__*/_jsxs(CustomEngineItem,{children:[/*#__PURE__*/_jsx(EngineName,{active:engine===customEngine.id,children:customEngine.name}),/*#__PURE__*/_jsx(EngineUrl,{children:customEngine.url}),/*#__PURE__*/_jsxs(ActionButtons,{children:[/*#__PURE__*/_jsx(TestButton,{onClick:()=>testEngine(customEngine.url),title:\"\\u6D4B\\u8BD5\\u641C\\u7D22\\u5F15\\u64CE\",children:\"\\u6D4B\\u8BD5\"}),index>0&&/*#__PURE__*/_jsx(ActionButton,{onClick:()=>moveEngineUp(index),title:\"\\u4E0A\\u79FB\",children:/*#__PURE__*/_jsx(ArrowUpwardIcon,{fontSize:\"small\"})}),index<customEngines.length-1&&/*#__PURE__*/_jsx(ActionButton,{onClick:()=>moveEngineDown(index),title:\"\\u4E0B\\u79FB\",children:/*#__PURE__*/_jsx(ArrowDownwardIcon,{fontSize:\"small\"})}),/*#__PURE__*/_jsx(ActionButton,{onClick:()=>startEditEngine(customEngine),title:\"\\u7F16\\u8F91\",children:/*#__PURE__*/_jsx(EditIcon,{fontSize:\"small\"})}),/*#__PURE__*/_jsx(ActionButton,{onClick:()=>deleteEngine(customEngine.id),title:\"\\u5220\\u9664\",children:/*#__PURE__*/_jsx(DeleteIcon,{fontSize:\"small\"})})]})]},customEngine.id))})]})]});};export default Search;","map":{"version":3,"names":["React","useState","useContext","useRef","useEffect","styled","buildSearchUrl","cleanSearchQuery","isValidUrl","SettingsContext","SearchIcon","CleaningServicesIcon","SettingsIcon","ArrowDropDownIcon","EditIcon","DeleteIcon","ArrowUpwardIcon","ArrowDownwardIcon","CheckIcon","CloseIcon","jsx","_jsx","jsxs","_jsxs","SearchContainer","div","SearchForm","form","SearchInput","input","SearchButton","button","CleanButton","props","active","EngineButton","EngineDropdown","show","EngineGrid","EngineOption","CustomEngineForm","CustomEngineList","CustomEngineItem","EngineName","EngineUrl","ActionButtons","ActionButton","TestButton","EditForm","EditFormButtons","EditFormButton","primary","FormRow","Label","label","Input","AddButton","SwitchContainer","SwitchLabel","span","Switch","Slider2","Search","_settings$search","_settings$search2","_settings$search3","_settings$search4","settings","updateSpecificSettings","query","setQuery","autoClean","setAutoClean","search","autoCleanUrl","removeNonUrl","setRemoveNonUrl","engine","setEngine","defaultEngine","showEngineDropdown","setShowEngineDropdown","customEngineName","setCustomEngineName","customEngineUrl","setCustomEngineUrl","customEngines","setCustomEngines","editingEngine","setEditingEngine","editName","setEditName","editUrl","setEditUrl","testQuery","setTestQuery","dropdownRef","searchFormRef","handleClickOutside","event","current","contains","target","document","addEventListener","removeEventListener","_settings$search5","handleSubmit","e","preventDefault","trim","_settings$search9","processedQuery","originalIsUrl","startsWith","_settings$search6","openInNewTab","window","open","location","href","_settings$search7","_settings$search8","customEngine","find","id","searchUrl","url","replace","encodeURIComponent","error","console","backupUrl","handleInputChange","value","toggleAutoClean","newValue","toggleRemoveNonUrl","changeEngine","newEngine","addCustomEngine","includes","alert","Date","now","name","updatedEngines","startEditEngine","saveEditEngine","map","cancelEditEngine","deleteEngine","engineId","confirm","filter","moveEngineUp","index","moveEngineDown","length","testEngine","engineUrl","testUrl","getCurrentEngineName","predefinedEngines","children","onSubmit","ref","type","onClick","title","fontSize","placeholder","onChange","autoFocus","checked"],"sources":["D:/Jliu Pureey/Documents/Editor/extion/homepage/src/components/Search/Search.js"],"sourcesContent":["import React, { useState, useContext, useRef, useEffect } from 'react';\r\nimport styled from 'styled-components';\r\nimport { buildSearchUrl, cleanSearchQuery, isValidUrl } from '../../utils/urlHandler';\r\nimport { SettingsContext } from '../../contexts/SettingsContext';\r\n\r\n// 图标导入\r\nimport SearchIcon from '@mui/icons-material/Search';\r\nimport CleaningServicesIcon from '@mui/icons-material/CleaningServices';\r\nimport SettingsIcon from '@mui/icons-material/Settings';\r\nimport ArrowDropDownIcon from '@mui/icons-material/ArrowDropDown';\r\nimport EditIcon from '@mui/icons-material/Edit';\r\nimport DeleteIcon from '@mui/icons-material/Delete';\r\nimport ArrowUpwardIcon from '@mui/icons-material/ArrowUpward';\r\nimport ArrowDownwardIcon from '@mui/icons-material/ArrowDownward';\r\nimport CheckIcon from '@mui/icons-material/Check';\r\nimport CloseIcon from '@mui/icons-material/Close';\r\n\r\nconst SearchContainer = styled.div`\r\n  width: 100%;\r\n  max-width: 600px;\r\n  margin: 0 auto;\r\n  padding: 10px;\r\n  position: relative;\r\n`;\r\n\r\nconst SearchForm = styled.form`\r\n  display: flex;\r\n  align-items: center;\r\n  background-color: var(--card-background);\r\n  border-radius: 24px;\r\n  padding: 5px 15px;\r\n  box-shadow: 0 2px 5px var(--shadow-color);\r\n  transition: all var(--transition-speed);\r\n  \r\n  &:focus-within {\r\n    box-shadow: 0 4px 10px var(--shadow-color);\r\n    transform: translateY(-2px);\r\n  }\r\n`;\r\n\r\nconst SearchInput = styled.input`\r\n  flex: 1;\r\n  border: none;\r\n  background: transparent;\r\n  padding: 10px;\r\n  font-size: 16px;\r\n  color: var(--text-color);\r\n  outline: none;\r\n`;\r\n\r\nconst SearchButton = styled.button`\r\n  background: none;\r\n  border: none;\r\n  color: var(--text-secondary-color);\r\n  cursor: pointer;\r\n  padding: 8px;\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n  transition: color var(--transition-speed);\r\n  \r\n  &:hover {\r\n    color: var(--primary-color);\r\n  }\r\n`;\r\n\r\nconst CleanButton = styled(SearchButton)`\r\n  margin-right: 5px;\r\n  color: ${props => props.active ? 'var(--primary-color)' : 'var(--text-secondary-color)'};\r\n`;\r\n\r\nconst EngineButton = styled(SearchButton)`\r\n  display: flex;\r\n  align-items: center;\r\n  gap: 2px;\r\n  margin-right: 5px;\r\n  font-weight: 500;\r\n  color: var(--primary-color);\r\n`;\r\n\r\nconst EngineDropdown = styled.div`\r\n  position: absolute;\r\n  top: 60px;\r\n  left: 50%;\r\n  transform: translateX(-50%);\r\n  background-color: var(--card-background);\r\n  border-radius: 8px;\r\n  box-shadow: 0 4px 12px var(--shadow-color);\r\n  padding: 10px;\r\n  z-index: 100;\r\n  width: 90%;\r\n  max-width: 500px;\r\n  display: ${props => props.show ? 'block' : 'none'};\r\n`;\r\n\r\nconst EngineGrid = styled.div`\r\n  display: grid;\r\n  grid-template-columns: repeat(3, 1fr);\r\n  gap: 10px;\r\n  margin-bottom: 15px;\r\n`;\r\n\r\nconst EngineOption = styled.button`\r\n  background-color: ${props => props.active ? 'var(--primary-color-light)' : 'transparent'};\r\n  border: 1px solid ${props => props.active ? 'var(--primary-color)' : 'var(--border-color)'};\r\n  border-radius: 6px;\r\n  padding: 8px 12px;\r\n  cursor: pointer;\r\n  font-size: 14px;\r\n  color: ${props => props.active ? 'var(--primary-color)' : 'var(--text-color)'};\r\n  font-weight: ${props => props.active ? '500' : 'normal'};\r\n  transition: all var(--transition-speed);\r\n  \r\n  &:hover {\r\n    background-color: var(--primary-color-light);\r\n    border-color: var(--primary-color);\r\n    color: var(--primary-color);\r\n  }\r\n`;\r\n\r\nconst CustomEngineForm = styled.div`\r\n  display: flex;\r\n  flex-direction: column;\r\n  gap: 10px;\r\n  border-top: 1px solid var(--border-color);\r\n  padding-top: 15px;\r\n`;\r\n\r\nconst CustomEngineList = styled.div`\r\n  margin-top: 15px;\r\n  border-top: 1px solid var(--border-color);\r\n  padding-top: 15px;\r\n`;\r\n\r\nconst CustomEngineItem = styled.div`\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: space-between;\r\n  padding: 8px;\r\n  border: 1px solid var(--border-color);\r\n  border-radius: 4px;\r\n  margin-bottom: 8px;\r\n  background-color: var(--background-color);\r\n  \r\n  &:hover {\r\n    background-color: var(--primary-color-light);\r\n  }\r\n`;\r\n\r\nconst EngineName = styled.div`\r\n  flex: 1;\r\n  font-weight: ${props => props.active ? '500' : 'normal'};\r\n  color: ${props => props.active ? 'var(--primary-color)' : 'var(--text-color)'};\r\n`;\r\n\r\nconst EngineUrl = styled.div`\r\n  flex: 2;\r\n  font-size: 12px;\r\n  color: var(--text-secondary-color);\r\n  white-space: nowrap;\r\n  overflow: hidden;\r\n  text-overflow: ellipsis;\r\n  margin: 0 10px;\r\n`;\r\n\r\nconst ActionButtons = styled.div`\r\n  display: flex;\r\n  gap: 5px;\r\n`;\r\n\r\nconst ActionButton = styled.button`\r\n  background: none;\r\n  border: none;\r\n  color: var(--text-secondary-color);\r\n  cursor: pointer;\r\n  padding: 4px;\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n  \r\n  &:hover {\r\n    color: var(--primary-color);\r\n  }\r\n`;\r\n\r\nconst TestButton = styled.button`\r\n  background-color: var(--background-color);\r\n  border: 1px solid var(--border-color);\r\n  border-radius: 4px;\r\n  padding: 4px 8px;\r\n  font-size: 12px;\r\n  cursor: pointer;\r\n  \r\n  &:hover {\r\n    background-color: var(--primary-color-light);\r\n    border-color: var(--primary-color);\r\n    color: var(--primary-color);\r\n  }\r\n`;\r\n\r\nconst EditForm = styled.div`\r\n  display: flex;\r\n  flex-direction: column;\r\n  gap: 8px;\r\n  padding: 8px;\r\n  border: 1px solid var(--primary-color);\r\n  border-radius: 4px;\r\n  margin-bottom: 8px;\r\n  background-color: var(--card-background);\r\n`;\r\n\r\nconst EditFormButtons = styled.div`\r\n  display: flex;\r\n  justify-content: flex-end;\r\n  gap: 8px;\r\n`;\r\n\r\nconst EditFormButton = styled.button`\r\n  background-color: ${props => props.primary ? 'var(--primary-color)' : 'var(--background-color)'};\r\n  color: ${props => props.primary ? 'white' : 'var(--text-color)'};\r\n  border: 1px solid ${props => props.primary ? 'var(--primary-color)' : 'var(--border-color)'};\r\n  border-radius: 4px;\r\n  padding: 4px 8px;\r\n  font-size: 12px;\r\n  cursor: pointer;\r\n  \r\n  &:hover {\r\n    background-color: ${props => props.primary ? '#3a7bc8' : 'var(--primary-color-light)'};\r\n  }\r\n`;\r\n\r\nconst FormRow = styled.div`\r\n  display: flex;\r\n  gap: 10px;\r\n  align-items: center;\r\n`;\r\n\r\nconst Label = styled.label`\r\n  font-size: 14px;\r\n  color: var(--text-color);\r\n  width: 80px;\r\n`;\r\n\r\nconst Input = styled.input`\r\n  flex: 1;\r\n  padding: 8px;\r\n  border: 1px solid var(--border-color);\r\n  border-radius: 4px;\r\n  background-color: var(--background-color);\r\n  color: var(--text-color);\r\n  font-size: 14px;\r\n  \r\n  &:focus {\r\n    border-color: var(--primary-color);\r\n    outline: none;\r\n  }\r\n`;\r\n\r\nconst AddButton = styled.button`\r\n  background-color: var(--primary-color);\r\n  color: white;\r\n  border: none;\r\n  border-radius: 4px;\r\n  padding: 8px 16px;\r\n  cursor: pointer;\r\n  font-size: 14px;\r\n  margin-left: auto;\r\n  \r\n  &:hover {\r\n    background-color: #3a7bc8;\r\n  }\r\n`;\r\n\r\n// 添加缺失的组件\r\nconst SwitchContainer = styled.div`\r\n  display: flex;\r\n  justify-content: space-between;\r\n  align-items: center;\r\n  gap: 10px;\r\n`;\r\n\r\nconst SwitchLabel = styled.span`\r\n  font-size: 14px;\r\n  color: var(--text-color);\r\n`;\r\n\r\nconst Switch = styled.label`\r\n  position: relative;\r\n  display: inline-block;\r\n  width: 40px;\r\n  height: 20px;\r\n  \r\n  input {\r\n    opacity: 0;\r\n    width: 0;\r\n    height: 0;\r\n  }\r\n`;\r\n\r\nconst Slider2 = styled.span`\r\n  position: absolute;\r\n  cursor: pointer;\r\n  top: 0;\r\n  left: 0;\r\n  right: 0;\r\n  bottom: 0;\r\n  background-color: #ccc;\r\n  transition: .4s;\r\n  border-radius: 20px;\r\n  \r\n  &:before {\r\n    position: absolute;\r\n    content: \"\";\r\n    height: 14px;\r\n    width: 14px;\r\n    left: 3px;\r\n    bottom: 3px;\r\n    background-color: white;\r\n    transition: .4s;\r\n    border-radius: 50%;\r\n  }\r\n  \r\n  input:checked + & {\r\n    background-color: var(--primary-color);\r\n  }\r\n  \r\n  input:checked + &:before {\r\n    transform: translateX(20px);\r\n  }\r\n`;\r\n\r\nconst Search = () => {\r\n  const { settings, updateSpecificSettings } = useContext(SettingsContext);\r\n  const [query, setQuery] = useState('');\r\n  const [autoClean, setAutoClean] = useState(settings?.search?.autoCleanUrl || false);\r\n  const [removeNonUrl, setRemoveNonUrl] = useState(settings?.search?.removeNonUrl || false);\r\n  const [engine, setEngine] = useState(settings?.search?.defaultEngine || 'bing');\r\n  const [showEngineDropdown, setShowEngineDropdown] = useState(false);\r\n  const [customEngineName, setCustomEngineName] = useState('');\r\n  const [customEngineUrl, setCustomEngineUrl] = useState('');\r\n  const [customEngines, setCustomEngines] = useState(settings?.search?.customEngines || []);\r\n  const [editingEngine, setEditingEngine] = useState(null);\r\n  const [editName, setEditName] = useState('');\r\n  const [editUrl, setEditUrl] = useState('');\r\n  const [testQuery, setTestQuery] = useState('测试查询[移除]');\r\n  \r\n  const dropdownRef = useRef(null);\r\n  const searchFormRef = useRef(null);\r\n  \r\n  // 点击外部关闭下拉菜单\r\n  useEffect(() => {\r\n    const handleClickOutside = (event) => {\r\n      if (dropdownRef.current && !dropdownRef.current.contains(event.target) &&\r\n          searchFormRef.current && !searchFormRef.current.contains(event.target)) {\r\n        setShowEngineDropdown(false);\r\n      }\r\n    };\r\n    \r\n    document.addEventListener('mousedown', handleClickOutside);\r\n    return () => {\r\n      document.removeEventListener('mousedown', handleClickOutside);\r\n    };\r\n  }, []);\r\n  \r\n  // 初始化自定义引擎\r\n  useEffect(() => {\r\n    if (settings?.search?.customEngines) {\r\n      setCustomEngines(settings.search.customEngines);\r\n    }\r\n  }, [settings]);\r\n  \r\n  // 处理搜索提交\r\n  const handleSubmit = (e) => {\r\n    e.preventDefault();\r\n    \r\n    if (!query.trim()) return;\r\n    \r\n    try {\r\n      let processedQuery = query;\r\n      let originalIsUrl = false;\r\n      \r\n      // 首先检查原始查询是否是有效URL\r\n      if (isValidUrl(query) || query.startsWith('file:/')) {\r\n        originalIsUrl = true;\r\n        \r\n        // 如果是URL，直接跳转\r\n        if (!autoClean) {\r\n          if (settings?.search?.openInNewTab) {\r\n            window.open(query, '_blank');\r\n          } else {\r\n            window.location.href = query;\r\n          }\r\n          return;\r\n        }\r\n      }\r\n      \r\n      // 如果启用了URL清理\r\n      if (autoClean) {\r\n        // 按照要求处理URL:\r\n        // 1. 首先去除[]内的内容及[]本身\r\n        // 2. 然后去除中文\r\n        // 3. 将中文标点符号转化为英文标点\r\n        // 4. 最后去除非URL的字符\r\n        processedQuery = cleanSearchQuery(query);\r\n        \r\n        // 如果清理后的查询是有效URL，直接跳转\r\n        if (isValidUrl(processedQuery) || processedQuery.startsWith('file:/')) {\r\n          if (settings?.search?.openInNewTab) {\r\n            window.open(processedQuery, '_blank');\r\n          } else {\r\n            window.location.href = processedQuery;\r\n          }\r\n          return;\r\n        }\r\n        \r\n        // 如果原始查询是URL但清理后不是，使用原始URL\r\n        if (originalIsUrl) {\r\n          if (settings?.search?.openInNewTab) {\r\n            window.open(query, '_blank');\r\n          } else {\r\n            window.location.href = query;\r\n          }\r\n          return;\r\n        }\r\n      }\r\n      \r\n      // 如果不是URL，使用搜索引擎\r\n      // 检查是否是自定义引擎\r\n      const customEngine = customEngines.find(e => e.id === engine);\r\n      \r\n      let searchUrl;\r\n      if (customEngine) {\r\n        searchUrl = customEngine.url.replace('{query}', encodeURIComponent(processedQuery));\r\n      } else {\r\n        searchUrl = buildSearchUrl(processedQuery, engine, removeNonUrl, customEngines);\r\n      }\r\n      \r\n      if (settings?.search?.openInNewTab) {\r\n        window.open(searchUrl, '_blank');\r\n      } else {\r\n        window.location.href = searchUrl;\r\n      }\r\n    } catch (error) {\r\n      console.error('搜索处理错误:', error);\r\n      // 使用默认搜索引擎作为后备\r\n      const backupUrl = `https://www.bing.com/search?q=${encodeURIComponent(query)}`;\r\n      window.open(backupUrl, '_blank');\r\n    }\r\n  };\r\n  \r\n  // 处理输入变化\r\n  const handleInputChange = (e) => {\r\n    setQuery(e.target.value);\r\n  };\r\n  \r\n  // 切换自动清理URL\r\n  const toggleAutoClean = () => {\r\n    const newValue = !autoClean;\r\n    setAutoClean(newValue);\r\n    updateSpecificSettings('search.autoCleanUrl', newValue);\r\n  };\r\n  \r\n  // 切换移除非URL字符\r\n  const toggleRemoveNonUrl = () => {\r\n    const newValue = !removeNonUrl;\r\n    setRemoveNonUrl(newValue);\r\n    updateSpecificSettings('search.removeNonUrl', newValue);\r\n  };\r\n  \r\n  // 切换搜索引擎\r\n  const changeEngine = (newEngine) => {\r\n    setEngine(newEngine);\r\n    updateSpecificSettings('search.defaultEngine', newEngine);\r\n    setShowEngineDropdown(false);\r\n  };\r\n  \r\n  // 添加自定义搜索引擎\r\n  const addCustomEngine = () => {\r\n    if (!customEngineName.trim() || !customEngineUrl.trim() || !customEngineUrl.includes('{query}')) {\r\n      alert('请输入有效的名称和URL，URL中必须包含{query}作为搜索词的占位符');\r\n      return;\r\n    }\r\n    \r\n    const newEngine = {\r\n      id: `custom_${Date.now()}`,\r\n      name: customEngineName,\r\n      url: customEngineUrl\r\n    };\r\n    \r\n    const updatedEngines = [...customEngines, newEngine];\r\n    setCustomEngines(updatedEngines);\r\n    updateSpecificSettings('search.customEngines', updatedEngines);\r\n    \r\n    // 切换到新添加的引擎\r\n    setEngine(newEngine.id);\r\n    updateSpecificSettings('search.defaultEngine', newEngine.id);\r\n    \r\n    // 清空输入框\r\n    setCustomEngineName('');\r\n    setCustomEngineUrl('');\r\n  };\r\n  \r\n  // 开始编辑自定义搜索引擎\r\n  const startEditEngine = (engine) => {\r\n    setEditingEngine(engine.id);\r\n    setEditName(engine.name);\r\n    setEditUrl(engine.url);\r\n  };\r\n  \r\n  // 保存编辑的自定义搜索引擎\r\n  const saveEditEngine = () => {\r\n    if (!editName.trim() || !editUrl.trim() || !editUrl.includes('{query}')) {\r\n      alert('请输入有效的名称和URL，URL中必须包含{query}作为搜索词的占位符');\r\n      return;\r\n    }\r\n    \r\n    const updatedEngines = customEngines.map(engine => \r\n      engine.id === editingEngine \r\n        ? { ...engine, name: editName, url: editUrl } \r\n        : engine\r\n    );\r\n    \r\n    setCustomEngines(updatedEngines);\r\n    updateSpecificSettings('search.customEngines', updatedEngines);\r\n    \r\n    // 取消编辑状态\r\n    cancelEditEngine();\r\n  };\r\n  \r\n  // 取消编辑\r\n  const cancelEditEngine = () => {\r\n    setEditingEngine(null);\r\n    setEditName('');\r\n    setEditUrl('');\r\n  };\r\n  \r\n  // 删除自定义搜索引擎\r\n  const deleteEngine = (engineId) => {\r\n    if (window.confirm('确定要删除这个搜索引擎吗？')) {\r\n      const updatedEngines = customEngines.filter(engine => engine.id !== engineId);\r\n      setCustomEngines(updatedEngines);\r\n      updateSpecificSettings('search.customEngines', updatedEngines);\r\n      \r\n      // 如果删除的是当前选中的引擎，切换到默认引擎\r\n      if (engine === engineId) {\r\n        setEngine('bing');\r\n        updateSpecificSettings('search.defaultEngine', 'bing');\r\n      }\r\n    }\r\n  };\r\n  \r\n  // 上移自定义搜索引擎\r\n  const moveEngineUp = (index) => {\r\n    if (index <= 0) return;\r\n    \r\n    const updatedEngines = [...customEngines];\r\n    [updatedEngines[index], updatedEngines[index - 1]] = [updatedEngines[index - 1], updatedEngines[index]];\r\n    \r\n    setCustomEngines(updatedEngines);\r\n    updateSpecificSettings('search.customEngines', updatedEngines);\r\n  };\r\n  \r\n  // 下移自定义搜索引擎\r\n  const moveEngineDown = (index) => {\r\n    if (index >= customEngines.length - 1) return;\r\n    \r\n    const updatedEngines = [...customEngines];\r\n    [updatedEngines[index], updatedEngines[index + 1]] = [updatedEngines[index + 1], updatedEngines[index]];\r\n    \r\n    setCustomEngines(updatedEngines);\r\n    updateSpecificSettings('search.customEngines', updatedEngines);\r\n  };\r\n  \r\n  // 测试自定义搜索引擎\r\n  const testEngine = (engineUrl) => {\r\n    try {\r\n      // 处理测试查询\r\n      let processedQuery = testQuery;\r\n      if (autoClean) {\r\n        processedQuery = cleanSearchQuery(testQuery);\r\n      }\r\n      \r\n      const testUrl = engineUrl.replace('{query}', encodeURIComponent(processedQuery));\r\n      window.open(testUrl, '_blank');\r\n    } catch (error) {\r\n      console.error('测试搜索引擎失败:', error);\r\n      alert('测试失败，请检查URL格式');\r\n    }\r\n  };\r\n  \r\n  // 获取当前引擎名称\r\n  const getCurrentEngineName = () => {\r\n    const predefinedEngines = {\r\n      'bing': '必应',\r\n      'google': '谷歌',\r\n      'baidu': '百度',\r\n      'sogou': '搜狗',\r\n      'mita': '秘塔AI'\r\n    };\r\n    \r\n    if (predefinedEngines[engine]) {\r\n      return predefinedEngines[engine];\r\n    }\r\n    \r\n    const customEngine = customEngines.find(e => e.id === engine);\r\n    return customEngine ? customEngine.name : '必应';\r\n  };\r\n  \r\n  return (\r\n    <SearchContainer>\r\n      <SearchForm onSubmit={handleSubmit} ref={searchFormRef}>\r\n        <EngineButton \r\n          type=\"button\" \r\n          onClick={() => setShowEngineDropdown(!showEngineDropdown)}\r\n          title=\"选择搜索引擎\"\r\n        >\r\n          {getCurrentEngineName()}\r\n          <ArrowDropDownIcon fontSize=\"small\" />\r\n        </EngineButton>\r\n        <SearchInput\r\n          type=\"text\"\r\n          placeholder=\"搜索或输入网址\"\r\n          value={query}\r\n          onChange={handleInputChange}\r\n          autoFocus\r\n        />\r\n        <CleanButton\r\n          type=\"button\"\r\n          onClick={toggleAutoClean}\r\n          active={autoClean}\r\n          title={autoClean ? '已启用URL清理' : '已禁用URL清理'}\r\n        >\r\n          <CleaningServicesIcon fontSize=\"small\" />\r\n        </CleanButton>\r\n        <SearchButton type=\"submit\" title=\"搜索\">\r\n          <SearchIcon />\r\n        </SearchButton>\r\n      </SearchForm>\r\n      \r\n      {showEngineDropdown && (\r\n        <EngineDropdown show={showEngineDropdown} ref={dropdownRef}>\r\n          <EngineGrid>\r\n            <EngineOption\r\n              onClick={() => changeEngine('bing')}\r\n              active={engine === 'bing'}\r\n            >\r\n              必应\r\n            </EngineOption>\r\n            <EngineOption\r\n              onClick={() => changeEngine('google')}\r\n              active={engine === 'google'}\r\n            >\r\n              谷歌\r\n            </EngineOption>\r\n            <EngineOption\r\n              onClick={() => changeEngine('baidu')}\r\n              active={engine === 'baidu'}\r\n            >\r\n              百度\r\n            </EngineOption>\r\n            <EngineOption\r\n              onClick={() => changeEngine('sogou')}\r\n              active={engine === 'sogou'}\r\n            >\r\n              搜狗\r\n            </EngineOption>\r\n            <EngineOption\r\n              onClick={() => changeEngine('mita')}\r\n              active={engine === 'mita'}\r\n            >\r\n              秘塔AI\r\n            </EngineOption>\r\n            \r\n            {customEngines.map(customEngine => (\r\n              <EngineOption\r\n                key={customEngine.id}\r\n                onClick={() => changeEngine(customEngine.id)}\r\n                active={engine === customEngine.id}\r\n              >\r\n                {customEngine.name}\r\n              </EngineOption>\r\n            ))}\r\n          </EngineGrid>\r\n          \r\n          <CustomEngineForm>\r\n            <FormRow>\r\n              <Label>名称:</Label>\r\n              <Input \r\n                type=\"text\" \r\n                value={customEngineName}\r\n                onChange={(e) => setCustomEngineName(e.target.value)}\r\n                placeholder=\"自定义引擎名称\"\r\n              />\r\n            </FormRow>\r\n            <FormRow>\r\n              <Label>URL:</Label>\r\n              <Input \r\n                type=\"text\" \r\n                value={customEngineUrl}\r\n                onChange={(e) => setCustomEngineUrl(e.target.value)}\r\n                placeholder=\"https://example.com/search?q={query}\"\r\n              />\r\n            </FormRow>\r\n            <FormRow>\r\n              <SwitchContainer>\r\n                <SwitchLabel>URL清理</SwitchLabel>\r\n                <Switch>\r\n                  <input \r\n                    type=\"checkbox\" \r\n                    checked={autoClean} \r\n                    onChange={toggleAutoClean}\r\n                  />\r\n                  <Slider2 />\r\n                </Switch>\r\n              </SwitchContainer>\r\n              <AddButton onClick={addCustomEngine}>添加自定义引擎</AddButton>\r\n            </FormRow>\r\n          </CustomEngineForm>\r\n          \r\n          {customEngines.length > 0 && (\r\n            <CustomEngineList>\r\n              {customEngines.map((customEngine, index) => (\r\n                editingEngine === customEngine.id ? (\r\n                  <EditForm key={customEngine.id}>\r\n                    <FormRow>\r\n                      <Label>名称:</Label>\r\n                      <Input \r\n                        type=\"text\" \r\n                        value={editName}\r\n                        onChange={(e) => setEditName(e.target.value)}\r\n                      />\r\n                    </FormRow>\r\n                    <FormRow>\r\n                      <Label>URL:</Label>\r\n                      <Input \r\n                        type=\"text\" \r\n                        value={editUrl}\r\n                        onChange={(e) => setEditUrl(e.target.value)}\r\n                      />\r\n                    </FormRow>\r\n                    <EditFormButtons>\r\n                      <EditFormButton onClick={cancelEditEngine}>\r\n                        <CloseIcon fontSize=\"small\" /> 取消\r\n                      </EditFormButton>\r\n                      <EditFormButton primary onClick={saveEditEngine}>\r\n                        <CheckIcon fontSize=\"small\" /> 保存\r\n                      </EditFormButton>\r\n                    </EditFormButtons>\r\n                  </EditForm>\r\n                ) : (\r\n                  <CustomEngineItem key={customEngine.id}>\r\n                    <EngineName active={engine === customEngine.id}>\r\n                      {customEngine.name}\r\n                    </EngineName>\r\n                    <EngineUrl>{customEngine.url}</EngineUrl>\r\n                    <ActionButtons>\r\n                      <TestButton \r\n                        onClick={() => testEngine(customEngine.url)}\r\n                        title=\"测试搜索引擎\"\r\n                      >\r\n                        测试\r\n                      </TestButton>\r\n                      {index > 0 && (\r\n                        <ActionButton \r\n                          onClick={() => moveEngineUp(index)}\r\n                          title=\"上移\"\r\n                        >\r\n                          <ArrowUpwardIcon fontSize=\"small\" />\r\n                        </ActionButton>\r\n                      )}\r\n                      {index < customEngines.length - 1 && (\r\n                        <ActionButton \r\n                          onClick={() => moveEngineDown(index)}\r\n                          title=\"下移\"\r\n                        >\r\n                          <ArrowDownwardIcon fontSize=\"small\" />\r\n                        </ActionButton>\r\n                      )}\r\n                      <ActionButton \r\n                        onClick={() => startEditEngine(customEngine)}\r\n                        title=\"编辑\"\r\n                      >\r\n                        <EditIcon fontSize=\"small\" />\r\n                      </ActionButton>\r\n                      <ActionButton \r\n                        onClick={() => deleteEngine(customEngine.id)}\r\n                        title=\"删除\"\r\n                      >\r\n                        <DeleteIcon fontSize=\"small\" />\r\n                      </ActionButton>\r\n                    </ActionButtons>\r\n                  </CustomEngineItem>\r\n                )\r\n              ))}\r\n            </CustomEngineList>\r\n          )}\r\n        </EngineDropdown>\r\n      )}\r\n    </SearchContainer>\r\n  );\r\n};\r\n\r\nexport default Search;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}