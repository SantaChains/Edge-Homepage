{"ast":null,"code":"import React,{useState,useEffect}from'react';import styled from'styled-components';import{saveToStorage,getFromStorage}from'../../utils/storage';import axios from'axios';import xml2js from'xml2js';// 图标导入\nimport AddIcon from'@mui/icons-material/Add';import EditIcon from'@mui/icons-material/Edit';import DeleteIcon from'@mui/icons-material/Delete';import ArrowBackIcon from'@mui/icons-material/ArrowBack';import RssFeedIcon from'@mui/icons-material/RssFeed';import LinkIcon from'@mui/icons-material/Link';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const NewsContainer=styled.div`\n  width: 100%;\n  height: 100vh;\n  display: flex;\n  flex-direction: column;\n`;const NewsHeader=styled.div`\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  padding: 15px 20px;\n  background-color: var(--card-background);\n  box-shadow: 0 2px 5px var(--shadow-color);\n`;const HeaderTitle=styled.h2`\n  margin: 0;\n  font-size: 20px;\n  font-weight: 500;\n`;const BackButton=styled.button`\n  background-color: var(--primary-color);\n  color: white;\n  border: none;\n  border-radius: 50%;\n  width: 36px;\n  height: 36px;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  cursor: pointer;\n  margin-right: 15px;\n  \n  &:hover {\n    background-color: #3a7bc8;\n  }\n`;const SourcesContainer=styled.div`\n  display: flex;\n  align-items: center;\n  overflow-x: auto;\n  padding: 10px 20px;\n  background-color: var(--background-color);\n  border-bottom: 1px solid var(--border-color);\n  \n  &::-webkit-scrollbar {\n    height: 4px;\n  }\n  \n  &::-webkit-scrollbar-track {\n    background: var(--background-color);\n  }\n  \n  &::-webkit-scrollbar-thumb {\n    background-color: var(--border-color);\n    border-radius: 4px;\n  }\n`;const SourceButton=styled.button`\n  background-color: ${props=>props.active?'var(--primary-color)':'var(--card-background)'};\n  color: ${props=>props.active?'white':'var(--text-color)'};\n  border: none;\n  border-radius: 20px;\n  padding: 8px 15px;\n  margin-right: 10px;\n  cursor: pointer;\n  white-space: nowrap;\n  display: flex;\n  align-items: center;\n  gap: 5px;\n  \n  &:hover {\n    background-color: ${props=>props.active?'var(--primary-color)':'rgba(0, 0, 0, 0.05)'};\n  }\n  \n  svg {\n    font-size: 16px;\n  }\n`;const AddSourceButton=styled.button`\n  background-color: var(--card-background);\n  color: var(--primary-color);\n  border: 1px dashed var(--primary-color);\n  border-radius: 20px;\n  padding: 8px 15px;\n  margin-right: 10px;\n  cursor: pointer;\n  white-space: nowrap;\n  display: flex;\n  align-items: center;\n  gap: 5px;\n  \n  &:hover {\n    background-color: rgba(0, 0, 0, 0.05);\n  }\n`;const NewsContent=styled.div`\n  flex: 1;\n  padding: 20px;\n  overflow-y: auto;\n`;const NewsList=styled.div`\n  display: flex;\n  flex-direction: column;\n  gap: 15px;\n`;const NewsItem=styled.a`\n  display: block;\n  padding: 15px;\n  background-color: var(--card-background);\n  border-radius: 8px;\n  box-shadow: 0 2px 5px var(--shadow-color);\n  cursor: pointer;\n  text-decoration: none;\n  color: var(--text-color);\n  transition: all var(--transition-speed);\n  \n  &:hover {\n    transform: translateY(-3px);\n    box-shadow: 0 5px 15px var(--shadow-color);\n  }\n  \n  &:visited {\n    opacity: 0.7;\n  }\n`;const NewsTitle=styled.h3`\n  margin: 0;\n  font-size: 16px;\n  font-weight: 500;\n`;const NewsDate=styled.div`\n  font-size: 12px;\n  color: var(--text-secondary-color);\n  margin-top: 5px;\n`;const LoadingState=styled.div`\n  text-align: center;\n  padding: 40px 20px;\n  color: var(--text-color);\n`;const ErrorState=styled.div`\n  text-align: center;\n  padding: 40px 20px;\n  color: var(--text-color);\n  color: #e53935;\n`;const EmptyState=styled.div`\n  text-align: center;\n  padding: 40px 20px;\n  color: var(--text-color);\n  opacity: 0.7;\n`;const Modal=styled.div`\n  position: fixed;\n  top: 0;\n  left: 0;\n  right: 0;\n  bottom: 0;\n  background-color: rgba(0, 0, 0, 0.5);\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  z-index: 1000;\n`;const ModalContent=styled.div`\n  background-color: var(--background-color);\n  padding: 20px;\n  border-radius: 8px;\n  width: 90%;\n  max-width: 500px;\n  box-shadow: 0 5px 15px rgba(0, 0, 0, 0.3);\n`;const ModalHeader=styled.div`\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  margin-bottom: 20px;\n`;const ModalTitle=styled.h3`\n  margin: 0;\n  font-size: 18px;\n  font-weight: 500;\n`;const CloseButton=styled.button`\n  background: none;\n  border: none;\n  cursor: pointer;\n  font-size: 20px;\n  color: var(--text-color);\n`;const FormGroup=styled.div`\n  margin-bottom: 15px;\n`;const Label=styled.label`\n  display: block;\n  margin-bottom: 5px;\n  font-size: 14px;\n`;const Input=styled.input`\n  width: 100%;\n  padding: 8px;\n  border: 1px solid var(--border-color);\n  border-radius: 4px;\n  background-color: var(--background-color);\n  color: var(--text-color);\n`;const Select=styled.select`\n  width: 100%;\n  padding: 8px;\n  border: 1px solid var(--border-color);\n  border-radius: 4px;\n  background-color: var(--background-color);\n  color: var(--text-color);\n`;const ButtonGroup=styled.div`\n  display: flex;\n  justify-content: flex-end;\n  gap: 10px;\n  margin-top: 20px;\n`;const Button=styled.button`\n  padding: 8px 16px;\n  border: none;\n  border-radius: 4px;\n  cursor: pointer;\n  font-size: 14px;\n  \n  &.primary {\n    background-color: var(--primary-color);\n    color: white;\n    \n    &:hover {\n      background-color: #3a7bc8;\n    }\n  }\n  \n  &.secondary {\n    background-color: var(--card-background);\n    color: var(--text-color);\n    border: 1px solid var(--border-color);\n    \n    &:hover {\n      background-color: rgba(0, 0, 0, 0.05);\n    }\n  }\n  \n  &.danger {\n    background-color: #e53935;\n    color: white;\n    \n    &:hover {\n      background-color: #c62828;\n    }\n  }\n`;const SourcesList=styled.div`\n  display: flex;\n  flex-direction: column;\n  gap: 10px;\n  margin-top: 20px;\n`;const SourceItem=styled.div`\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  padding: 10px;\n  background-color: var(--card-background);\n  border-radius: 4px;\n  border-left: 3px solid ${props=>props.type==='rss'?'#ff9800':'#2196f3'};\n`;const SourceInfo=styled.div`\n  display: flex;\n  align-items: center;\n  gap: 10px;\n`;const SourceName=styled.div`\n  font-weight: 500;\n`;const SourceUrl=styled.div`\n  font-size: 12px;\n  color: var(--text-secondary-color);\n  word-break: break-all;\n`;const SourceActions=styled.div`\n  display: flex;\n  gap: 5px;\n`;const ActionIconButton=styled.button`\n  background-color: transparent;\n  border: none;\n  border-radius: 50%;\n  width: 30px;\n  height: 30px;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  cursor: pointer;\n  color: var(--text-secondary-color);\n  \n  &:hover {\n    background-color: rgba(0, 0, 0, 0.05);\n    color: var(--primary-color);\n  }\n  \n  &.delete:hover {\n    color: #e53935;\n  }\n`;// 代理服务器URL，用于解决跨域问题\n// 提供多个代理服务器，如果一个失败可以尝试另一个\nconst CORS_PROXIES=['https://corsproxy.io/?','https://api.allorigins.win/raw?url=','https://cors-anywhere.herokuapp.com/','https://crossorigin.me/'];// 特殊网站的RSS源映射\nconst SPECIAL_RSS_SOURCES={// 知乎\n'www.zhihu.com/rss':'https://www.zhihu.com/rss','zhihu.com/rss':'https://www.zhihu.com/rss',// 可以添加更多特殊网站的映射\n'52pojie.cn':'https://www.52pojie.cn/forum.php?mod=guide&view=newthread&rss=1'};// 特殊网站的处理函数\nconst SPECIAL_SITE_HANDLERS={// 知乎处理函数\n'zhihu.com':async source=>{// 知乎不提供官方RSS，我们可以使用第三方服务\n// 尝试多个可能的RSS源\nconst zhihuRssSources=['https://rsshub.app/zhihu/daily','https://rsshub.app/zhihu/hotlist','https://www.zhihu.com/rss','https://rsshub.app/zhihu/people/activities/zhang-jia-wei'];console.log('尝试获取知乎RSS');// 尝试每个RSS源\nfor(const rssUrl of zhihuRssSources){try{console.log(`尝试知乎RSS源: ${rssUrl}`);const response=await fetch(rssUrl,{headers:{'User-Agent':'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/91.0.4472.124 Safari/537.36'}});if(!response.ok){console.log(`知乎RSS源 ${rssUrl} 返回状态码: ${response.status}`);continue;}const xmlData=await response.text();if(xmlData&&(xmlData.includes('<rss')||xmlData.includes('<feed')||xmlData.includes('<rdf:RDF'))){console.log(`成功获取知乎RSS: ${rssUrl}`);return{success:true,data:xmlData};}else{console.log(`知乎RSS源 ${rssUrl} 返回的不是有效的XML`);}}catch(error){console.error(`获取知乎RSS源 ${rssUrl} 失败:`,error);}}// 如果所有尝试都失败，返回一些静态内容\nconsole.log('所有知乎RSS源都失败，返回静态内容');const staticContent=`\n    <?xml version=\"1.0\" encoding=\"UTF-8\"?>\n    <rss version=\"2.0\">\n      <channel>\n        <title>知乎热门</title>\n        <link>https://www.zhihu.com</link>\n        <description>知乎热门内容</description>\n        <item>\n          <title>知乎RSS加载失败 - 请稍后再试</title>\n          <link>https://www.zhihu.com</link>\n          <pubDate>${new Date().toUTCString()}</pubDate>\n          <description>由于知乎限制，RSS加载失败。请稍后再试或直接访问知乎网站。</description>\n        </item>\n      </channel>\n    </rss>`;return{success:true,data:staticContent};},// 52pojie处理函数\n'52pojie.cn':async source=>{// 尝试多个可能的RSS源\nconst pojieRssSources=['https://rsshub.app/52pojie/index','https://rsshub.app/52pojie/forum/16','https://www.52pojie.cn/forum.php?mod=guide&view=newthread&rss=1'];console.log('尝试获取52pojie RSS');// 尝试每个RSS源\nfor(const rssUrl of pojieRssSources){try{console.log(`尝试52pojie RSS源: ${rssUrl}`);// 使用axios获取二进制数据以处理GBK编码\nconst response=await axios.get(rssUrl,{headers:{'User-Agent':'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/91.0.4472.124 Safari/537.36','Referer':'https://www.52pojie.cn/'},responseType:'arraybuffer'// 获取二进制数据\n});if(response.status!==200){console.log(`52pojie RSS源 ${rssUrl} 返回状态码: ${response.status}`);continue;}// 检测编码并转换\nlet encoding='utf-8';const contentType=response.headers['content-type']||'';if(contentType.includes('charset=gbk')||contentType.includes('charset=gb2312')){encoding='gbk';}else{// 尝试从内容中检测编码\nconst buffer=Buffer.from(response.data);const str=buffer.toString().substring(0,1000);if(str.includes('encoding=\"gbk\"')||str.includes('encoding=\"gb2312\"')){encoding='gbk';}}// 使用TextDecoder转换编码\nlet xmlData;if(encoding.toLowerCase()==='gbk'||encoding.toLowerCase()==='gb2312'){console.log(`检测到GBK编码，进行转换`);// 浏览器环境下使用TextDecoder\nconst decoder=new TextDecoder(encoding);xmlData=decoder.decode(new Uint8Array(response.data));}else{xmlData=new TextDecoder('utf-8').decode(new Uint8Array(response.data));}if(xmlData&&(xmlData.includes('<rss')||xmlData.includes('<feed')||xmlData.includes('<rdf:RDF'))){console.log(`成功获取52pojie RSS: ${rssUrl}`);// 将GBK编码的XML转换为UTF-8\nxmlData=xmlData.replace(/encoding=\"gbk\"/i,'encoding=\"utf-8\"').replace(/encoding=\"gb2312\"/i,'encoding=\"utf-8\"');return{success:true,data:xmlData};}else{console.log(`52pojie RSS源 ${rssUrl} 返回的不是有效的XML`);}}catch(error){console.error(`获取52pojie RSS源 ${rssUrl} 失败:`,error);}}// 如果所有尝试都失败，返回一些静态内容\nconsole.log('所有52pojie RSS源都失败，返回静态内容');const staticContent=`\n    <?xml version=\"1.0\" encoding=\"UTF-8\"?>\n    <rss version=\"2.0\">\n      <channel>\n        <title>吾爱破解</title>\n        <link>https://www.52pojie.cn</link>\n        <description>吾爱破解论坛</description>\n        <item>\n          <title>吾爱破解RSS加载失败 - 请稍后再试</title>\n          <link>https://www.52pojie.cn</link>\n          <pubDate>${new Date().toUTCString()}</pubDate>\n          <description>由于网站限制，RSS加载失败。请稍后再试或直接访问吾爱破解网站。</description>\n        </item>\n      </channel>\n    </rss>`;return{success:true,data:staticContent};}};const News=()=>{// 状态\nconst[sources,setSources]=useState([]);const[activeSource,setActiveSource]=useState(null);const[newsItems,setNewsItems]=useState([]);const[loading,setLoading]=useState(false);const[error,setError]=useState(null);const[showModal,setShowModal]=useState(false);const[showSourcesModal,setShowSourcesModal]=useState(false);const[editingSource,setEditingSource]=useState(null);const[formData,setFormData]=useState({name:'',url:'',type:'rss'// rss 或 html\n});// 初始化数据\nuseEffect(()=>{const savedSources=getFromStorage('homepage-news-sources',[]);setSources(savedSources);if(savedSources.length>0){setActiveSource(savedSources[0]);}},[]);// 当活动源变化时，加载新闻\nuseEffect(()=>{if(activeSource){loadNews(activeSource);}},[activeSource]);// 加载新闻\nconst loadNews=async source=>{setLoading(true);setError(null);setNewsItems([]);try{if(source.type==='rss'){await loadRssNews(source);}else{await loadHtmlNews(source);}}catch(err){console.error('加载新闻失败:',err);setError(`加载失败: ${err.message}`);}finally{setLoading(false);}};// 加载RSS新闻\nconst loadRssNews=async source=>{let lastError=null;// 首先尝试特殊网站处理\nfor(const domain in SPECIAL_SITE_HANDLERS){if(source.url.includes(domain)){console.log(`检测到特殊网站: ${domain}，使用特殊处理`);try{const result=await SPECIAL_SITE_HANDLERS[domain](source);if(result.success){// 直接使用返回的数据，跳过代理\nconst xmlData=result.data;try{// 解析XML\nlet parsePromise=new Promise((resolve,reject)=>{xml2js.parseString(xmlData,{explicitArray:false,ignoreAttrs:true,trim:true,normalize:true,normalizeTags:true,mergeAttrs:true,explicitRoot:false},(err,result)=>{if(err){console.error('XML解析错误:',err);reject(new Error('解析RSS失败'));return;}resolve(result);});});const parsedResult=await parsePromise;processRssResult(parsedResult);return;// 成功处理，直接返回\n}catch(parseError){console.error(`解析特殊网站 ${domain} 的XML失败:`,parseError);// 继续尝试其他方法\n}}}catch(specialError){console.error(`特殊处理 ${domain} 失败:`,specialError);// 继续使用常规方法\n}}}// 尝试所有代理服务器\nfor(const proxy of CORS_PROXIES){try{console.log(`尝试使用代理: ${proxy} 加载: ${source.url}`);// 检查是否是特殊网站\nlet targetUrl=source.url;let headers={'Accept':'application/rss+xml, application/xml, text/xml, */*','User-Agent':'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/91.0.4472.124 Safari/537.36'};// 检查是否有特殊的RSS源映射\nfor(const sourceUrl in SPECIAL_RSS_SOURCES){if(source.url.includes(sourceUrl)){targetUrl=SPECIAL_RSS_SOURCES[sourceUrl];console.log(`使用特殊RSS源映射: ${targetUrl}`);break;}}// 使用代理服务器解决跨域问题\nconst response=await axios.get(`${proxy}${encodeURIComponent(targetUrl)}`,{headers});const xmlData=response.data;// 如果返回的是HTML而不是XML，尝试提取RSS链接\nif(typeof xmlData==='string'&&xmlData.includes('<!DOCTYPE html>')){console.log('返回了HTML而不是XML，尝试提取RSS链接');// 创建一个临时的DOM元素来解析HTML\nconst parser=new DOMParser();const doc=parser.parseFromString(xmlData,'text/html');// 尝试找到RSS链接\nconst rssLinks=Array.from(doc.querySelectorAll('link[type=\"application/rss+xml\"], link[type=\"application/atom+xml\"]'));if(rssLinks.length>0){const rssUrl=rssLinks[0].getAttribute('href');console.log(`找到RSS链接: ${rssUrl}`);// 处理相对URL\nlet absoluteRssUrl=rssUrl;if(rssUrl.startsWith('/')){const urlObj=new URL(targetUrl);absoluteRssUrl=`${urlObj.protocol}//${urlObj.host}${rssUrl}`;}// 递归调用，使用找到的RSS链接\nconst newSource={...source,url:absoluteRssUrl};return loadRssNews(newSource);}else{throw new Error('返回的是HTML而不是RSS，且未找到RSS链接');}}// 解析XML\nlet parsePromise=new Promise((resolve,reject)=>{xml2js.parseString(xmlData,{explicitArray:false,ignoreAttrs:false,trim:true,normalize:true,normalizeTags:false,mergeAttrs:true,explicitRoot:false},(err,result)=>{if(err){console.error('XML解析错误:',err);reject(new Error('解析RSS失败'));return;}resolve(result);});});try{const parsedResult=await parsePromise;processRssResult(parsedResult);return;// 成功处理，直接返回\n}catch(parseError){console.error('XML解析失败:',parseError);// 尝试使用更宽松的解析选项\ntry{let fallbackParsePromise=new Promise((resolve,reject)=>{xml2js.parseString(xmlData,{strict:false,explicitArray:false,ignoreAttrs:true,trim:true},(err,result)=>{if(err){reject(err);return;}resolve(result);});});const fallbackResult=await fallbackParsePromise;processRssResult(fallbackResult);return;// 成功处理，直接返回\n}catch(fallbackError){console.error('备用XML解析也失败:',fallbackError);// 继续尝试其他代理\n}}}catch(error){console.error(`使用代理 ${proxy} 加载失败:`,error);lastError=error;// 继续尝试下一个代理\n}}// 所有代理都失败了\nconsole.error('所有代理服务器都失败了');throw lastError||new Error('加载RSS失败: 所有代理服务器都失败了');};// 处理RSS解析结果\nconst processRssResult=result=>{let items=[];try{// 处理不同的RSS格式\nif(result.rss&&result.rss.channel&&result.rss.channel[0].item){// 标准RSS 2.0\nitems=result.rss.channel[0].item.map(item=>{try{return{title:item.title?typeof item.title[0]==='string'?item.title[0]:item.title[0]&&item.title[0]._?item.title[0]._:'无标题':'无标题',link:item.link?typeof item.link[0]==='string'?item.link[0]:item.link[0]&&item.link[0]._?item.link[0]._:'#':'#',date:item.pubDate?new Date(item.pubDate[0]):new Date(),description:item.description?typeof item.description[0]==='string'?item.description[0]:item.description[0]&&item.description[0]._?item.description[0]._:'':''};}catch(itemError){console.error('处理RSS项目时出错:',itemError);return{title:'解析错误',link:'#',date:new Date(),description:'无法解析此项目'};}});}else if(result.feed&&result.feed.entry){// Atom格式\nitems=result.feed.entry.map(entry=>{// 处理链接\nlet link='#';if(entry.link){if(Array.isArray(entry.link)){const linkObj=entry.link.find(l=>l.$&&(l.$.rel==='alternate'||!l.$.rel));if(linkObj&&linkObj.$&&linkObj.$.href){link=linkObj.$.href;}else if(entry.link[0]&&entry.link[0].$&&entry.link[0].$.href){link=entry.link[0].$.href;}}else if(typeof entry.link==='string'){link=entry.link;}}// 处理标题\nlet title='无标题';if(entry.title){if(typeof entry.title[0]==='string'){title=entry.title[0];}else if(entry.title[0]&&entry.title[0]._){title=entry.title[0]._;}else if(typeof entry.title==='string'){title=entry.title;}}// 处理日期\nlet date=new Date();if(entry.updated){date=new Date(typeof entry.updated[0]==='string'?entry.updated[0]:entry.updated);}else if(entry.published){date=new Date(typeof entry.published[0]==='string'?entry.published[0]:entry.published);}// 处理描述\nlet description='';if(entry.summary){description=typeof entry.summary[0]==='string'?entry.summary[0]:entry.summary[0]&&entry.summary[0]._?entry.summary[0]._:'';}else if(entry.content){description=typeof entry.content[0]==='string'?entry.content[0]:entry.content[0]&&entry.content[0]._?entry.content[0]._:'';}return{title,link,date,description};});}else if(result['rdf:RDF']){// RDF格式\nconst rdfItems=result['rdf:RDF'].item||result['rdf:RDF'].channel&&result['rdf:RDF'].channel[0]&&result['rdf:RDF'].channel[0].item;if(rdfItems){items=rdfItems.map(item=>({title:item.title?typeof item.title[0]==='string'?item.title[0]:item.title[0]._:'无标题',link:item.link?typeof item.link[0]==='string'?item.link[0]:item.link[0]._:'#',date:item['dc:date']?new Date(item['dc:date'][0]):new Date(),description:item.description?typeof item.description[0]==='string'?item.description[0]:item.description[0]._:''}));}}else{// 尝试遍历结果找到可能的项目\nconst findItems=function(obj){let depth=arguments.length>1&&arguments[1]!==undefined?arguments[1]:0;if(!obj||typeof obj!=='object'||depth>5)return null;// 直接查找item或entry数组\nif(obj.item&&Array.isArray(obj.item)){return obj.item.map(item=>({title:extractTextContent(item.title)||'无标题',link:extractTextContent(item.link)||'#',date:item.pubDate?new Date(extractTextContent(item.pubDate)):new Date(),description:extractTextContent(item.description)||''}));}if(obj.entry&&Array.isArray(obj.entry)){return obj.entry.map(entry=>({title:extractTextContent(entry.title)||'无标题',link:extractLinkFromEntry(entry)||'#',date:entry.updated?new Date(extractTextContent(entry.updated)):new Date(),description:extractTextContent(entry.summary||entry.content)||''}));}// 递归查找\nfor(const key in obj){if(typeof obj[key]==='object'&&obj[key]!==null){const found=findItems(obj[key],depth+1);if(found&&found.length>0)return found;}}return null;};// 辅助函数：从各种可能的格式中提取文本内容\nconst extractTextContent=value=>{if(!value)return'';if(typeof value==='string')return value;if(Array.isArray(value)){if(value.length===0)return'';if(typeof value[0]==='string')return value[0];if(value[0]&&value[0]._)return value[0]._;if(value[0]&&typeof value[0]==='object'){for(const key in value[0]){if(typeof value[0][key]==='string')return value[0][key];}}}return'';};// 辅助函数：从entry对象中提取链接\nconst extractLinkFromEntry=entry=>{if(!entry.link)return'';if(typeof entry.link==='string')return entry.link;if(Array.isArray(entry.link)){for(const link of entry.link){if(typeof link==='string')return link;if(link.$&&link.$.href)return link.$.href;}}return'';};const foundItems=findItems(result);if(foundItems&&foundItems.length>0){items=foundItems;}else{console.error('未找到支持的RSS格式:',result);throw new Error('不支持的RSS格式');}}// 成功获取到新闻项，设置状态\nsetNewsItems(items);}catch(parseError){console.error('RSS内容解析错误:',parseError,result);throw new Error('RSS内容解析失败');}};// 加载HTML新闻\nconst loadHtmlNews=async source=>{try{// 尝试所有代理服务器\nfor(const proxy of CORS_PROXIES){try{console.log(`尝试使用代理: ${proxy} 加载HTML: ${source.url}`);const response=await axios.get(`${proxy}${encodeURIComponent(source.url)}`);const htmlData=response.data;if(htmlData){// 创建一个临时的DOM元素来解析HTML\nconst parser=new DOMParser();const doc=parser.parseFromString(htmlData,'text/html');// 尝试找到新闻标题\n// 这里使用一些常见的选择器，可能需要根据具体网站调整\nconst headings=Array.from(doc.querySelectorAll('h1, h2, h3, .title, .headline, article header'));const items=headings.map(heading=>{// 尝试找到链接\nlet link='#';const linkElement=heading.querySelector('a')||heading.closest('a');if(linkElement&&linkElement.href){// 处理相对URL\nif(linkElement.href.startsWith('/')){const url=new URL(source.url);link=`${url.protocol}//${url.host}${linkElement.href}`;}else{link=linkElement.href;}}return{title:heading.textContent.trim(),link,date:new Date(),description:''};}).filter(item=>item.title);// 过滤掉空标题\nif(items.length>0){setNewsItems(items);return;// 成功处理，直接返回\n}}}catch(proxyError){console.error(`使用代理 ${proxy} 加载HTML失败:`,proxyError);// 继续尝试下一个代理\n}}// 所有代理都失败了\nthrow new Error('所有代理服务器都失败了');}catch(error){console.error('加载HTML失败:',error);throw new Error('加载HTML失败');}};// 打开添加源模态框\nconst openAddSourceModal=()=>{setEditingSource(null);setFormData({name:'',url:'',type:'rss'});setShowModal(true);};// 打开编辑源模态框\nconst openEditSourceModal=source=>{setEditingSource(source);setFormData({name:source.name,url:source.url,type:source.type});setShowModal(true);};// 关闭模态框\nconst closeModal=()=>{setShowModal(false);setEditingSource(null);};// 打开源列表模态框\nconst openSourcesModal=()=>{setShowSourcesModal(true);};// 关闭源列表模态框\nconst closeSourcesModal=()=>{setShowSourcesModal(false);};// 处理表单输入变化\nconst handleInputChange=e=>{const{name,value}=e.target;setFormData(prev=>({...prev,[name]:value}));};// 保存源\nconst saveSource=()=>{if(!formData.name.trim()||!formData.url.trim()){alert('请填写完整信息');return;}const newSource={id:editingSource?editingSource.id:Date.now(),name:formData.name.trim(),url:formData.url.trim(),type:formData.type};let updatedSources;if(editingSource){// 编辑现有源\nupdatedSources=sources.map(source=>source.id===editingSource.id?newSource:source);}else{// 添加新源\nupdatedSources=[...sources,newSource];}setSources(updatedSources);saveToStorage('homepage-news-sources',updatedSources);// 如果是第一个源，或者是新添加的源，自动设为活动源\nif(sources.length===0||!editingSource){setActiveSource(newSource);}// 关闭所有模态框\ncloseModal();closeSourcesModal();};// 删除源\nconst deleteSource=id=>{if(window.confirm('确定要删除这个新闻源吗？')){const updatedSources=sources.filter(source=>source.id!==id);setSources(updatedSources);saveToStorage('homepage-news-sources',updatedSources);// 如果删除的是当前活动源，切换到第一个源\nif(activeSource&&activeSource.id===id){if(updatedSources.length>0){setActiveSource(updatedSources[0]);}else{setActiveSource(null);setNewsItems([]);}}// 如果是在源列表模态框中删除，不关闭模态框\nif(!showSourcesModal){closeModal();}}};// 返回主页\nconst goBack=()=>{window.history.back();};return/*#__PURE__*/_jsxs(NewsContainer,{children:[/*#__PURE__*/_jsx(NewsHeader,{children:/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',alignItems:'center'},children:[/*#__PURE__*/_jsx(BackButton,{onClick:goBack,title:\"\\u8FD4\\u56DE\",children:/*#__PURE__*/_jsx(ArrowBackIcon,{})}),/*#__PURE__*/_jsx(HeaderTitle,{children:\"\\u65B0\\u95FB\"})]})}),/*#__PURE__*/_jsxs(SourcesContainer,{children:[sources.map(source=>/*#__PURE__*/_jsxs(SourceButton,{active:activeSource&&activeSource.id===source.id,onClick:()=>setActiveSource(source),children:[source.type==='rss'?/*#__PURE__*/_jsx(RssFeedIcon,{}):/*#__PURE__*/_jsx(LinkIcon,{}),source.name]},source.id)),/*#__PURE__*/_jsxs(AddSourceButton,{onClick:openSourcesModal,children:[/*#__PURE__*/_jsx(AddIcon,{}),\"\\u7BA1\\u7406\\u6E90\"]})]}),/*#__PURE__*/_jsx(NewsContent,{children:loading?/*#__PURE__*/_jsx(LoadingState,{children:\"\\u52A0\\u8F7D\\u4E2D...\"}):error?/*#__PURE__*/_jsx(ErrorState,{children:error}):newsItems.length>0?/*#__PURE__*/_jsx(NewsList,{children:newsItems.map((item,index)=>/*#__PURE__*/_jsxs(NewsItem,{href:item.link,target:\"_blank\",rel:\"noopener noreferrer\",children:[/*#__PURE__*/_jsx(NewsTitle,{children:item.title}),item.date&&/*#__PURE__*/_jsx(NewsDate,{children:item.date.toLocaleDateString('zh-CN',{year:'numeric',month:'long',day:'numeric'})})]},index))}):activeSource?/*#__PURE__*/_jsx(EmptyState,{children:/*#__PURE__*/_jsx(\"p\",{children:\"\\u6CA1\\u6709\\u627E\\u5230\\u65B0\\u95FB\"})}):/*#__PURE__*/_jsx(EmptyState,{children:/*#__PURE__*/_jsx(\"p\",{children:\"\\u8BF7\\u6DFB\\u52A0\\u65B0\\u95FB\\u6E90\"})})}),showModal&&/*#__PURE__*/_jsx(Modal,{children:/*#__PURE__*/_jsxs(ModalContent,{children:[/*#__PURE__*/_jsxs(ModalHeader,{children:[/*#__PURE__*/_jsx(ModalTitle,{children:editingSource?'编辑新闻源':'添加新闻源'}),/*#__PURE__*/_jsx(CloseButton,{onClick:closeModal,children:\"\\xD7\"})]}),/*#__PURE__*/_jsxs(FormGroup,{children:[/*#__PURE__*/_jsx(Label,{children:\"\\u540D\\u79F0\"}),/*#__PURE__*/_jsx(Input,{type:\"text\",name:\"name\",value:formData.name,onChange:handleInputChange,placeholder:\"\\u65B0\\u95FB\\u6E90\\u540D\\u79F0\"})]}),/*#__PURE__*/_jsxs(FormGroup,{children:[/*#__PURE__*/_jsx(Label,{children:\"\\u7C7B\\u578B\"}),/*#__PURE__*/_jsxs(Select,{name:\"type\",value:formData.type,onChange:handleInputChange,children:[/*#__PURE__*/_jsx(\"option\",{value:\"rss\",children:\"RSS \\u8BA2\\u9605\"}),/*#__PURE__*/_jsx(\"option\",{value:\"html\",children:\"\\u7F51\\u9875\"})]})]}),/*#__PURE__*/_jsxs(FormGroup,{children:[/*#__PURE__*/_jsx(Label,{children:\"URL\"}),/*#__PURE__*/_jsx(Input,{type:\"text\",name:\"url\",value:formData.url,onChange:handleInputChange,placeholder:formData.type==='rss'?'RSS 订阅地址':'网页地址'})]}),/*#__PURE__*/_jsxs(ButtonGroup,{children:[editingSource&&/*#__PURE__*/_jsx(Button,{className:\"danger\",onClick:()=>deleteSource(editingSource.id),children:\"\\u5220\\u9664\"}),/*#__PURE__*/_jsx(Button,{className:\"secondary\",onClick:closeModal,children:\"\\u53D6\\u6D88\"}),/*#__PURE__*/_jsx(Button,{className:\"primary\",onClick:saveSource,children:\"\\u4FDD\\u5B58\"})]})]})}),showSourcesModal&&/*#__PURE__*/_jsx(Modal,{children:/*#__PURE__*/_jsxs(ModalContent,{children:[/*#__PURE__*/_jsxs(ModalHeader,{children:[/*#__PURE__*/_jsx(ModalTitle,{children:\"\\u7BA1\\u7406\\u65B0\\u95FB\\u6E90\"}),/*#__PURE__*/_jsx(CloseButton,{onClick:closeSourcesModal,children:\"\\xD7\"})]}),/*#__PURE__*/_jsxs(Button,{className:\"primary\",onClick:openAddSourceModal,style:{width:'100%'},children:[/*#__PURE__*/_jsx(AddIcon,{}),\" \\u6DFB\\u52A0\\u65B0\\u95FB\\u6E90\"]}),/*#__PURE__*/_jsxs(SourcesList,{children:[sources.map(source=>/*#__PURE__*/_jsxs(SourceItem,{type:source.type,children:[/*#__PURE__*/_jsxs(SourceInfo,{children:[source.type==='rss'?/*#__PURE__*/_jsx(RssFeedIcon,{}):/*#__PURE__*/_jsx(LinkIcon,{}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(SourceName,{children:source.name}),/*#__PURE__*/_jsx(SourceUrl,{children:source.url})]})]}),/*#__PURE__*/_jsxs(SourceActions,{children:[/*#__PURE__*/_jsx(ActionIconButton,{onClick:()=>openEditSourceModal(source),children:/*#__PURE__*/_jsx(EditIcon,{fontSize:\"small\"})}),/*#__PURE__*/_jsx(ActionIconButton,{className:\"delete\",onClick:()=>deleteSource(source.id),children:/*#__PURE__*/_jsx(DeleteIcon,{fontSize:\"small\"})})]})]},source.id)),sources.length===0&&/*#__PURE__*/_jsx(EmptyState,{children:/*#__PURE__*/_jsx(\"p\",{children:\"\\u6682\\u65E0\\u65B0\\u95FB\\u6E90\"})})]}),/*#__PURE__*/_jsx(ButtonGroup,{children:/*#__PURE__*/_jsx(Button,{className:\"secondary\",onClick:closeSourcesModal,children:\"\\u5173\\u95ED\"})})]})})]});};export default News;","map":{"version":3,"names":["React","useState","useEffect","styled","saveToStorage","getFromStorage","axios","xml2js","AddIcon","EditIcon","DeleteIcon","ArrowBackIcon","RssFeedIcon","LinkIcon","jsx","_jsx","jsxs","_jsxs","NewsContainer","div","NewsHeader","HeaderTitle","h2","BackButton","button","SourcesContainer","SourceButton","props","active","AddSourceButton","NewsContent","NewsList","NewsItem","a","NewsTitle","h3","NewsDate","LoadingState","ErrorState","EmptyState","Modal","ModalContent","ModalHeader","ModalTitle","CloseButton","FormGroup","Label","label","Input","input","Select","select","ButtonGroup","Button","SourcesList","SourceItem","type","SourceInfo","SourceName","SourceUrl","SourceActions","ActionIconButton","CORS_PROXIES","SPECIAL_RSS_SOURCES","SPECIAL_SITE_HANDLERS","source","zhihuRssSources","console","log","rssUrl","response","fetch","headers","ok","status","xmlData","text","includes","success","data","error","staticContent","Date","toUTCString","pojieRssSources","get","responseType","encoding","contentType","buffer","Buffer","from","str","toString","substring","toLowerCase","decoder","TextDecoder","decode","Uint8Array","replace","News","sources","setSources","activeSource","setActiveSource","newsItems","setNewsItems","loading","setLoading","setError","showModal","setShowModal","showSourcesModal","setShowSourcesModal","editingSource","setEditingSource","formData","setFormData","name","url","savedSources","length","loadNews","loadRssNews","loadHtmlNews","err","message","lastError","domain","result","parsePromise","Promise","resolve","reject","parseString","explicitArray","ignoreAttrs","trim","normalize","normalizeTags","mergeAttrs","explicitRoot","Error","parsedResult","processRssResult","parseError","specialError","proxy","targetUrl","sourceUrl","encodeURIComponent","parser","DOMParser","doc","parseFromString","rssLinks","Array","querySelectorAll","getAttribute","absoluteRssUrl","startsWith","urlObj","URL","protocol","host","newSource","fallbackParsePromise","strict","fallbackResult","fallbackError","items","rss","channel","item","map","title","_","link","date","pubDate","description","itemError","feed","entry","isArray","linkObj","find","l","$","rel","href","updated","published","summary","content","rdfItems","findItems","obj","depth","arguments","undefined","extractTextContent","extractLinkFromEntry","key","found","value","foundItems","htmlData","headings","heading","linkElement","querySelector","closest","textContent","filter","proxyError","openAddSourceModal","openEditSourceModal","closeModal","openSourcesModal","closeSourcesModal","handleInputChange","e","target","prev","saveSource","alert","id","now","updatedSources","deleteSource","window","confirm","goBack","history","back","children","style","display","alignItems","onClick","index","toLocaleDateString","year","month","day","onChange","placeholder","className","width","fontSize"],"sources":["D:/Jliu Pureey/Documents/Editor/extion/homepage/src/modules/News/News.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport styled from 'styled-components';\r\nimport { saveToStorage, getFromStorage } from '../../utils/storage';\r\nimport axios from 'axios';\r\nimport xml2js from 'xml2js';\r\n\r\n// 图标导入\r\nimport AddIcon from '@mui/icons-material/Add';\r\nimport EditIcon from '@mui/icons-material/Edit';\r\nimport DeleteIcon from '@mui/icons-material/Delete';\r\nimport ArrowBackIcon from '@mui/icons-material/ArrowBack';\r\nimport RssFeedIcon from '@mui/icons-material/RssFeed';\r\nimport LinkIcon from '@mui/icons-material/Link';\r\n\r\nconst NewsContainer = styled.div`\r\n  width: 100%;\r\n  height: 100vh;\r\n  display: flex;\r\n  flex-direction: column;\r\n`;\r\n\r\nconst NewsHeader = styled.div`\r\n  display: flex;\r\n  justify-content: space-between;\r\n  align-items: center;\r\n  padding: 15px 20px;\r\n  background-color: var(--card-background);\r\n  box-shadow: 0 2px 5px var(--shadow-color);\r\n`;\r\n\r\nconst HeaderTitle = styled.h2`\r\n  margin: 0;\r\n  font-size: 20px;\r\n  font-weight: 500;\r\n`;\r\n\r\nconst BackButton = styled.button`\r\n  background-color: var(--primary-color);\r\n  color: white;\r\n  border: none;\r\n  border-radius: 50%;\r\n  width: 36px;\r\n  height: 36px;\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n  cursor: pointer;\r\n  margin-right: 15px;\r\n  \r\n  &:hover {\r\n    background-color: #3a7bc8;\r\n  }\r\n`;\r\n\r\nconst SourcesContainer = styled.div`\r\n  display: flex;\r\n  align-items: center;\r\n  overflow-x: auto;\r\n  padding: 10px 20px;\r\n  background-color: var(--background-color);\r\n  border-bottom: 1px solid var(--border-color);\r\n  \r\n  &::-webkit-scrollbar {\r\n    height: 4px;\r\n  }\r\n  \r\n  &::-webkit-scrollbar-track {\r\n    background: var(--background-color);\r\n  }\r\n  \r\n  &::-webkit-scrollbar-thumb {\r\n    background-color: var(--border-color);\r\n    border-radius: 4px;\r\n  }\r\n`;\r\n\r\nconst SourceButton = styled.button`\r\n  background-color: ${props => props.active ? 'var(--primary-color)' : 'var(--card-background)'};\r\n  color: ${props => props.active ? 'white' : 'var(--text-color)'};\r\n  border: none;\r\n  border-radius: 20px;\r\n  padding: 8px 15px;\r\n  margin-right: 10px;\r\n  cursor: pointer;\r\n  white-space: nowrap;\r\n  display: flex;\r\n  align-items: center;\r\n  gap: 5px;\r\n  \r\n  &:hover {\r\n    background-color: ${props => props.active ? 'var(--primary-color)' : 'rgba(0, 0, 0, 0.05)'};\r\n  }\r\n  \r\n  svg {\r\n    font-size: 16px;\r\n  }\r\n`;\r\n\r\nconst AddSourceButton = styled.button`\r\n  background-color: var(--card-background);\r\n  color: var(--primary-color);\r\n  border: 1px dashed var(--primary-color);\r\n  border-radius: 20px;\r\n  padding: 8px 15px;\r\n  margin-right: 10px;\r\n  cursor: pointer;\r\n  white-space: nowrap;\r\n  display: flex;\r\n  align-items: center;\r\n  gap: 5px;\r\n  \r\n  &:hover {\r\n    background-color: rgba(0, 0, 0, 0.05);\r\n  }\r\n`;\r\n\r\nconst NewsContent = styled.div`\r\n  flex: 1;\r\n  padding: 20px;\r\n  overflow-y: auto;\r\n`;\r\n\r\nconst NewsList = styled.div`\r\n  display: flex;\r\n  flex-direction: column;\r\n  gap: 15px;\r\n`;\r\n\r\nconst NewsItem = styled.a`\r\n  display: block;\r\n  padding: 15px;\r\n  background-color: var(--card-background);\r\n  border-radius: 8px;\r\n  box-shadow: 0 2px 5px var(--shadow-color);\r\n  cursor: pointer;\r\n  text-decoration: none;\r\n  color: var(--text-color);\r\n  transition: all var(--transition-speed);\r\n  \r\n  &:hover {\r\n    transform: translateY(-3px);\r\n    box-shadow: 0 5px 15px var(--shadow-color);\r\n  }\r\n  \r\n  &:visited {\r\n    opacity: 0.7;\r\n  }\r\n`;\r\n\r\nconst NewsTitle = styled.h3`\r\n  margin: 0;\r\n  font-size: 16px;\r\n  font-weight: 500;\r\n`;\r\n\r\nconst NewsDate = styled.div`\r\n  font-size: 12px;\r\n  color: var(--text-secondary-color);\r\n  margin-top: 5px;\r\n`;\r\n\r\nconst LoadingState = styled.div`\r\n  text-align: center;\r\n  padding: 40px 20px;\r\n  color: var(--text-color);\r\n`;\r\n\r\nconst ErrorState = styled.div`\r\n  text-align: center;\r\n  padding: 40px 20px;\r\n  color: var(--text-color);\r\n  color: #e53935;\r\n`;\r\n\r\nconst EmptyState = styled.div`\r\n  text-align: center;\r\n  padding: 40px 20px;\r\n  color: var(--text-color);\r\n  opacity: 0.7;\r\n`;\r\n\r\nconst Modal = styled.div`\r\n  position: fixed;\r\n  top: 0;\r\n  left: 0;\r\n  right: 0;\r\n  bottom: 0;\r\n  background-color: rgba(0, 0, 0, 0.5);\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n  z-index: 1000;\r\n`;\r\n\r\nconst ModalContent = styled.div`\r\n  background-color: var(--background-color);\r\n  padding: 20px;\r\n  border-radius: 8px;\r\n  width: 90%;\r\n  max-width: 500px;\r\n  box-shadow: 0 5px 15px rgba(0, 0, 0, 0.3);\r\n`;\r\n\r\nconst ModalHeader = styled.div`\r\n  display: flex;\r\n  justify-content: space-between;\r\n  align-items: center;\r\n  margin-bottom: 20px;\r\n`;\r\n\r\nconst ModalTitle = styled.h3`\r\n  margin: 0;\r\n  font-size: 18px;\r\n  font-weight: 500;\r\n`;\r\n\r\nconst CloseButton = styled.button`\r\n  background: none;\r\n  border: none;\r\n  cursor: pointer;\r\n  font-size: 20px;\r\n  color: var(--text-color);\r\n`;\r\n\r\nconst FormGroup = styled.div`\r\n  margin-bottom: 15px;\r\n`;\r\n\r\nconst Label = styled.label`\r\n  display: block;\r\n  margin-bottom: 5px;\r\n  font-size: 14px;\r\n`;\r\n\r\nconst Input = styled.input`\r\n  width: 100%;\r\n  padding: 8px;\r\n  border: 1px solid var(--border-color);\r\n  border-radius: 4px;\r\n  background-color: var(--background-color);\r\n  color: var(--text-color);\r\n`;\r\n\r\nconst Select = styled.select`\r\n  width: 100%;\r\n  padding: 8px;\r\n  border: 1px solid var(--border-color);\r\n  border-radius: 4px;\r\n  background-color: var(--background-color);\r\n  color: var(--text-color);\r\n`;\r\n\r\nconst ButtonGroup = styled.div`\r\n  display: flex;\r\n  justify-content: flex-end;\r\n  gap: 10px;\r\n  margin-top: 20px;\r\n`;\r\n\r\nconst Button = styled.button`\r\n  padding: 8px 16px;\r\n  border: none;\r\n  border-radius: 4px;\r\n  cursor: pointer;\r\n  font-size: 14px;\r\n  \r\n  &.primary {\r\n    background-color: var(--primary-color);\r\n    color: white;\r\n    \r\n    &:hover {\r\n      background-color: #3a7bc8;\r\n    }\r\n  }\r\n  \r\n  &.secondary {\r\n    background-color: var(--card-background);\r\n    color: var(--text-color);\r\n    border: 1px solid var(--border-color);\r\n    \r\n    &:hover {\r\n      background-color: rgba(0, 0, 0, 0.05);\r\n    }\r\n  }\r\n  \r\n  &.danger {\r\n    background-color: #e53935;\r\n    color: white;\r\n    \r\n    &:hover {\r\n      background-color: #c62828;\r\n    }\r\n  }\r\n`;\r\n\r\nconst SourcesList = styled.div`\r\n  display: flex;\r\n  flex-direction: column;\r\n  gap: 10px;\r\n  margin-top: 20px;\r\n`;\r\n\r\nconst SourceItem = styled.div`\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: space-between;\r\n  padding: 10px;\r\n  background-color: var(--card-background);\r\n  border-radius: 4px;\r\n  border-left: 3px solid ${props => props.type === 'rss' ? '#ff9800' : '#2196f3'};\r\n`;\r\n\r\nconst SourceInfo = styled.div`\r\n  display: flex;\r\n  align-items: center;\r\n  gap: 10px;\r\n`;\r\n\r\nconst SourceName = styled.div`\r\n  font-weight: 500;\r\n`;\r\n\r\nconst SourceUrl = styled.div`\r\n  font-size: 12px;\r\n  color: var(--text-secondary-color);\r\n  word-break: break-all;\r\n`;\r\n\r\nconst SourceActions = styled.div`\r\n  display: flex;\r\n  gap: 5px;\r\n`;\r\n\r\nconst ActionIconButton = styled.button`\r\n  background-color: transparent;\r\n  border: none;\r\n  border-radius: 50%;\r\n  width: 30px;\r\n  height: 30px;\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n  cursor: pointer;\r\n  color: var(--text-secondary-color);\r\n  \r\n  &:hover {\r\n    background-color: rgba(0, 0, 0, 0.05);\r\n    color: var(--primary-color);\r\n  }\r\n  \r\n  &.delete:hover {\r\n    color: #e53935;\r\n  }\r\n`;\r\n\r\n// 代理服务器URL，用于解决跨域问题\r\n// 提供多个代理服务器，如果一个失败可以尝试另一个\r\nconst CORS_PROXIES = [\r\n  'https://corsproxy.io/?',\r\n  'https://api.allorigins.win/raw?url=',\r\n  'https://cors-anywhere.herokuapp.com/',\r\n  'https://crossorigin.me/'\r\n];\r\n\r\n// 特殊网站的RSS源映射\r\nconst SPECIAL_RSS_SOURCES = {\r\n  // 知乎\r\n  'www.zhihu.com/rss': 'https://www.zhihu.com/rss',\r\n  'zhihu.com/rss': 'https://www.zhihu.com/rss',\r\n  // 可以添加更多特殊网站的映射\r\n  '52pojie.cn': 'https://www.52pojie.cn/forum.php?mod=guide&view=newthread&rss=1'\r\n};\r\n\r\n// 特殊网站的处理函数\r\nconst SPECIAL_SITE_HANDLERS = {\r\n  // 知乎处理函数\r\n  'zhihu.com': async (source) => {\r\n    // 知乎不提供官方RSS，我们可以使用第三方服务\r\n    // 尝试多个可能的RSS源\r\n    const zhihuRssSources = [\r\n      'https://rsshub.app/zhihu/daily',\r\n      'https://rsshub.app/zhihu/hotlist',\r\n      'https://www.zhihu.com/rss',\r\n      'https://rsshub.app/zhihu/people/activities/zhang-jia-wei'\r\n    ];\r\n    \r\n    console.log('尝试获取知乎RSS');\r\n    \r\n    // 尝试每个RSS源\r\n    for (const rssUrl of zhihuRssSources) {\r\n      try {\r\n        console.log(`尝试知乎RSS源: ${rssUrl}`);\r\n        const response = await fetch(rssUrl, {\r\n          headers: {\r\n            'User-Agent': 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/91.0.4472.124 Safari/537.36'\r\n          }\r\n        });\r\n        \r\n        if (!response.ok) {\r\n          console.log(`知乎RSS源 ${rssUrl} 返回状态码: ${response.status}`);\r\n          continue;\r\n        }\r\n        \r\n        const xmlData = await response.text();\r\n        if (xmlData && (xmlData.includes('<rss') || xmlData.includes('<feed') || xmlData.includes('<rdf:RDF'))) {\r\n          console.log(`成功获取知乎RSS: ${rssUrl}`);\r\n          return { success: true, data: xmlData };\r\n        } else {\r\n          console.log(`知乎RSS源 ${rssUrl} 返回的不是有效的XML`);\r\n        }\r\n      } catch (error) {\r\n        console.error(`获取知乎RSS源 ${rssUrl} 失败:`, error);\r\n      }\r\n    }\r\n    \r\n    // 如果所有尝试都失败，返回一些静态内容\r\n    console.log('所有知乎RSS源都失败，返回静态内容');\r\n    const staticContent = `\r\n    <?xml version=\"1.0\" encoding=\"UTF-8\"?>\r\n    <rss version=\"2.0\">\r\n      <channel>\r\n        <title>知乎热门</title>\r\n        <link>https://www.zhihu.com</link>\r\n        <description>知乎热门内容</description>\r\n        <item>\r\n          <title>知乎RSS加载失败 - 请稍后再试</title>\r\n          <link>https://www.zhihu.com</link>\r\n          <pubDate>${new Date().toUTCString()}</pubDate>\r\n          <description>由于知乎限制，RSS加载失败。请稍后再试或直接访问知乎网站。</description>\r\n        </item>\r\n      </channel>\r\n    </rss>`;\r\n    return { success: true, data: staticContent };\r\n  },\r\n  \r\n  // 52pojie处理函数\r\n  '52pojie.cn': async (source) => {\r\n    // 尝试多个可能的RSS源\r\n    const pojieRssSources = [\r\n      'https://rsshub.app/52pojie/index',\r\n      'https://rsshub.app/52pojie/forum/16',\r\n      'https://www.52pojie.cn/forum.php?mod=guide&view=newthread&rss=1'\r\n    ];\r\n    \r\n    console.log('尝试获取52pojie RSS');\r\n    \r\n    // 尝试每个RSS源\r\n    for (const rssUrl of pojieRssSources) {\r\n      try {\r\n        console.log(`尝试52pojie RSS源: ${rssUrl}`);\r\n        \r\n        // 使用axios获取二进制数据以处理GBK编码\r\n        const response = await axios.get(rssUrl, {\r\n          headers: {\r\n            'User-Agent': 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/91.0.4472.124 Safari/537.36',\r\n            'Referer': 'https://www.52pojie.cn/'\r\n          },\r\n          responseType: 'arraybuffer'  // 获取二进制数据\r\n        });\r\n        \r\n        if (response.status !== 200) {\r\n          console.log(`52pojie RSS源 ${rssUrl} 返回状态码: ${response.status}`);\r\n          continue;\r\n        }\r\n        \r\n        // 检测编码并转换\r\n        let encoding = 'utf-8';\r\n        const contentType = response.headers['content-type'] || '';\r\n        if (contentType.includes('charset=gbk') || contentType.includes('charset=gb2312')) {\r\n          encoding = 'gbk';\r\n        } else {\r\n          // 尝试从内容中检测编码\r\n          const buffer = Buffer.from(response.data);\r\n          const str = buffer.toString().substring(0, 1000);\r\n          if (str.includes('encoding=\"gbk\"') || str.includes('encoding=\"gb2312\"')) {\r\n            encoding = 'gbk';\r\n          }\r\n        }\r\n        \r\n        // 使用TextDecoder转换编码\r\n        let xmlData;\r\n        if (encoding.toLowerCase() === 'gbk' || encoding.toLowerCase() === 'gb2312') {\r\n          console.log(`检测到GBK编码，进行转换`);\r\n          // 浏览器环境下使用TextDecoder\r\n          const decoder = new TextDecoder(encoding);\r\n          xmlData = decoder.decode(new Uint8Array(response.data));\r\n        } else {\r\n          xmlData = new TextDecoder('utf-8').decode(new Uint8Array(response.data));\r\n        }\r\n        \r\n        if (xmlData && (xmlData.includes('<rss') || xmlData.includes('<feed') || xmlData.includes('<rdf:RDF'))) {\r\n          console.log(`成功获取52pojie RSS: ${rssUrl}`);\r\n          \r\n          // 将GBK编码的XML转换为UTF-8\r\n          xmlData = xmlData.replace(/encoding=\"gbk\"/i, 'encoding=\"utf-8\"')\r\n                          .replace(/encoding=\"gb2312\"/i, 'encoding=\"utf-8\"');\r\n          \r\n          return { success: true, data: xmlData };\r\n        } else {\r\n          console.log(`52pojie RSS源 ${rssUrl} 返回的不是有效的XML`);\r\n        }\r\n      } catch (error) {\r\n        console.error(`获取52pojie RSS源 ${rssUrl} 失败:`, error);\r\n      }\r\n    }\r\n    \r\n    // 如果所有尝试都失败，返回一些静态内容\r\n    console.log('所有52pojie RSS源都失败，返回静态内容');\r\n    const staticContent = `\r\n    <?xml version=\"1.0\" encoding=\"UTF-8\"?>\r\n    <rss version=\"2.0\">\r\n      <channel>\r\n        <title>吾爱破解</title>\r\n        <link>https://www.52pojie.cn</link>\r\n        <description>吾爱破解论坛</description>\r\n        <item>\r\n          <title>吾爱破解RSS加载失败 - 请稍后再试</title>\r\n          <link>https://www.52pojie.cn</link>\r\n          <pubDate>${new Date().toUTCString()}</pubDate>\r\n          <description>由于网站限制，RSS加载失败。请稍后再试或直接访问吾爱破解网站。</description>\r\n        </item>\r\n      </channel>\r\n    </rss>`;\r\n    return { success: true, data: staticContent };\r\n  }\r\n};\r\n\r\nconst News = () => {\r\n  // 状态\r\n  const [sources, setSources] = useState([]);\r\n  const [activeSource, setActiveSource] = useState(null);\r\n  const [newsItems, setNewsItems] = useState([]);\r\n  const [loading, setLoading] = useState(false);\r\n  const [error, setError] = useState(null);\r\n  const [showModal, setShowModal] = useState(false);\r\n  const [showSourcesModal, setShowSourcesModal] = useState(false);\r\n  const [editingSource, setEditingSource] = useState(null);\r\n  \r\n  const [formData, setFormData] = useState({\r\n    name: '',\r\n    url: '',\r\n    type: 'rss' // rss 或 html\r\n  });\r\n  \r\n  // 初始化数据\r\n  useEffect(() => {\r\n    const savedSources = getFromStorage('homepage-news-sources', []);\r\n    setSources(savedSources);\r\n    \r\n    if (savedSources.length > 0) {\r\n      setActiveSource(savedSources[0]);\r\n    }\r\n  }, []);\r\n  \r\n  // 当活动源变化时，加载新闻\r\n  useEffect(() => {\r\n    if (activeSource) {\r\n      loadNews(activeSource);\r\n    }\r\n  }, [activeSource]);\r\n  \r\n  // 加载新闻\r\n  const loadNews = async (source) => {\r\n    setLoading(true);\r\n    setError(null);\r\n    setNewsItems([]);\r\n    \r\n    try {\r\n      if (source.type === 'rss') {\r\n        await loadRssNews(source);\r\n      } else {\r\n        await loadHtmlNews(source);\r\n      }\r\n    } catch (err) {\r\n      console.error('加载新闻失败:', err);\r\n      setError(`加载失败: ${err.message}`);\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n  \r\n  // 加载RSS新闻\r\n  const loadRssNews = async (source) => {\r\n    let lastError = null;\r\n    \r\n    // 首先尝试特殊网站处理\r\n    for (const domain in SPECIAL_SITE_HANDLERS) {\r\n      if (source.url.includes(domain)) {\r\n        console.log(`检测到特殊网站: ${domain}，使用特殊处理`);\r\n        try {\r\n          const result = await SPECIAL_SITE_HANDLERS[domain](source);\r\n          if (result.success) {\r\n            // 直接使用返回的数据，跳过代理\r\n            const xmlData = result.data;\r\n            \r\n            try {\r\n              // 解析XML\r\n              let parsePromise = new Promise((resolve, reject) => {\r\n                xml2js.parseString(xmlData, { \r\n                  explicitArray: false,\r\n                  ignoreAttrs: true,\r\n                  trim: true,\r\n                  normalize: true,\r\n                  normalizeTags: true,\r\n                  mergeAttrs: true,\r\n                  explicitRoot: false\r\n                }, (err, result) => {\r\n                  if (err) {\r\n                    console.error('XML解析错误:', err);\r\n                    reject(new Error('解析RSS失败'));\r\n                    return;\r\n                  }\r\n                  resolve(result);\r\n                });\r\n              });\r\n              \r\n              const parsedResult = await parsePromise;\r\n              processRssResult(parsedResult);\r\n              return; // 成功处理，直接返回\r\n            } catch (parseError) {\r\n              console.error(`解析特殊网站 ${domain} 的XML失败:`, parseError);\r\n              // 继续尝试其他方法\r\n            }\r\n          }\r\n        } catch (specialError) {\r\n          console.error(`特殊处理 ${domain} 失败:`, specialError);\r\n          // 继续使用常规方法\r\n        }\r\n      }\r\n    }\r\n    \r\n    // 尝试所有代理服务器\r\n    for (const proxy of CORS_PROXIES) {\r\n      try {\r\n        console.log(`尝试使用代理: ${proxy} 加载: ${source.url}`);\r\n        \r\n        // 检查是否是特殊网站\r\n        let targetUrl = source.url;\r\n        let headers = {\r\n          'Accept': 'application/rss+xml, application/xml, text/xml, */*',\r\n          'User-Agent': 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/91.0.4472.124 Safari/537.36'\r\n        };\r\n        \r\n        // 检查是否有特殊的RSS源映射\r\n        for (const sourceUrl in SPECIAL_RSS_SOURCES) {\r\n          if (source.url.includes(sourceUrl)) {\r\n            targetUrl = SPECIAL_RSS_SOURCES[sourceUrl];\r\n            console.log(`使用特殊RSS源映射: ${targetUrl}`);\r\n            break;\r\n          }\r\n        }\r\n        \r\n        // 使用代理服务器解决跨域问题\r\n        const response = await axios.get(`${proxy}${encodeURIComponent(targetUrl)}`, { headers });\r\n        const xmlData = response.data;\r\n        \r\n        // 如果返回的是HTML而不是XML，尝试提取RSS链接\r\n        if (typeof xmlData === 'string' && xmlData.includes('<!DOCTYPE html>')) {\r\n          console.log('返回了HTML而不是XML，尝试提取RSS链接');\r\n          \r\n          // 创建一个临时的DOM元素来解析HTML\r\n          const parser = new DOMParser();\r\n          const doc = parser.parseFromString(xmlData, 'text/html');\r\n          \r\n          // 尝试找到RSS链接\r\n          const rssLinks = Array.from(doc.querySelectorAll('link[type=\"application/rss+xml\"], link[type=\"application/atom+xml\"]'));\r\n          \r\n          if (rssLinks.length > 0) {\r\n            const rssUrl = rssLinks[0].getAttribute('href');\r\n            console.log(`找到RSS链接: ${rssUrl}`);\r\n            \r\n            // 处理相对URL\r\n            let absoluteRssUrl = rssUrl;\r\n            if (rssUrl.startsWith('/')) {\r\n              const urlObj = new URL(targetUrl);\r\n              absoluteRssUrl = `${urlObj.protocol}//${urlObj.host}${rssUrl}`;\r\n            }\r\n            \r\n            // 递归调用，使用找到的RSS链接\r\n            const newSource = { ...source, url: absoluteRssUrl };\r\n            return loadRssNews(newSource);\r\n          } else {\r\n            throw new Error('返回的是HTML而不是RSS，且未找到RSS链接');\r\n          }\r\n        }\r\n        \r\n                // 解析XML\r\n                let parsePromise = new Promise((resolve, reject) => {\r\n                  xml2js.parseString(xmlData, { \r\n                    explicitArray: false,\r\n                    ignoreAttrs: false,\r\n                    trim: true,\r\n                    normalize: true,\r\n                    normalizeTags: false,\r\n                    mergeAttrs: true,\r\n                    explicitRoot: false\r\n                  }, (err, result) => {\r\n                    if (err) {\r\n                      console.error('XML解析错误:', err);\r\n                      reject(new Error('解析RSS失败'));\r\n                      return;\r\n                    }\r\n                    resolve(result);\r\n                  });\r\n                });\r\n                \r\n                try {\r\n                  const parsedResult = await parsePromise;\r\n                  processRssResult(parsedResult);\r\n                  return; // 成功处理，直接返回\r\n                } catch (parseError) {\r\n                  console.error('XML解析失败:', parseError);\r\n                  // 尝试使用更宽松的解析选项\r\n                  try {\r\n                    let fallbackParsePromise = new Promise((resolve, reject) => {\r\n                      xml2js.parseString(xmlData, { \r\n                        strict: false,\r\n                        explicitArray: false,\r\n                        ignoreAttrs: true,\r\n                        trim: true\r\n                      }, (err, result) => {\r\n                        if (err) {\r\n                          reject(err);\r\n                          return;\r\n                        }\r\n                        resolve(result);\r\n                      });\r\n                    });\r\n                    \r\n                    const fallbackResult = await fallbackParsePromise;\r\n                    processRssResult(fallbackResult);\r\n                    return; // 成功处理，直接返回\r\n                  } catch (fallbackError) {\r\n                    console.error('备用XML解析也失败:', fallbackError);\r\n                    // 继续尝试其他代理\r\n                  }\r\n                }\r\n        \r\n      } catch (error) {\r\n        console.error(`使用代理 ${proxy} 加载失败:`, error);\r\n        lastError = error;\r\n        // 继续尝试下一个代理\r\n      }\r\n    }\r\n    \r\n    // 所有代理都失败了\r\n    console.error('所有代理服务器都失败了');\r\n    throw lastError || new Error('加载RSS失败: 所有代理服务器都失败了');\r\n  };\r\n  \r\n  // 处理RSS解析结果\r\n  const processRssResult = (result) => {\r\n    let items = [];\r\n    \r\n    try {\r\n      // 处理不同的RSS格式\r\n      if (result.rss && result.rss.channel && result.rss.channel[0].item) {\r\n        // 标准RSS 2.0\r\n        items = result.rss.channel[0].item.map(item => {\r\n          try {\r\n            return {\r\n              title: item.title ? (typeof item.title[0] === 'string' ? item.title[0] : (item.title[0] && item.title[0]._ ? item.title[0]._ : '无标题')) : '无标题',\r\n              link: item.link ? (typeof item.link[0] === 'string' ? item.link[0] : (item.link[0] && item.link[0]._ ? item.link[0]._ : '#')) : '#',\r\n              date: item.pubDate ? new Date(item.pubDate[0]) : new Date(),\r\n              description: item.description ? (typeof item.description[0] === 'string' ? item.description[0] : (item.description[0] && item.description[0]._ ? item.description[0]._ : '')) : ''\r\n            };\r\n          } catch (itemError) {\r\n            console.error('处理RSS项目时出错:', itemError);\r\n            return {\r\n              title: '解析错误',\r\n              link: '#',\r\n              date: new Date(),\r\n              description: '无法解析此项目'\r\n            };\r\n          }\r\n        });\r\n      } else if (result.feed && result.feed.entry) {\r\n        // Atom格式\r\n        items = result.feed.entry.map(entry => {\r\n          // 处理链接\r\n          let link = '#';\r\n          if (entry.link) {\r\n            if (Array.isArray(entry.link)) {\r\n              const linkObj = entry.link.find(l => l.$ && (l.$.rel === 'alternate' || !l.$.rel));\r\n              if (linkObj && linkObj.$ && linkObj.$.href) {\r\n                link = linkObj.$.href;\r\n              } else if (entry.link[0] && entry.link[0].$ && entry.link[0].$.href) {\r\n                link = entry.link[0].$.href;\r\n              }\r\n            } else if (typeof entry.link === 'string') {\r\n              link = entry.link;\r\n            }\r\n          }\r\n          \r\n          // 处理标题\r\n          let title = '无标题';\r\n          if (entry.title) {\r\n            if (typeof entry.title[0] === 'string') {\r\n              title = entry.title[0];\r\n            } else if (entry.title[0] && entry.title[0]._) {\r\n              title = entry.title[0]._;\r\n            } else if (typeof entry.title === 'string') {\r\n              title = entry.title;\r\n            }\r\n          }\r\n          \r\n          // 处理日期\r\n          let date = new Date();\r\n          if (entry.updated) {\r\n            date = new Date(typeof entry.updated[0] === 'string' ? entry.updated[0] : entry.updated);\r\n          } else if (entry.published) {\r\n            date = new Date(typeof entry.published[0] === 'string' ? entry.published[0] : entry.published);\r\n          }\r\n          \r\n          // 处理描述\r\n          let description = '';\r\n          if (entry.summary) {\r\n            description = typeof entry.summary[0] === 'string' ? entry.summary[0] : \r\n                         (entry.summary[0] && entry.summary[0]._ ? entry.summary[0]._ : '');\r\n          } else if (entry.content) {\r\n            description = typeof entry.content[0] === 'string' ? entry.content[0] : \r\n                         (entry.content[0] && entry.content[0]._ ? entry.content[0]._ : '');\r\n          }\r\n          \r\n          return { title, link, date, description };\r\n        });\r\n      } else if (result['rdf:RDF']) {\r\n        // RDF格式\r\n        const rdfItems = result['rdf:RDF'].item || \r\n                       (result['rdf:RDF'].channel && result['rdf:RDF'].channel[0] && result['rdf:RDF'].channel[0].item);\r\n        \r\n        if (rdfItems) {\r\n          items = rdfItems.map(item => ({\r\n            title: item.title ? (typeof item.title[0] === 'string' ? item.title[0] : item.title[0]._) : '无标题',\r\n            link: item.link ? (typeof item.link[0] === 'string' ? item.link[0] : item.link[0]._) : '#',\r\n            date: item['dc:date'] ? new Date(item['dc:date'][0]) : new Date(),\r\n            description: item.description ? (typeof item.description[0] === 'string' ? item.description[0] : item.description[0]._) : ''\r\n          }));\r\n        }\r\n      } else {\r\n        // 尝试遍历结果找到可能的项目\r\n        const findItems = (obj, depth = 0) => {\r\n          if (!obj || typeof obj !== 'object' || depth > 5) return null;\r\n          \r\n          // 直接查找item或entry数组\r\n          if (obj.item && Array.isArray(obj.item)) {\r\n            return obj.item.map(item => ({\r\n              title: extractTextContent(item.title) || '无标题',\r\n              link: extractTextContent(item.link) || '#',\r\n              date: item.pubDate ? new Date(extractTextContent(item.pubDate)) : new Date(),\r\n              description: extractTextContent(item.description) || ''\r\n            }));\r\n          }\r\n          \r\n          if (obj.entry && Array.isArray(obj.entry)) {\r\n            return obj.entry.map(entry => ({\r\n              title: extractTextContent(entry.title) || '无标题',\r\n              link: extractLinkFromEntry(entry) || '#',\r\n              date: entry.updated ? new Date(extractTextContent(entry.updated)) : new Date(),\r\n              description: extractTextContent(entry.summary || entry.content) || ''\r\n            }));\r\n          }\r\n          \r\n          // 递归查找\r\n          for (const key in obj) {\r\n            if (typeof obj[key] === 'object' && obj[key] !== null) {\r\n              const found = findItems(obj[key], depth + 1);\r\n              if (found && found.length > 0) return found;\r\n            }\r\n          }\r\n          \r\n          return null;\r\n        };\r\n        \r\n        // 辅助函数：从各种可能的格式中提取文本内容\r\n        const extractTextContent = (value) => {\r\n          if (!value) return '';\r\n          if (typeof value === 'string') return value;\r\n          if (Array.isArray(value)) {\r\n            if (value.length === 0) return '';\r\n            if (typeof value[0] === 'string') return value[0];\r\n            if (value[0] && value[0]._) return value[0]._;\r\n            if (value[0] && typeof value[0] === 'object') {\r\n              for (const key in value[0]) {\r\n                if (typeof value[0][key] === 'string') return value[0][key];\r\n              }\r\n            }\r\n          }\r\n          return '';\r\n        };\r\n        \r\n        // 辅助函数：从entry对象中提取链接\r\n        const extractLinkFromEntry = (entry) => {\r\n          if (!entry.link) return '';\r\n          if (typeof entry.link === 'string') return entry.link;\r\n          if (Array.isArray(entry.link)) {\r\n            for (const link of entry.link) {\r\n              if (typeof link === 'string') return link;\r\n              if (link.$ && link.$.href) return link.$.href;\r\n            }\r\n          }\r\n          return '';\r\n        };\r\n        \r\n        const foundItems = findItems(result);\r\n        if (foundItems && foundItems.length > 0) {\r\n          items = foundItems;\r\n        } else {\r\n          console.error('未找到支持的RSS格式:', result);\r\n          throw new Error('不支持的RSS格式');\r\n        }\r\n      }\r\n      \r\n      // 成功获取到新闻项，设置状态\r\n      setNewsItems(items);\r\n    } catch (parseError) {\r\n      console.error('RSS内容解析错误:', parseError, result);\r\n      throw new Error('RSS内容解析失败');\r\n    }\r\n  };\r\n  \r\n  // 加载HTML新闻\r\n  const loadHtmlNews = async (source) => {\r\n    try {\r\n      // 尝试所有代理服务器\r\n      for (const proxy of CORS_PROXIES) {\r\n        try {\r\n          console.log(`尝试使用代理: ${proxy} 加载HTML: ${source.url}`);\r\n          const response = await axios.get(`${proxy}${encodeURIComponent(source.url)}`);\r\n          const htmlData = response.data;\r\n          \r\n          if (htmlData) {\r\n            // 创建一个临时的DOM元素来解析HTML\r\n            const parser = new DOMParser();\r\n            const doc = parser.parseFromString(htmlData, 'text/html');\r\n            \r\n            // 尝试找到新闻标题\r\n            // 这里使用一些常见的选择器，可能需要根据具体网站调整\r\n            const headings = Array.from(doc.querySelectorAll('h1, h2, h3, .title, .headline, article header'));\r\n            \r\n            const items = headings.map(heading => {\r\n              // 尝试找到链接\r\n              let link = '#';\r\n              const linkElement = heading.querySelector('a') || heading.closest('a');\r\n              if (linkElement && linkElement.href) {\r\n                // 处理相对URL\r\n                if (linkElement.href.startsWith('/')) {\r\n                  const url = new URL(source.url);\r\n                  link = `${url.protocol}//${url.host}${linkElement.href}`;\r\n                } else {\r\n                  link = linkElement.href;\r\n                }\r\n              }\r\n              \r\n              return {\r\n                title: heading.textContent.trim(),\r\n                link,\r\n                date: new Date(),\r\n                description: ''\r\n              };\r\n            }).filter(item => item.title); // 过滤掉空标题\r\n            \r\n            if (items.length > 0) {\r\n              setNewsItems(items);\r\n              return; // 成功处理，直接返回\r\n            }\r\n          }\r\n        } catch (proxyError) {\r\n          console.error(`使用代理 ${proxy} 加载HTML失败:`, proxyError);\r\n          // 继续尝试下一个代理\r\n        }\r\n      }\r\n      \r\n      // 所有代理都失败了\r\n      throw new Error('所有代理服务器都失败了');\r\n    } catch (error) {\r\n      console.error('加载HTML失败:', error);\r\n      throw new Error('加载HTML失败');\r\n    }\r\n  };\r\n  \r\n  // 打开添加源模态框\r\n  const openAddSourceModal = () => {\r\n    setEditingSource(null);\r\n    setFormData({\r\n      name: '',\r\n      url: '',\r\n      type: 'rss'\r\n    });\r\n    setShowModal(true);\r\n  };\r\n  \r\n  // 打开编辑源模态框\r\n  const openEditSourceModal = (source) => {\r\n    setEditingSource(source);\r\n    setFormData({\r\n      name: source.name,\r\n      url: source.url,\r\n      type: source.type\r\n    });\r\n    setShowModal(true);\r\n  };\r\n  \r\n  // 关闭模态框\r\n  const closeModal = () => {\r\n    setShowModal(false);\r\n    setEditingSource(null);\r\n  };\r\n  \r\n  // 打开源列表模态框\r\n  const openSourcesModal = () => {\r\n    setShowSourcesModal(true);\r\n  };\r\n  \r\n  // 关闭源列表模态框\r\n  const closeSourcesModal = () => {\r\n    setShowSourcesModal(false);\r\n  };\r\n  \r\n  // 处理表单输入变化\r\n  const handleInputChange = (e) => {\r\n    const { name, value } = e.target;\r\n    setFormData(prev => ({\r\n      ...prev,\r\n      [name]: value\r\n    }));\r\n  };\r\n  \r\n  // 保存源\r\n  const saveSource = () => {\r\n    if (!formData.name.trim() || !formData.url.trim()) {\r\n      alert('请填写完整信息');\r\n      return;\r\n    }\r\n    \r\n    const newSource = {\r\n      id: editingSource ? editingSource.id : Date.now(),\r\n      name: formData.name.trim(),\r\n      url: formData.url.trim(),\r\n      type: formData.type\r\n    };\r\n    \r\n    let updatedSources;\r\n    \r\n    if (editingSource) {\r\n      // 编辑现有源\r\n      updatedSources = sources.map(source => \r\n        source.id === editingSource.id ? newSource : source\r\n      );\r\n    } else {\r\n      // 添加新源\r\n      updatedSources = [...sources, newSource];\r\n    }\r\n    \r\n    setSources(updatedSources);\r\n    saveToStorage('homepage-news-sources', updatedSources);\r\n    \r\n    // 如果是第一个源，或者是新添加的源，自动设为活动源\r\n    if (sources.length === 0 || !editingSource) {\r\n      setActiveSource(newSource);\r\n    }\r\n    \r\n    // 关闭所有模态框\r\n    closeModal();\r\n    closeSourcesModal();\r\n  };\r\n  \r\n  // 删除源\r\n  const deleteSource = (id) => {\r\n    if (window.confirm('确定要删除这个新闻源吗？')) {\r\n      const updatedSources = sources.filter(source => source.id !== id);\r\n      setSources(updatedSources);\r\n      saveToStorage('homepage-news-sources', updatedSources);\r\n      \r\n      // 如果删除的是当前活动源，切换到第一个源\r\n      if (activeSource && activeSource.id === id) {\r\n        if (updatedSources.length > 0) {\r\n          setActiveSource(updatedSources[0]);\r\n        } else {\r\n          setActiveSource(null);\r\n          setNewsItems([]);\r\n        }\r\n      }\r\n      \r\n      // 如果是在源列表模态框中删除，不关闭模态框\r\n      if (!showSourcesModal) {\r\n        closeModal();\r\n      }\r\n    }\r\n  };\r\n  \r\n  // 返回主页\r\n  const goBack = () => {\r\n    window.history.back();\r\n  };\r\n  \r\n  return (\r\n    <NewsContainer>\r\n      <NewsHeader>\r\n        <div style={{ display: 'flex', alignItems: 'center' }}>\r\n          <BackButton onClick={goBack} title=\"返回\">\r\n            <ArrowBackIcon />\r\n          </BackButton>\r\n          <HeaderTitle>新闻</HeaderTitle>\r\n        </div>\r\n      </NewsHeader>\r\n      \r\n      <SourcesContainer>\r\n        {sources.map(source => (\r\n          <SourceButton \r\n            key={source.id} \r\n            active={activeSource && activeSource.id === source.id}\r\n            onClick={() => setActiveSource(source)}\r\n          >\r\n            {source.type === 'rss' ? <RssFeedIcon /> : <LinkIcon />}\r\n            {source.name}\r\n          </SourceButton>\r\n        ))}\r\n        \r\n        <AddSourceButton onClick={openSourcesModal}>\r\n          <AddIcon />\r\n          管理源\r\n        </AddSourceButton>\r\n      </SourcesContainer>\r\n      \r\n      <NewsContent>\r\n        {loading ? (\r\n          <LoadingState>加载中...</LoadingState>\r\n        ) : error ? (\r\n          <ErrorState>{error}</ErrorState>\r\n        ) : newsItems.length > 0 ? (\r\n          <NewsList>\r\n            {newsItems.map((item, index) => (\r\n              <NewsItem key={index} href={item.link} target=\"_blank\" rel=\"noopener noreferrer\">\r\n                <NewsTitle>{item.title}</NewsTitle>\r\n                {item.date && (\r\n                  <NewsDate>\r\n                    {item.date.toLocaleDateString('zh-CN', {\r\n                      year: 'numeric',\r\n                      month: 'long',\r\n                      day: 'numeric'\r\n                    })}\r\n                  </NewsDate>\r\n                )}\r\n              </NewsItem>\r\n            ))}\r\n          </NewsList>\r\n        ) : activeSource ? (\r\n          <EmptyState>\r\n            <p>没有找到新闻</p>\r\n          </EmptyState>\r\n        ) : (\r\n          <EmptyState>\r\n            <p>请添加新闻源</p>\r\n          </EmptyState>\r\n        )}\r\n      </NewsContent>\r\n      \r\n      {/* 添加/编辑源模态框 */}\r\n      {showModal && (\r\n        <Modal>\r\n          <ModalContent>\r\n            <ModalHeader>\r\n              <ModalTitle>{editingSource ? '编辑新闻源' : '添加新闻源'}</ModalTitle>\r\n              <CloseButton onClick={closeModal}>&times;</CloseButton>\r\n            </ModalHeader>\r\n            \r\n            <FormGroup>\r\n              <Label>名称</Label>\r\n              <Input \r\n                type=\"text\" \r\n                name=\"name\" \r\n                value={formData.name} \r\n                onChange={handleInputChange} \r\n                placeholder=\"新闻源名称\"\r\n              />\r\n            </FormGroup>\r\n            \r\n            <FormGroup>\r\n              <Label>类型</Label>\r\n              <Select \r\n                name=\"type\" \r\n                value={formData.type} \r\n                onChange={handleInputChange}\r\n              >\r\n                <option value=\"rss\">RSS 订阅</option>\r\n                <option value=\"html\">网页</option>\r\n              </Select>\r\n            </FormGroup>\r\n            \r\n            <FormGroup>\r\n              <Label>URL</Label>\r\n              <Input \r\n                type=\"text\" \r\n                name=\"url\" \r\n                value={formData.url} \r\n                onChange={handleInputChange} \r\n                placeholder={formData.type === 'rss' ? 'RSS 订阅地址' : '网页地址'}\r\n              />\r\n            </FormGroup>\r\n            \r\n            <ButtonGroup>\r\n              {editingSource && (\r\n                <Button \r\n                  className=\"danger\" \r\n                  onClick={() => deleteSource(editingSource.id)}\r\n                >\r\n                  删除\r\n                </Button>\r\n              )}\r\n              <Button className=\"secondary\" onClick={closeModal}>取消</Button>\r\n              <Button className=\"primary\" onClick={saveSource}>保存</Button>\r\n            </ButtonGroup>\r\n          </ModalContent>\r\n        </Modal>\r\n      )}\r\n      \r\n      {/* 源列表模态框 */}\r\n      {showSourcesModal && (\r\n        <Modal>\r\n          <ModalContent>\r\n            <ModalHeader>\r\n              <ModalTitle>管理新闻源</ModalTitle>\r\n              <CloseButton onClick={closeSourcesModal}>&times;</CloseButton>\r\n            </ModalHeader>\r\n            \r\n            <Button className=\"primary\" onClick={openAddSourceModal} style={{ width: '100%' }}>\r\n              <AddIcon /> 添加新闻源\r\n            </Button>\r\n            \r\n            <SourcesList>\r\n              {sources.map(source => (\r\n                <SourceItem key={source.id} type={source.type}>\r\n                  <SourceInfo>\r\n                    {source.type === 'rss' ? <RssFeedIcon /> : <LinkIcon />}\r\n                    <div>\r\n                      <SourceName>{source.name}</SourceName>\r\n                      <SourceUrl>{source.url}</SourceUrl>\r\n                    </div>\r\n                  </SourceInfo>\r\n                  <SourceActions>\r\n                    <ActionIconButton onClick={() => openEditSourceModal(source)}>\r\n                      <EditIcon fontSize=\"small\" />\r\n                    </ActionIconButton>\r\n                    <ActionIconButton \r\n                      className=\"delete\" \r\n                      onClick={() => deleteSource(source.id)}\r\n                    >\r\n                      <DeleteIcon fontSize=\"small\" />\r\n                    </ActionIconButton>\r\n                  </SourceActions>\r\n                </SourceItem>\r\n              ))}\r\n              \r\n              {sources.length === 0 && (\r\n                <EmptyState>\r\n                  <p>暂无新闻源</p>\r\n                </EmptyState>\r\n              )}\r\n            </SourcesList>\r\n            \r\n            <ButtonGroup>\r\n              <Button className=\"secondary\" onClick={closeSourcesModal}>关闭</Button>\r\n            </ButtonGroup>\r\n          </ModalContent>\r\n        </Modal>\r\n      )}\r\n    </NewsContainer>\r\n  );\r\n};\r\n\r\nexport default News;"],"mappings":"AAAA,MAAO,CAAAA,KAAK,EAAIC,QAAQ,CAAEC,SAAS,KAAQ,OAAO,CAClD,MAAO,CAAAC,MAAM,KAAM,mBAAmB,CACtC,OAASC,aAAa,CAAEC,cAAc,KAAQ,qBAAqB,CACnE,MAAO,CAAAC,KAAK,KAAM,OAAO,CACzB,MAAO,CAAAC,MAAM,KAAM,QAAQ,CAE3B;AACA,MAAO,CAAAC,OAAO,KAAM,yBAAyB,CAC7C,MAAO,CAAAC,QAAQ,KAAM,0BAA0B,CAC/C,MAAO,CAAAC,UAAU,KAAM,4BAA4B,CACnD,MAAO,CAAAC,aAAa,KAAM,+BAA+B,CACzD,MAAO,CAAAC,WAAW,KAAM,6BAA6B,CACrD,MAAO,CAAAC,QAAQ,KAAM,0BAA0B,CAAC,OAAAC,GAAA,IAAAC,IAAA,CAAAC,IAAA,IAAAC,KAAA,yBAEhD,KAAM,CAAAC,aAAa,CAAGf,MAAM,CAACgB,GAAG;AAChC;AACA;AACA;AACA;AACA,CAAC,CAED,KAAM,CAAAC,UAAU,CAAGjB,MAAM,CAACgB,GAAG;AAC7B;AACA;AACA;AACA;AACA;AACA;AACA,CAAC,CAED,KAAM,CAAAE,WAAW,CAAGlB,MAAM,CAACmB,EAAE;AAC7B;AACA;AACA;AACA,CAAC,CAED,KAAM,CAAAC,UAAU,CAAGpB,MAAM,CAACqB,MAAM;AAChC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC,CAED,KAAM,CAAAC,gBAAgB,CAAGtB,MAAM,CAACgB,GAAG;AACnC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC,CAED,KAAM,CAAAO,YAAY,CAAGvB,MAAM,CAACqB,MAAM;AAClC,sBAAsBG,KAAK,EAAIA,KAAK,CAACC,MAAM,CAAG,sBAAsB,CAAG,wBAAwB;AAC/F,WAAWD,KAAK,EAAIA,KAAK,CAACC,MAAM,CAAG,OAAO,CAAG,mBAAmB;AAChE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wBAAwBD,KAAK,EAAIA,KAAK,CAACC,MAAM,CAAG,sBAAsB,CAAG,qBAAqB;AAC9F;AACA;AACA;AACA;AACA;AACA,CAAC,CAED,KAAM,CAAAC,eAAe,CAAG1B,MAAM,CAACqB,MAAM;AACrC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC,CAED,KAAM,CAAAM,WAAW,CAAG3B,MAAM,CAACgB,GAAG;AAC9B;AACA;AACA;AACA,CAAC,CAED,KAAM,CAAAY,QAAQ,CAAG5B,MAAM,CAACgB,GAAG;AAC3B;AACA;AACA;AACA,CAAC,CAED,KAAM,CAAAa,QAAQ,CAAG7B,MAAM,CAAC8B,CAAC;AACzB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC,CAED,KAAM,CAAAC,SAAS,CAAG/B,MAAM,CAACgC,EAAE;AAC3B;AACA;AACA;AACA,CAAC,CAED,KAAM,CAAAC,QAAQ,CAAGjC,MAAM,CAACgB,GAAG;AAC3B;AACA;AACA;AACA,CAAC,CAED,KAAM,CAAAkB,YAAY,CAAGlC,MAAM,CAACgB,GAAG;AAC/B;AACA;AACA;AACA,CAAC,CAED,KAAM,CAAAmB,UAAU,CAAGnC,MAAM,CAACgB,GAAG;AAC7B;AACA;AACA;AACA;AACA,CAAC,CAED,KAAM,CAAAoB,UAAU,CAAGpC,MAAM,CAACgB,GAAG;AAC7B;AACA;AACA;AACA;AACA,CAAC,CAED,KAAM,CAAAqB,KAAK,CAAGrC,MAAM,CAACgB,GAAG;AACxB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC,CAED,KAAM,CAAAsB,YAAY,CAAGtC,MAAM,CAACgB,GAAG;AAC/B;AACA;AACA;AACA;AACA;AACA;AACA,CAAC,CAED,KAAM,CAAAuB,WAAW,CAAGvC,MAAM,CAACgB,GAAG;AAC9B;AACA;AACA;AACA;AACA,CAAC,CAED,KAAM,CAAAwB,UAAU,CAAGxC,MAAM,CAACgC,EAAE;AAC5B;AACA;AACA;AACA,CAAC,CAED,KAAM,CAAAS,WAAW,CAAGzC,MAAM,CAACqB,MAAM;AACjC;AACA;AACA;AACA;AACA;AACA,CAAC,CAED,KAAM,CAAAqB,SAAS,CAAG1C,MAAM,CAACgB,GAAG;AAC5B;AACA,CAAC,CAED,KAAM,CAAA2B,KAAK,CAAG3C,MAAM,CAAC4C,KAAK;AAC1B;AACA;AACA;AACA,CAAC,CAED,KAAM,CAAAC,KAAK,CAAG7C,MAAM,CAAC8C,KAAK;AAC1B;AACA;AACA;AACA;AACA;AACA;AACA,CAAC,CAED,KAAM,CAAAC,MAAM,CAAG/C,MAAM,CAACgD,MAAM;AAC5B;AACA;AACA;AACA;AACA;AACA;AACA,CAAC,CAED,KAAM,CAAAC,WAAW,CAAGjD,MAAM,CAACgB,GAAG;AAC9B;AACA;AACA;AACA;AACA,CAAC,CAED,KAAM,CAAAkC,MAAM,CAAGlD,MAAM,CAACqB,MAAM;AAC5B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC,CAED,KAAM,CAAA8B,WAAW,CAAGnD,MAAM,CAACgB,GAAG;AAC9B;AACA;AACA;AACA;AACA,CAAC,CAED,KAAM,CAAAoC,UAAU,CAAGpD,MAAM,CAACgB,GAAG;AAC7B;AACA;AACA;AACA;AACA;AACA;AACA,2BAA2BQ,KAAK,EAAIA,KAAK,CAAC6B,IAAI,GAAK,KAAK,CAAG,SAAS,CAAG,SAAS;AAChF,CAAC,CAED,KAAM,CAAAC,UAAU,CAAGtD,MAAM,CAACgB,GAAG;AAC7B;AACA;AACA;AACA,CAAC,CAED,KAAM,CAAAuC,UAAU,CAAGvD,MAAM,CAACgB,GAAG;AAC7B;AACA,CAAC,CAED,KAAM,CAAAwC,SAAS,CAAGxD,MAAM,CAACgB,GAAG;AAC5B;AACA;AACA;AACA,CAAC,CAED,KAAM,CAAAyC,aAAa,CAAGzD,MAAM,CAACgB,GAAG;AAChC;AACA;AACA,CAAC,CAED,KAAM,CAAA0C,gBAAgB,CAAG1D,MAAM,CAACqB,MAAM;AACtC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC,CAED;AACA;AACA,KAAM,CAAAsC,YAAY,CAAG,CACnB,wBAAwB,CACxB,qCAAqC,CACrC,sCAAsC,CACtC,yBAAyB,CAC1B,CAED;AACA,KAAM,CAAAC,mBAAmB,CAAG,CAC1B;AACA,mBAAmB,CAAE,2BAA2B,CAChD,eAAe,CAAE,2BAA2B,CAC5C;AACA,YAAY,CAAE,iEAChB,CAAC,CAED;AACA,KAAM,CAAAC,qBAAqB,CAAG,CAC5B;AACA,WAAW,CAAE,KAAO,CAAAC,MAAM,EAAK,CAC7B;AACA;AACA,KAAM,CAAAC,eAAe,CAAG,CACtB,gCAAgC,CAChC,kCAAkC,CAClC,2BAA2B,CAC3B,0DAA0D,CAC3D,CAEDC,OAAO,CAACC,GAAG,CAAC,WAAW,CAAC,CAExB;AACA,IAAK,KAAM,CAAAC,MAAM,GAAI,CAAAH,eAAe,CAAE,CACpC,GAAI,CACFC,OAAO,CAACC,GAAG,CAAC,aAAaC,MAAM,EAAE,CAAC,CAClC,KAAM,CAAAC,QAAQ,CAAG,KAAM,CAAAC,KAAK,CAACF,MAAM,CAAE,CACnCG,OAAO,CAAE,CACP,YAAY,CAAE,qHAChB,CACF,CAAC,CAAC,CAEF,GAAI,CAACF,QAAQ,CAACG,EAAE,CAAE,CAChBN,OAAO,CAACC,GAAG,CAAC,UAAUC,MAAM,WAAWC,QAAQ,CAACI,MAAM,EAAE,CAAC,CACzD,SACF,CAEA,KAAM,CAAAC,OAAO,CAAG,KAAM,CAAAL,QAAQ,CAACM,IAAI,CAAC,CAAC,CACrC,GAAID,OAAO,GAAKA,OAAO,CAACE,QAAQ,CAAC,MAAM,CAAC,EAAIF,OAAO,CAACE,QAAQ,CAAC,OAAO,CAAC,EAAIF,OAAO,CAACE,QAAQ,CAAC,UAAU,CAAC,CAAC,CAAE,CACtGV,OAAO,CAACC,GAAG,CAAC,cAAcC,MAAM,EAAE,CAAC,CACnC,MAAO,CAAES,OAAO,CAAE,IAAI,CAAEC,IAAI,CAAEJ,OAAQ,CAAC,CACzC,CAAC,IAAM,CACLR,OAAO,CAACC,GAAG,CAAC,UAAUC,MAAM,cAAc,CAAC,CAC7C,CACF,CAAE,MAAOW,KAAK,CAAE,CACdb,OAAO,CAACa,KAAK,CAAC,YAAYX,MAAM,MAAM,CAAEW,KAAK,CAAC,CAChD,CACF,CAEA;AACAb,OAAO,CAACC,GAAG,CAAC,oBAAoB,CAAC,CACjC,KAAM,CAAAa,aAAa,CAAG;AAC1B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qBAAqB,GAAI,CAAAC,IAAI,CAAC,CAAC,CAACC,WAAW,CAAC,CAAC;AAC7C;AACA;AACA;AACA,WAAW,CACP,MAAO,CAAEL,OAAO,CAAE,IAAI,CAAEC,IAAI,CAAEE,aAAc,CAAC,CAC/C,CAAC,CAED;AACA,YAAY,CAAE,KAAO,CAAAhB,MAAM,EAAK,CAC9B;AACA,KAAM,CAAAmB,eAAe,CAAG,CACtB,kCAAkC,CAClC,qCAAqC,CACrC,iEAAiE,CAClE,CAEDjB,OAAO,CAACC,GAAG,CAAC,iBAAiB,CAAC,CAE9B;AACA,IAAK,KAAM,CAAAC,MAAM,GAAI,CAAAe,eAAe,CAAE,CACpC,GAAI,CACFjB,OAAO,CAACC,GAAG,CAAC,mBAAmBC,MAAM,EAAE,CAAC,CAExC;AACA,KAAM,CAAAC,QAAQ,CAAG,KAAM,CAAAhE,KAAK,CAAC+E,GAAG,CAAChB,MAAM,CAAE,CACvCG,OAAO,CAAE,CACP,YAAY,CAAE,qHAAqH,CACnI,SAAS,CAAE,yBACb,CAAC,CACDc,YAAY,CAAE,aAAe;AAC/B,CAAC,CAAC,CAEF,GAAIhB,QAAQ,CAACI,MAAM,GAAK,GAAG,CAAE,CAC3BP,OAAO,CAACC,GAAG,CAAC,gBAAgBC,MAAM,WAAWC,QAAQ,CAACI,MAAM,EAAE,CAAC,CAC/D,SACF,CAEA;AACA,GAAI,CAAAa,QAAQ,CAAG,OAAO,CACtB,KAAM,CAAAC,WAAW,CAAGlB,QAAQ,CAACE,OAAO,CAAC,cAAc,CAAC,EAAI,EAAE,CAC1D,GAAIgB,WAAW,CAACX,QAAQ,CAAC,aAAa,CAAC,EAAIW,WAAW,CAACX,QAAQ,CAAC,gBAAgB,CAAC,CAAE,CACjFU,QAAQ,CAAG,KAAK,CAClB,CAAC,IAAM,CACL;AACA,KAAM,CAAAE,MAAM,CAAGC,MAAM,CAACC,IAAI,CAACrB,QAAQ,CAACS,IAAI,CAAC,CACzC,KAAM,CAAAa,GAAG,CAAGH,MAAM,CAACI,QAAQ,CAAC,CAAC,CAACC,SAAS,CAAC,CAAC,CAAE,IAAI,CAAC,CAChD,GAAIF,GAAG,CAACf,QAAQ,CAAC,gBAAgB,CAAC,EAAIe,GAAG,CAACf,QAAQ,CAAC,mBAAmB,CAAC,CAAE,CACvEU,QAAQ,CAAG,KAAK,CAClB,CACF,CAEA;AACA,GAAI,CAAAZ,OAAO,CACX,GAAIY,QAAQ,CAACQ,WAAW,CAAC,CAAC,GAAK,KAAK,EAAIR,QAAQ,CAACQ,WAAW,CAAC,CAAC,GAAK,QAAQ,CAAE,CAC3E5B,OAAO,CAACC,GAAG,CAAC,eAAe,CAAC,CAC5B;AACA,KAAM,CAAA4B,OAAO,CAAG,GAAI,CAAAC,WAAW,CAACV,QAAQ,CAAC,CACzCZ,OAAO,CAAGqB,OAAO,CAACE,MAAM,CAAC,GAAI,CAAAC,UAAU,CAAC7B,QAAQ,CAACS,IAAI,CAAC,CAAC,CACzD,CAAC,IAAM,CACLJ,OAAO,CAAG,GAAI,CAAAsB,WAAW,CAAC,OAAO,CAAC,CAACC,MAAM,CAAC,GAAI,CAAAC,UAAU,CAAC7B,QAAQ,CAACS,IAAI,CAAC,CAAC,CAC1E,CAEA,GAAIJ,OAAO,GAAKA,OAAO,CAACE,QAAQ,CAAC,MAAM,CAAC,EAAIF,OAAO,CAACE,QAAQ,CAAC,OAAO,CAAC,EAAIF,OAAO,CAACE,QAAQ,CAAC,UAAU,CAAC,CAAC,CAAE,CACtGV,OAAO,CAACC,GAAG,CAAC,oBAAoBC,MAAM,EAAE,CAAC,CAEzC;AACAM,OAAO,CAAGA,OAAO,CAACyB,OAAO,CAAC,iBAAiB,CAAE,kBAAkB,CAAC,CAC/CA,OAAO,CAAC,oBAAoB,CAAE,kBAAkB,CAAC,CAElE,MAAO,CAAEtB,OAAO,CAAE,IAAI,CAAEC,IAAI,CAAEJ,OAAQ,CAAC,CACzC,CAAC,IAAM,CACLR,OAAO,CAACC,GAAG,CAAC,gBAAgBC,MAAM,cAAc,CAAC,CACnD,CACF,CAAE,MAAOW,KAAK,CAAE,CACdb,OAAO,CAACa,KAAK,CAAC,kBAAkBX,MAAM,MAAM,CAAEW,KAAK,CAAC,CACtD,CACF,CAEA;AACAb,OAAO,CAACC,GAAG,CAAC,0BAA0B,CAAC,CACvC,KAAM,CAAAa,aAAa,CAAG;AAC1B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qBAAqB,GAAI,CAAAC,IAAI,CAAC,CAAC,CAACC,WAAW,CAAC,CAAC;AAC7C;AACA;AACA;AACA,WAAW,CACP,MAAO,CAAEL,OAAO,CAAE,IAAI,CAAEC,IAAI,CAAEE,aAAc,CAAC,CAC/C,CACF,CAAC,CAED,KAAM,CAAAoB,IAAI,CAAGA,CAAA,GAAM,CACjB;AACA,KAAM,CAACC,OAAO,CAAEC,UAAU,CAAC,CAAGtG,QAAQ,CAAC,EAAE,CAAC,CAC1C,KAAM,CAACuG,YAAY,CAAEC,eAAe,CAAC,CAAGxG,QAAQ,CAAC,IAAI,CAAC,CACtD,KAAM,CAACyG,SAAS,CAAEC,YAAY,CAAC,CAAG1G,QAAQ,CAAC,EAAE,CAAC,CAC9C,KAAM,CAAC2G,OAAO,CAAEC,UAAU,CAAC,CAAG5G,QAAQ,CAAC,KAAK,CAAC,CAC7C,KAAM,CAAC+E,KAAK,CAAE8B,QAAQ,CAAC,CAAG7G,QAAQ,CAAC,IAAI,CAAC,CACxC,KAAM,CAAC8G,SAAS,CAAEC,YAAY,CAAC,CAAG/G,QAAQ,CAAC,KAAK,CAAC,CACjD,KAAM,CAACgH,gBAAgB,CAAEC,mBAAmB,CAAC,CAAGjH,QAAQ,CAAC,KAAK,CAAC,CAC/D,KAAM,CAACkH,aAAa,CAAEC,gBAAgB,CAAC,CAAGnH,QAAQ,CAAC,IAAI,CAAC,CAExD,KAAM,CAACoH,QAAQ,CAAEC,WAAW,CAAC,CAAGrH,QAAQ,CAAC,CACvCsH,IAAI,CAAE,EAAE,CACRC,GAAG,CAAE,EAAE,CACPhE,IAAI,CAAE,KAAM;AACd,CAAC,CAAC,CAEF;AACAtD,SAAS,CAAC,IAAM,CACd,KAAM,CAAAuH,YAAY,CAAGpH,cAAc,CAAC,uBAAuB,CAAE,EAAE,CAAC,CAChEkG,UAAU,CAACkB,YAAY,CAAC,CAExB,GAAIA,YAAY,CAACC,MAAM,CAAG,CAAC,CAAE,CAC3BjB,eAAe,CAACgB,YAAY,CAAC,CAAC,CAAC,CAAC,CAClC,CACF,CAAC,CAAE,EAAE,CAAC,CAEN;AACAvH,SAAS,CAAC,IAAM,CACd,GAAIsG,YAAY,CAAE,CAChBmB,QAAQ,CAACnB,YAAY,CAAC,CACxB,CACF,CAAC,CAAE,CAACA,YAAY,CAAC,CAAC,CAElB;AACA,KAAM,CAAAmB,QAAQ,CAAG,KAAO,CAAA1D,MAAM,EAAK,CACjC4C,UAAU,CAAC,IAAI,CAAC,CAChBC,QAAQ,CAAC,IAAI,CAAC,CACdH,YAAY,CAAC,EAAE,CAAC,CAEhB,GAAI,CACF,GAAI1C,MAAM,CAACT,IAAI,GAAK,KAAK,CAAE,CACzB,KAAM,CAAAoE,WAAW,CAAC3D,MAAM,CAAC,CAC3B,CAAC,IAAM,CACL,KAAM,CAAA4D,YAAY,CAAC5D,MAAM,CAAC,CAC5B,CACF,CAAE,MAAO6D,GAAG,CAAE,CACZ3D,OAAO,CAACa,KAAK,CAAC,SAAS,CAAE8C,GAAG,CAAC,CAC7BhB,QAAQ,CAAC,SAASgB,GAAG,CAACC,OAAO,EAAE,CAAC,CAClC,CAAC,OAAS,CACRlB,UAAU,CAAC,KAAK,CAAC,CACnB,CACF,CAAC,CAED;AACA,KAAM,CAAAe,WAAW,CAAG,KAAO,CAAA3D,MAAM,EAAK,CACpC,GAAI,CAAA+D,SAAS,CAAG,IAAI,CAEpB;AACA,IAAK,KAAM,CAAAC,MAAM,GAAI,CAAAjE,qBAAqB,CAAE,CAC1C,GAAIC,MAAM,CAACuD,GAAG,CAAC3C,QAAQ,CAACoD,MAAM,CAAC,CAAE,CAC/B9D,OAAO,CAACC,GAAG,CAAC,YAAY6D,MAAM,SAAS,CAAC,CACxC,GAAI,CACF,KAAM,CAAAC,MAAM,CAAG,KAAM,CAAAlE,qBAAqB,CAACiE,MAAM,CAAC,CAAChE,MAAM,CAAC,CAC1D,GAAIiE,MAAM,CAACpD,OAAO,CAAE,CAClB;AACA,KAAM,CAAAH,OAAO,CAAGuD,MAAM,CAACnD,IAAI,CAE3B,GAAI,CACF;AACA,GAAI,CAAAoD,YAAY,CAAG,GAAI,CAAAC,OAAO,CAAC,CAACC,OAAO,CAAEC,MAAM,GAAK,CAClD/H,MAAM,CAACgI,WAAW,CAAC5D,OAAO,CAAE,CAC1B6D,aAAa,CAAE,KAAK,CACpBC,WAAW,CAAE,IAAI,CACjBC,IAAI,CAAE,IAAI,CACVC,SAAS,CAAE,IAAI,CACfC,aAAa,CAAE,IAAI,CACnBC,UAAU,CAAE,IAAI,CAChBC,YAAY,CAAE,KAChB,CAAC,CAAE,CAAChB,GAAG,CAAEI,MAAM,GAAK,CAClB,GAAIJ,GAAG,CAAE,CACP3D,OAAO,CAACa,KAAK,CAAC,UAAU,CAAE8C,GAAG,CAAC,CAC9BQ,MAAM,CAAC,GAAI,CAAAS,KAAK,CAAC,SAAS,CAAC,CAAC,CAC5B,OACF,CACAV,OAAO,CAACH,MAAM,CAAC,CACjB,CAAC,CAAC,CACJ,CAAC,CAAC,CAEF,KAAM,CAAAc,YAAY,CAAG,KAAM,CAAAb,YAAY,CACvCc,gBAAgB,CAACD,YAAY,CAAC,CAC9B,OAAQ;AACV,CAAE,MAAOE,UAAU,CAAE,CACnB/E,OAAO,CAACa,KAAK,CAAC,UAAUiD,MAAM,UAAU,CAAEiB,UAAU,CAAC,CACrD;AACF,CACF,CACF,CAAE,MAAOC,YAAY,CAAE,CACrBhF,OAAO,CAACa,KAAK,CAAC,QAAQiD,MAAM,MAAM,CAAEkB,YAAY,CAAC,CACjD;AACF,CACF,CACF,CAEA;AACA,IAAK,KAAM,CAAAC,KAAK,GAAI,CAAAtF,YAAY,CAAE,CAChC,GAAI,CACFK,OAAO,CAACC,GAAG,CAAC,WAAWgF,KAAK,QAAQnF,MAAM,CAACuD,GAAG,EAAE,CAAC,CAEjD;AACA,GAAI,CAAA6B,SAAS,CAAGpF,MAAM,CAACuD,GAAG,CAC1B,GAAI,CAAAhD,OAAO,CAAG,CACZ,QAAQ,CAAE,qDAAqD,CAC/D,YAAY,CAAE,qHAChB,CAAC,CAED;AACA,IAAK,KAAM,CAAA8E,SAAS,GAAI,CAAAvF,mBAAmB,CAAE,CAC3C,GAAIE,MAAM,CAACuD,GAAG,CAAC3C,QAAQ,CAACyE,SAAS,CAAC,CAAE,CAClCD,SAAS,CAAGtF,mBAAmB,CAACuF,SAAS,CAAC,CAC1CnF,OAAO,CAACC,GAAG,CAAC,eAAeiF,SAAS,EAAE,CAAC,CACvC,MACF,CACF,CAEA;AACA,KAAM,CAAA/E,QAAQ,CAAG,KAAM,CAAAhE,KAAK,CAAC+E,GAAG,CAAC,GAAG+D,KAAK,GAAGG,kBAAkB,CAACF,SAAS,CAAC,EAAE,CAAE,CAAE7E,OAAQ,CAAC,CAAC,CACzF,KAAM,CAAAG,OAAO,CAAGL,QAAQ,CAACS,IAAI,CAE7B;AACA,GAAI,MAAO,CAAAJ,OAAO,GAAK,QAAQ,EAAIA,OAAO,CAACE,QAAQ,CAAC,iBAAiB,CAAC,CAAE,CACtEV,OAAO,CAACC,GAAG,CAAC,yBAAyB,CAAC,CAEtC;AACA,KAAM,CAAAoF,MAAM,CAAG,GAAI,CAAAC,SAAS,CAAC,CAAC,CAC9B,KAAM,CAAAC,GAAG,CAAGF,MAAM,CAACG,eAAe,CAAChF,OAAO,CAAE,WAAW,CAAC,CAExD;AACA,KAAM,CAAAiF,QAAQ,CAAGC,KAAK,CAAClE,IAAI,CAAC+D,GAAG,CAACI,gBAAgB,CAAC,qEAAqE,CAAC,CAAC,CAExH,GAAIF,QAAQ,CAAClC,MAAM,CAAG,CAAC,CAAE,CACvB,KAAM,CAAArD,MAAM,CAAGuF,QAAQ,CAAC,CAAC,CAAC,CAACG,YAAY,CAAC,MAAM,CAAC,CAC/C5F,OAAO,CAACC,GAAG,CAAC,YAAYC,MAAM,EAAE,CAAC,CAEjC;AACA,GAAI,CAAA2F,cAAc,CAAG3F,MAAM,CAC3B,GAAIA,MAAM,CAAC4F,UAAU,CAAC,GAAG,CAAC,CAAE,CAC1B,KAAM,CAAAC,MAAM,CAAG,GAAI,CAAAC,GAAG,CAACd,SAAS,CAAC,CACjCW,cAAc,CAAG,GAAGE,MAAM,CAACE,QAAQ,KAAKF,MAAM,CAACG,IAAI,GAAGhG,MAAM,EAAE,CAChE,CAEA;AACA,KAAM,CAAAiG,SAAS,CAAG,CAAE,GAAGrG,MAAM,CAAEuD,GAAG,CAAEwC,cAAe,CAAC,CACpD,MAAO,CAAApC,WAAW,CAAC0C,SAAS,CAAC,CAC/B,CAAC,IAAM,CACL,KAAM,IAAI,CAAAvB,KAAK,CAAC,0BAA0B,CAAC,CAC7C,CACF,CAEQ;AACA,GAAI,CAAAZ,YAAY,CAAG,GAAI,CAAAC,OAAO,CAAC,CAACC,OAAO,CAAEC,MAAM,GAAK,CAClD/H,MAAM,CAACgI,WAAW,CAAC5D,OAAO,CAAE,CAC1B6D,aAAa,CAAE,KAAK,CACpBC,WAAW,CAAE,KAAK,CAClBC,IAAI,CAAE,IAAI,CACVC,SAAS,CAAE,IAAI,CACfC,aAAa,CAAE,KAAK,CACpBC,UAAU,CAAE,IAAI,CAChBC,YAAY,CAAE,KAChB,CAAC,CAAE,CAAChB,GAAG,CAAEI,MAAM,GAAK,CAClB,GAAIJ,GAAG,CAAE,CACP3D,OAAO,CAACa,KAAK,CAAC,UAAU,CAAE8C,GAAG,CAAC,CAC9BQ,MAAM,CAAC,GAAI,CAAAS,KAAK,CAAC,SAAS,CAAC,CAAC,CAC5B,OACF,CACAV,OAAO,CAACH,MAAM,CAAC,CACjB,CAAC,CAAC,CACJ,CAAC,CAAC,CAEF,GAAI,CACF,KAAM,CAAAc,YAAY,CAAG,KAAM,CAAAb,YAAY,CACvCc,gBAAgB,CAACD,YAAY,CAAC,CAC9B,OAAQ;AACV,CAAE,MAAOE,UAAU,CAAE,CACnB/E,OAAO,CAACa,KAAK,CAAC,UAAU,CAAEkE,UAAU,CAAC,CACrC;AACA,GAAI,CACF,GAAI,CAAAqB,oBAAoB,CAAG,GAAI,CAAAnC,OAAO,CAAC,CAACC,OAAO,CAAEC,MAAM,GAAK,CAC1D/H,MAAM,CAACgI,WAAW,CAAC5D,OAAO,CAAE,CAC1B6F,MAAM,CAAE,KAAK,CACbhC,aAAa,CAAE,KAAK,CACpBC,WAAW,CAAE,IAAI,CACjBC,IAAI,CAAE,IACR,CAAC,CAAE,CAACZ,GAAG,CAAEI,MAAM,GAAK,CAClB,GAAIJ,GAAG,CAAE,CACPQ,MAAM,CAACR,GAAG,CAAC,CACX,OACF,CACAO,OAAO,CAACH,MAAM,CAAC,CACjB,CAAC,CAAC,CACJ,CAAC,CAAC,CAEF,KAAM,CAAAuC,cAAc,CAAG,KAAM,CAAAF,oBAAoB,CACjDtB,gBAAgB,CAACwB,cAAc,CAAC,CAChC,OAAQ;AACV,CAAE,MAAOC,aAAa,CAAE,CACtBvG,OAAO,CAACa,KAAK,CAAC,aAAa,CAAE0F,aAAa,CAAC,CAC3C;AACF,CACF,CAEV,CAAE,MAAO1F,KAAK,CAAE,CACdb,OAAO,CAACa,KAAK,CAAC,QAAQoE,KAAK,QAAQ,CAAEpE,KAAK,CAAC,CAC3CgD,SAAS,CAAGhD,KAAK,CACjB;AACF,CACF,CAEA;AACAb,OAAO,CAACa,KAAK,CAAC,aAAa,CAAC,CAC5B,KAAM,CAAAgD,SAAS,EAAI,GAAI,CAAAe,KAAK,CAAC,sBAAsB,CAAC,CACtD,CAAC,CAED;AACA,KAAM,CAAAE,gBAAgB,CAAIf,MAAM,EAAK,CACnC,GAAI,CAAAyC,KAAK,CAAG,EAAE,CAEd,GAAI,CACF;AACA,GAAIzC,MAAM,CAAC0C,GAAG,EAAI1C,MAAM,CAAC0C,GAAG,CAACC,OAAO,EAAI3C,MAAM,CAAC0C,GAAG,CAACC,OAAO,CAAC,CAAC,CAAC,CAACC,IAAI,CAAE,CAClE;AACAH,KAAK,CAAGzC,MAAM,CAAC0C,GAAG,CAACC,OAAO,CAAC,CAAC,CAAC,CAACC,IAAI,CAACC,GAAG,CAACD,IAAI,EAAI,CAC7C,GAAI,CACF,MAAO,CACLE,KAAK,CAAEF,IAAI,CAACE,KAAK,CAAI,MAAO,CAAAF,IAAI,CAACE,KAAK,CAAC,CAAC,CAAC,GAAK,QAAQ,CAAGF,IAAI,CAACE,KAAK,CAAC,CAAC,CAAC,CAAIF,IAAI,CAACE,KAAK,CAAC,CAAC,CAAC,EAAIF,IAAI,CAACE,KAAK,CAAC,CAAC,CAAC,CAACC,CAAC,CAAGH,IAAI,CAACE,KAAK,CAAC,CAAC,CAAC,CAACC,CAAC,CAAG,KAAM,CAAI,KAAK,CAC9IC,IAAI,CAAEJ,IAAI,CAACI,IAAI,CAAI,MAAO,CAAAJ,IAAI,CAACI,IAAI,CAAC,CAAC,CAAC,GAAK,QAAQ,CAAGJ,IAAI,CAACI,IAAI,CAAC,CAAC,CAAC,CAAIJ,IAAI,CAACI,IAAI,CAAC,CAAC,CAAC,EAAIJ,IAAI,CAACI,IAAI,CAAC,CAAC,CAAC,CAACD,CAAC,CAAGH,IAAI,CAACI,IAAI,CAAC,CAAC,CAAC,CAACD,CAAC,CAAG,GAAI,CAAI,GAAG,CACnIE,IAAI,CAAEL,IAAI,CAACM,OAAO,CAAG,GAAI,CAAAlG,IAAI,CAAC4F,IAAI,CAACM,OAAO,CAAC,CAAC,CAAC,CAAC,CAAG,GAAI,CAAAlG,IAAI,CAAC,CAAC,CAC3DmG,WAAW,CAAEP,IAAI,CAACO,WAAW,CAAI,MAAO,CAAAP,IAAI,CAACO,WAAW,CAAC,CAAC,CAAC,GAAK,QAAQ,CAAGP,IAAI,CAACO,WAAW,CAAC,CAAC,CAAC,CAAIP,IAAI,CAACO,WAAW,CAAC,CAAC,CAAC,EAAIP,IAAI,CAACO,WAAW,CAAC,CAAC,CAAC,CAACJ,CAAC,CAAGH,IAAI,CAACO,WAAW,CAAC,CAAC,CAAC,CAACJ,CAAC,CAAG,EAAG,CAAI,EAClL,CAAC,CACH,CAAE,MAAOK,SAAS,CAAE,CAClBnH,OAAO,CAACa,KAAK,CAAC,aAAa,CAAEsG,SAAS,CAAC,CACvC,MAAO,CACLN,KAAK,CAAE,MAAM,CACbE,IAAI,CAAE,GAAG,CACTC,IAAI,CAAE,GAAI,CAAAjG,IAAI,CAAC,CAAC,CAChBmG,WAAW,CAAE,SACf,CAAC,CACH,CACF,CAAC,CAAC,CACJ,CAAC,IAAM,IAAInD,MAAM,CAACqD,IAAI,EAAIrD,MAAM,CAACqD,IAAI,CAACC,KAAK,CAAE,CAC3C;AACAb,KAAK,CAAGzC,MAAM,CAACqD,IAAI,CAACC,KAAK,CAACT,GAAG,CAACS,KAAK,EAAI,CACrC;AACA,GAAI,CAAAN,IAAI,CAAG,GAAG,CACd,GAAIM,KAAK,CAACN,IAAI,CAAE,CACd,GAAIrB,KAAK,CAAC4B,OAAO,CAACD,KAAK,CAACN,IAAI,CAAC,CAAE,CAC7B,KAAM,CAAAQ,OAAO,CAAGF,KAAK,CAACN,IAAI,CAACS,IAAI,CAACC,CAAC,EAAIA,CAAC,CAACC,CAAC,GAAKD,CAAC,CAACC,CAAC,CAACC,GAAG,GAAK,WAAW,EAAI,CAACF,CAAC,CAACC,CAAC,CAACC,GAAG,CAAC,CAAC,CAClF,GAAIJ,OAAO,EAAIA,OAAO,CAACG,CAAC,EAAIH,OAAO,CAACG,CAAC,CAACE,IAAI,CAAE,CAC1Cb,IAAI,CAAGQ,OAAO,CAACG,CAAC,CAACE,IAAI,CACvB,CAAC,IAAM,IAAIP,KAAK,CAACN,IAAI,CAAC,CAAC,CAAC,EAAIM,KAAK,CAACN,IAAI,CAAC,CAAC,CAAC,CAACW,CAAC,EAAIL,KAAK,CAACN,IAAI,CAAC,CAAC,CAAC,CAACW,CAAC,CAACE,IAAI,CAAE,CACnEb,IAAI,CAAGM,KAAK,CAACN,IAAI,CAAC,CAAC,CAAC,CAACW,CAAC,CAACE,IAAI,CAC7B,CACF,CAAC,IAAM,IAAI,MAAO,CAAAP,KAAK,CAACN,IAAI,GAAK,QAAQ,CAAE,CACzCA,IAAI,CAAGM,KAAK,CAACN,IAAI,CACnB,CACF,CAEA;AACA,GAAI,CAAAF,KAAK,CAAG,KAAK,CACjB,GAAIQ,KAAK,CAACR,KAAK,CAAE,CACf,GAAI,MAAO,CAAAQ,KAAK,CAACR,KAAK,CAAC,CAAC,CAAC,GAAK,QAAQ,CAAE,CACtCA,KAAK,CAAGQ,KAAK,CAACR,KAAK,CAAC,CAAC,CAAC,CACxB,CAAC,IAAM,IAAIQ,KAAK,CAACR,KAAK,CAAC,CAAC,CAAC,EAAIQ,KAAK,CAACR,KAAK,CAAC,CAAC,CAAC,CAACC,CAAC,CAAE,CAC7CD,KAAK,CAAGQ,KAAK,CAACR,KAAK,CAAC,CAAC,CAAC,CAACC,CAAC,CAC1B,CAAC,IAAM,IAAI,MAAO,CAAAO,KAAK,CAACR,KAAK,GAAK,QAAQ,CAAE,CAC1CA,KAAK,CAAGQ,KAAK,CAACR,KAAK,CACrB,CACF,CAEA;AACA,GAAI,CAAAG,IAAI,CAAG,GAAI,CAAAjG,IAAI,CAAC,CAAC,CACrB,GAAIsG,KAAK,CAACQ,OAAO,CAAE,CACjBb,IAAI,CAAG,GAAI,CAAAjG,IAAI,CAAC,MAAO,CAAAsG,KAAK,CAACQ,OAAO,CAAC,CAAC,CAAC,GAAK,QAAQ,CAAGR,KAAK,CAACQ,OAAO,CAAC,CAAC,CAAC,CAAGR,KAAK,CAACQ,OAAO,CAAC,CAC1F,CAAC,IAAM,IAAIR,KAAK,CAACS,SAAS,CAAE,CAC1Bd,IAAI,CAAG,GAAI,CAAAjG,IAAI,CAAC,MAAO,CAAAsG,KAAK,CAACS,SAAS,CAAC,CAAC,CAAC,GAAK,QAAQ,CAAGT,KAAK,CAACS,SAAS,CAAC,CAAC,CAAC,CAAGT,KAAK,CAACS,SAAS,CAAC,CAChG,CAEA;AACA,GAAI,CAAAZ,WAAW,CAAG,EAAE,CACpB,GAAIG,KAAK,CAACU,OAAO,CAAE,CACjBb,WAAW,CAAG,MAAO,CAAAG,KAAK,CAACU,OAAO,CAAC,CAAC,CAAC,GAAK,QAAQ,CAAGV,KAAK,CAACU,OAAO,CAAC,CAAC,CAAC,CACvDV,KAAK,CAACU,OAAO,CAAC,CAAC,CAAC,EAAIV,KAAK,CAACU,OAAO,CAAC,CAAC,CAAC,CAACjB,CAAC,CAAGO,KAAK,CAACU,OAAO,CAAC,CAAC,CAAC,CAACjB,CAAC,CAAG,EAAG,CACjF,CAAC,IAAM,IAAIO,KAAK,CAACW,OAAO,CAAE,CACxBd,WAAW,CAAG,MAAO,CAAAG,KAAK,CAACW,OAAO,CAAC,CAAC,CAAC,GAAK,QAAQ,CAAGX,KAAK,CAACW,OAAO,CAAC,CAAC,CAAC,CACvDX,KAAK,CAACW,OAAO,CAAC,CAAC,CAAC,EAAIX,KAAK,CAACW,OAAO,CAAC,CAAC,CAAC,CAAClB,CAAC,CAAGO,KAAK,CAACW,OAAO,CAAC,CAAC,CAAC,CAAClB,CAAC,CAAG,EAAG,CACjF,CAEA,MAAO,CAAED,KAAK,CAAEE,IAAI,CAAEC,IAAI,CAAEE,WAAY,CAAC,CAC3C,CAAC,CAAC,CACJ,CAAC,IAAM,IAAInD,MAAM,CAAC,SAAS,CAAC,CAAE,CAC5B;AACA,KAAM,CAAAkE,QAAQ,CAAGlE,MAAM,CAAC,SAAS,CAAC,CAAC4C,IAAI,EACvB5C,MAAM,CAAC,SAAS,CAAC,CAAC2C,OAAO,EAAI3C,MAAM,CAAC,SAAS,CAAC,CAAC2C,OAAO,CAAC,CAAC,CAAC,EAAI3C,MAAM,CAAC,SAAS,CAAC,CAAC2C,OAAO,CAAC,CAAC,CAAC,CAACC,IAAK,CAE/G,GAAIsB,QAAQ,CAAE,CACZzB,KAAK,CAAGyB,QAAQ,CAACrB,GAAG,CAACD,IAAI,GAAK,CAC5BE,KAAK,CAAEF,IAAI,CAACE,KAAK,CAAI,MAAO,CAAAF,IAAI,CAACE,KAAK,CAAC,CAAC,CAAC,GAAK,QAAQ,CAAGF,IAAI,CAACE,KAAK,CAAC,CAAC,CAAC,CAAGF,IAAI,CAACE,KAAK,CAAC,CAAC,CAAC,CAACC,CAAC,CAAI,KAAK,CACjGC,IAAI,CAAEJ,IAAI,CAACI,IAAI,CAAI,MAAO,CAAAJ,IAAI,CAACI,IAAI,CAAC,CAAC,CAAC,GAAK,QAAQ,CAAGJ,IAAI,CAACI,IAAI,CAAC,CAAC,CAAC,CAAGJ,IAAI,CAACI,IAAI,CAAC,CAAC,CAAC,CAACD,CAAC,CAAI,GAAG,CAC1FE,IAAI,CAAEL,IAAI,CAAC,SAAS,CAAC,CAAG,GAAI,CAAA5F,IAAI,CAAC4F,IAAI,CAAC,SAAS,CAAC,CAAC,CAAC,CAAC,CAAC,CAAG,GAAI,CAAA5F,IAAI,CAAC,CAAC,CACjEmG,WAAW,CAAEP,IAAI,CAACO,WAAW,CAAI,MAAO,CAAAP,IAAI,CAACO,WAAW,CAAC,CAAC,CAAC,GAAK,QAAQ,CAAGP,IAAI,CAACO,WAAW,CAAC,CAAC,CAAC,CAAGP,IAAI,CAACO,WAAW,CAAC,CAAC,CAAC,CAACJ,CAAC,CAAI,EAC5H,CAAC,CAAC,CAAC,CACL,CACF,CAAC,IAAM,CACL;AACA,KAAM,CAAAoB,SAAS,CAAG,QAAAA,CAACC,GAAG,CAAgB,IAAd,CAAAC,KAAK,CAAAC,SAAA,CAAA9E,MAAA,IAAA8E,SAAA,MAAAC,SAAA,CAAAD,SAAA,IAAG,CAAC,CAC/B,GAAI,CAACF,GAAG,EAAI,MAAO,CAAAA,GAAG,GAAK,QAAQ,EAAIC,KAAK,CAAG,CAAC,CAAE,MAAO,KAAI,CAE7D;AACA,GAAID,GAAG,CAACxB,IAAI,EAAIjB,KAAK,CAAC4B,OAAO,CAACa,GAAG,CAACxB,IAAI,CAAC,CAAE,CACvC,MAAO,CAAAwB,GAAG,CAACxB,IAAI,CAACC,GAAG,CAACD,IAAI,GAAK,CAC3BE,KAAK,CAAE0B,kBAAkB,CAAC5B,IAAI,CAACE,KAAK,CAAC,EAAI,KAAK,CAC9CE,IAAI,CAAEwB,kBAAkB,CAAC5B,IAAI,CAACI,IAAI,CAAC,EAAI,GAAG,CAC1CC,IAAI,CAAEL,IAAI,CAACM,OAAO,CAAG,GAAI,CAAAlG,IAAI,CAACwH,kBAAkB,CAAC5B,IAAI,CAACM,OAAO,CAAC,CAAC,CAAG,GAAI,CAAAlG,IAAI,CAAC,CAAC,CAC5EmG,WAAW,CAAEqB,kBAAkB,CAAC5B,IAAI,CAACO,WAAW,CAAC,EAAI,EACvD,CAAC,CAAC,CAAC,CACL,CAEA,GAAIiB,GAAG,CAACd,KAAK,EAAI3B,KAAK,CAAC4B,OAAO,CAACa,GAAG,CAACd,KAAK,CAAC,CAAE,CACzC,MAAO,CAAAc,GAAG,CAACd,KAAK,CAACT,GAAG,CAACS,KAAK,GAAK,CAC7BR,KAAK,CAAE0B,kBAAkB,CAAClB,KAAK,CAACR,KAAK,CAAC,EAAI,KAAK,CAC/CE,IAAI,CAAEyB,oBAAoB,CAACnB,KAAK,CAAC,EAAI,GAAG,CACxCL,IAAI,CAAEK,KAAK,CAACQ,OAAO,CAAG,GAAI,CAAA9G,IAAI,CAACwH,kBAAkB,CAAClB,KAAK,CAACQ,OAAO,CAAC,CAAC,CAAG,GAAI,CAAA9G,IAAI,CAAC,CAAC,CAC9EmG,WAAW,CAAEqB,kBAAkB,CAAClB,KAAK,CAACU,OAAO,EAAIV,KAAK,CAACW,OAAO,CAAC,EAAI,EACrE,CAAC,CAAC,CAAC,CACL,CAEA;AACA,IAAK,KAAM,CAAAS,GAAG,GAAI,CAAAN,GAAG,CAAE,CACrB,GAAI,MAAO,CAAAA,GAAG,CAACM,GAAG,CAAC,GAAK,QAAQ,EAAIN,GAAG,CAACM,GAAG,CAAC,GAAK,IAAI,CAAE,CACrD,KAAM,CAAAC,KAAK,CAAGR,SAAS,CAACC,GAAG,CAACM,GAAG,CAAC,CAAEL,KAAK,CAAG,CAAC,CAAC,CAC5C,GAAIM,KAAK,EAAIA,KAAK,CAACnF,MAAM,CAAG,CAAC,CAAE,MAAO,CAAAmF,KAAK,CAC7C,CACF,CAEA,MAAO,KAAI,CACb,CAAC,CAED;AACA,KAAM,CAAAH,kBAAkB,CAAII,KAAK,EAAK,CACpC,GAAI,CAACA,KAAK,CAAE,MAAO,EAAE,CACrB,GAAI,MAAO,CAAAA,KAAK,GAAK,QAAQ,CAAE,MAAO,CAAAA,KAAK,CAC3C,GAAIjD,KAAK,CAAC4B,OAAO,CAACqB,KAAK,CAAC,CAAE,CACxB,GAAIA,KAAK,CAACpF,MAAM,GAAK,CAAC,CAAE,MAAO,EAAE,CACjC,GAAI,MAAO,CAAAoF,KAAK,CAAC,CAAC,CAAC,GAAK,QAAQ,CAAE,MAAO,CAAAA,KAAK,CAAC,CAAC,CAAC,CACjD,GAAIA,KAAK,CAAC,CAAC,CAAC,EAAIA,KAAK,CAAC,CAAC,CAAC,CAAC7B,CAAC,CAAE,MAAO,CAAA6B,KAAK,CAAC,CAAC,CAAC,CAAC7B,CAAC,CAC7C,GAAI6B,KAAK,CAAC,CAAC,CAAC,EAAI,MAAO,CAAAA,KAAK,CAAC,CAAC,CAAC,GAAK,QAAQ,CAAE,CAC5C,IAAK,KAAM,CAAAF,GAAG,GAAI,CAAAE,KAAK,CAAC,CAAC,CAAC,CAAE,CAC1B,GAAI,MAAO,CAAAA,KAAK,CAAC,CAAC,CAAC,CAACF,GAAG,CAAC,GAAK,QAAQ,CAAE,MAAO,CAAAE,KAAK,CAAC,CAAC,CAAC,CAACF,GAAG,CAAC,CAC7D,CACF,CACF,CACA,MAAO,EAAE,CACX,CAAC,CAED;AACA,KAAM,CAAAD,oBAAoB,CAAInB,KAAK,EAAK,CACtC,GAAI,CAACA,KAAK,CAACN,IAAI,CAAE,MAAO,EAAE,CAC1B,GAAI,MAAO,CAAAM,KAAK,CAACN,IAAI,GAAK,QAAQ,CAAE,MAAO,CAAAM,KAAK,CAACN,IAAI,CACrD,GAAIrB,KAAK,CAAC4B,OAAO,CAACD,KAAK,CAACN,IAAI,CAAC,CAAE,CAC7B,IAAK,KAAM,CAAAA,IAAI,GAAI,CAAAM,KAAK,CAACN,IAAI,CAAE,CAC7B,GAAI,MAAO,CAAAA,IAAI,GAAK,QAAQ,CAAE,MAAO,CAAAA,IAAI,CACzC,GAAIA,IAAI,CAACW,CAAC,EAAIX,IAAI,CAACW,CAAC,CAACE,IAAI,CAAE,MAAO,CAAAb,IAAI,CAACW,CAAC,CAACE,IAAI,CAC/C,CACF,CACA,MAAO,EAAE,CACX,CAAC,CAED,KAAM,CAAAgB,UAAU,CAAGV,SAAS,CAACnE,MAAM,CAAC,CACpC,GAAI6E,UAAU,EAAIA,UAAU,CAACrF,MAAM,CAAG,CAAC,CAAE,CACvCiD,KAAK,CAAGoC,UAAU,CACpB,CAAC,IAAM,CACL5I,OAAO,CAACa,KAAK,CAAC,cAAc,CAAEkD,MAAM,CAAC,CACrC,KAAM,IAAI,CAAAa,KAAK,CAAC,WAAW,CAAC,CAC9B,CACF,CAEA;AACApC,YAAY,CAACgE,KAAK,CAAC,CACrB,CAAE,MAAOzB,UAAU,CAAE,CACnB/E,OAAO,CAACa,KAAK,CAAC,YAAY,CAAEkE,UAAU,CAAEhB,MAAM,CAAC,CAC/C,KAAM,IAAI,CAAAa,KAAK,CAAC,WAAW,CAAC,CAC9B,CACF,CAAC,CAED;AACA,KAAM,CAAAlB,YAAY,CAAG,KAAO,CAAA5D,MAAM,EAAK,CACrC,GAAI,CACF;AACA,IAAK,KAAM,CAAAmF,KAAK,GAAI,CAAAtF,YAAY,CAAE,CAChC,GAAI,CACFK,OAAO,CAACC,GAAG,CAAC,WAAWgF,KAAK,YAAYnF,MAAM,CAACuD,GAAG,EAAE,CAAC,CACrD,KAAM,CAAAlD,QAAQ,CAAG,KAAM,CAAAhE,KAAK,CAAC+E,GAAG,CAAC,GAAG+D,KAAK,GAAGG,kBAAkB,CAACtF,MAAM,CAACuD,GAAG,CAAC,EAAE,CAAC,CAC7E,KAAM,CAAAwF,QAAQ,CAAG1I,QAAQ,CAACS,IAAI,CAE9B,GAAIiI,QAAQ,CAAE,CACZ;AACA,KAAM,CAAAxD,MAAM,CAAG,GAAI,CAAAC,SAAS,CAAC,CAAC,CAC9B,KAAM,CAAAC,GAAG,CAAGF,MAAM,CAACG,eAAe,CAACqD,QAAQ,CAAE,WAAW,CAAC,CAEzD;AACA;AACA,KAAM,CAAAC,QAAQ,CAAGpD,KAAK,CAAClE,IAAI,CAAC+D,GAAG,CAACI,gBAAgB,CAAC,+CAA+C,CAAC,CAAC,CAElG,KAAM,CAAAa,KAAK,CAAGsC,QAAQ,CAAClC,GAAG,CAACmC,OAAO,EAAI,CACpC;AACA,GAAI,CAAAhC,IAAI,CAAG,GAAG,CACd,KAAM,CAAAiC,WAAW,CAAGD,OAAO,CAACE,aAAa,CAAC,GAAG,CAAC,EAAIF,OAAO,CAACG,OAAO,CAAC,GAAG,CAAC,CACtE,GAAIF,WAAW,EAAIA,WAAW,CAACpB,IAAI,CAAE,CACnC;AACA,GAAIoB,WAAW,CAACpB,IAAI,CAAC9B,UAAU,CAAC,GAAG,CAAC,CAAE,CACpC,KAAM,CAAAzC,GAAG,CAAG,GAAI,CAAA2C,GAAG,CAAClG,MAAM,CAACuD,GAAG,CAAC,CAC/B0D,IAAI,CAAG,GAAG1D,GAAG,CAAC4C,QAAQ,KAAK5C,GAAG,CAAC6C,IAAI,GAAG8C,WAAW,CAACpB,IAAI,EAAE,CAC1D,CAAC,IAAM,CACLb,IAAI,CAAGiC,WAAW,CAACpB,IAAI,CACzB,CACF,CAEA,MAAO,CACLf,KAAK,CAAEkC,OAAO,CAACI,WAAW,CAAC5E,IAAI,CAAC,CAAC,CACjCwC,IAAI,CACJC,IAAI,CAAE,GAAI,CAAAjG,IAAI,CAAC,CAAC,CAChBmG,WAAW,CAAE,EACf,CAAC,CACH,CAAC,CAAC,CAACkC,MAAM,CAACzC,IAAI,EAAIA,IAAI,CAACE,KAAK,CAAC,CAAE;AAE/B,GAAIL,KAAK,CAACjD,MAAM,CAAG,CAAC,CAAE,CACpBf,YAAY,CAACgE,KAAK,CAAC,CACnB,OAAQ;AACV,CACF,CACF,CAAE,MAAO6C,UAAU,CAAE,CACnBrJ,OAAO,CAACa,KAAK,CAAC,QAAQoE,KAAK,YAAY,CAAEoE,UAAU,CAAC,CACpD;AACF,CACF,CAEA;AACA,KAAM,IAAI,CAAAzE,KAAK,CAAC,aAAa,CAAC,CAChC,CAAE,MAAO/D,KAAK,CAAE,CACdb,OAAO,CAACa,KAAK,CAAC,WAAW,CAAEA,KAAK,CAAC,CACjC,KAAM,IAAI,CAAA+D,KAAK,CAAC,UAAU,CAAC,CAC7B,CACF,CAAC,CAED;AACA,KAAM,CAAA0E,kBAAkB,CAAGA,CAAA,GAAM,CAC/BrG,gBAAgB,CAAC,IAAI,CAAC,CACtBE,WAAW,CAAC,CACVC,IAAI,CAAE,EAAE,CACRC,GAAG,CAAE,EAAE,CACPhE,IAAI,CAAE,KACR,CAAC,CAAC,CACFwD,YAAY,CAAC,IAAI,CAAC,CACpB,CAAC,CAED;AACA,KAAM,CAAA0G,mBAAmB,CAAIzJ,MAAM,EAAK,CACtCmD,gBAAgB,CAACnD,MAAM,CAAC,CACxBqD,WAAW,CAAC,CACVC,IAAI,CAAEtD,MAAM,CAACsD,IAAI,CACjBC,GAAG,CAAEvD,MAAM,CAACuD,GAAG,CACfhE,IAAI,CAAES,MAAM,CAACT,IACf,CAAC,CAAC,CACFwD,YAAY,CAAC,IAAI,CAAC,CACpB,CAAC,CAED;AACA,KAAM,CAAA2G,UAAU,CAAGA,CAAA,GAAM,CACvB3G,YAAY,CAAC,KAAK,CAAC,CACnBI,gBAAgB,CAAC,IAAI,CAAC,CACxB,CAAC,CAED;AACA,KAAM,CAAAwG,gBAAgB,CAAGA,CAAA,GAAM,CAC7B1G,mBAAmB,CAAC,IAAI,CAAC,CAC3B,CAAC,CAED;AACA,KAAM,CAAA2G,iBAAiB,CAAGA,CAAA,GAAM,CAC9B3G,mBAAmB,CAAC,KAAK,CAAC,CAC5B,CAAC,CAED;AACA,KAAM,CAAA4G,iBAAiB,CAAIC,CAAC,EAAK,CAC/B,KAAM,CAAExG,IAAI,CAAEuF,KAAM,CAAC,CAAGiB,CAAC,CAACC,MAAM,CAChC1G,WAAW,CAAC2G,IAAI,GAAK,CACnB,GAAGA,IAAI,CACP,CAAC1G,IAAI,EAAGuF,KACV,CAAC,CAAC,CAAC,CACL,CAAC,CAED;AACA,KAAM,CAAAoB,UAAU,CAAGA,CAAA,GAAM,CACvB,GAAI,CAAC7G,QAAQ,CAACE,IAAI,CAACmB,IAAI,CAAC,CAAC,EAAI,CAACrB,QAAQ,CAACG,GAAG,CAACkB,IAAI,CAAC,CAAC,CAAE,CACjDyF,KAAK,CAAC,SAAS,CAAC,CAChB,OACF,CAEA,KAAM,CAAA7D,SAAS,CAAG,CAChB8D,EAAE,CAAEjH,aAAa,CAAGA,aAAa,CAACiH,EAAE,CAAGlJ,IAAI,CAACmJ,GAAG,CAAC,CAAC,CACjD9G,IAAI,CAAEF,QAAQ,CAACE,IAAI,CAACmB,IAAI,CAAC,CAAC,CAC1BlB,GAAG,CAAEH,QAAQ,CAACG,GAAG,CAACkB,IAAI,CAAC,CAAC,CACxBlF,IAAI,CAAE6D,QAAQ,CAAC7D,IACjB,CAAC,CAED,GAAI,CAAA8K,cAAc,CAElB,GAAInH,aAAa,CAAE,CACjB;AACAmH,cAAc,CAAGhI,OAAO,CAACyE,GAAG,CAAC9G,MAAM,EACjCA,MAAM,CAACmK,EAAE,GAAKjH,aAAa,CAACiH,EAAE,CAAG9D,SAAS,CAAGrG,MAC/C,CAAC,CACH,CAAC,IAAM,CACL;AACAqK,cAAc,CAAG,CAAC,GAAGhI,OAAO,CAAEgE,SAAS,CAAC,CAC1C,CAEA/D,UAAU,CAAC+H,cAAc,CAAC,CAC1BlO,aAAa,CAAC,uBAAuB,CAAEkO,cAAc,CAAC,CAEtD;AACA,GAAIhI,OAAO,CAACoB,MAAM,GAAK,CAAC,EAAI,CAACP,aAAa,CAAE,CAC1CV,eAAe,CAAC6D,SAAS,CAAC,CAC5B,CAEA;AACAqD,UAAU,CAAC,CAAC,CACZE,iBAAiB,CAAC,CAAC,CACrB,CAAC,CAED;AACA,KAAM,CAAAU,YAAY,CAAIH,EAAE,EAAK,CAC3B,GAAII,MAAM,CAACC,OAAO,CAAC,cAAc,CAAC,CAAE,CAClC,KAAM,CAAAH,cAAc,CAAGhI,OAAO,CAACiH,MAAM,CAACtJ,MAAM,EAAIA,MAAM,CAACmK,EAAE,GAAKA,EAAE,CAAC,CACjE7H,UAAU,CAAC+H,cAAc,CAAC,CAC1BlO,aAAa,CAAC,uBAAuB,CAAEkO,cAAc,CAAC,CAEtD;AACA,GAAI9H,YAAY,EAAIA,YAAY,CAAC4H,EAAE,GAAKA,EAAE,CAAE,CAC1C,GAAIE,cAAc,CAAC5G,MAAM,CAAG,CAAC,CAAE,CAC7BjB,eAAe,CAAC6H,cAAc,CAAC,CAAC,CAAC,CAAC,CACpC,CAAC,IAAM,CACL7H,eAAe,CAAC,IAAI,CAAC,CACrBE,YAAY,CAAC,EAAE,CAAC,CAClB,CACF,CAEA;AACA,GAAI,CAACM,gBAAgB,CAAE,CACrB0G,UAAU,CAAC,CAAC,CACd,CACF,CACF,CAAC,CAED;AACA,KAAM,CAAAe,MAAM,CAAGA,CAAA,GAAM,CACnBF,MAAM,CAACG,OAAO,CAACC,IAAI,CAAC,CAAC,CACvB,CAAC,CAED,mBACE3N,KAAA,CAACC,aAAa,EAAA2N,QAAA,eACZ9N,IAAA,CAACK,UAAU,EAAAyN,QAAA,cACT5N,KAAA,QAAK6N,KAAK,CAAE,CAAEC,OAAO,CAAE,MAAM,CAAEC,UAAU,CAAE,QAAS,CAAE,CAAAH,QAAA,eACpD9N,IAAA,CAACQ,UAAU,EAAC0N,OAAO,CAAEP,MAAO,CAAC1D,KAAK,CAAC,cAAI,CAAA6D,QAAA,cACrC9N,IAAA,CAACJ,aAAa,GAAE,CAAC,CACP,CAAC,cACbI,IAAA,CAACM,WAAW,EAAAwN,QAAA,CAAC,cAAE,CAAa,CAAC,EAC1B,CAAC,CACI,CAAC,cAEb5N,KAAA,CAACQ,gBAAgB,EAAAoN,QAAA,EACdvI,OAAO,CAACyE,GAAG,CAAC9G,MAAM,eACjBhD,KAAA,CAACS,YAAY,EAEXE,MAAM,CAAE4E,YAAY,EAAIA,YAAY,CAAC4H,EAAE,GAAKnK,MAAM,CAACmK,EAAG,CACtDa,OAAO,CAAEA,CAAA,GAAMxI,eAAe,CAACxC,MAAM,CAAE,CAAA4K,QAAA,EAEtC5K,MAAM,CAACT,IAAI,GAAK,KAAK,cAAGzC,IAAA,CAACH,WAAW,GAAE,CAAC,cAAGG,IAAA,CAACF,QAAQ,GAAE,CAAC,CACtDoD,MAAM,CAACsD,IAAI,GALPtD,MAAM,CAACmK,EAMA,CACf,CAAC,cAEFnN,KAAA,CAACY,eAAe,EAACoN,OAAO,CAAErB,gBAAiB,CAAAiB,QAAA,eACzC9N,IAAA,CAACP,OAAO,GAAE,CAAC,qBAEb,EAAiB,CAAC,EACF,CAAC,cAEnBO,IAAA,CAACe,WAAW,EAAA+M,QAAA,CACTjI,OAAO,cACN7F,IAAA,CAACsB,YAAY,EAAAwM,QAAA,CAAC,uBAAM,CAAc,CAAC,CACjC7J,KAAK,cACPjE,IAAA,CAACuB,UAAU,EAAAuM,QAAA,CAAE7J,KAAK,CAAa,CAAC,CAC9B0B,SAAS,CAACgB,MAAM,CAAG,CAAC,cACtB3G,IAAA,CAACgB,QAAQ,EAAA8M,QAAA,CACNnI,SAAS,CAACqE,GAAG,CAAC,CAACD,IAAI,CAAEoE,KAAK,gBACzBjO,KAAA,CAACe,QAAQ,EAAa+J,IAAI,CAAEjB,IAAI,CAACI,IAAK,CAAC8C,MAAM,CAAC,QAAQ,CAAClC,GAAG,CAAC,qBAAqB,CAAA+C,QAAA,eAC9E9N,IAAA,CAACmB,SAAS,EAAA2M,QAAA,CAAE/D,IAAI,CAACE,KAAK,CAAY,CAAC,CAClCF,IAAI,CAACK,IAAI,eACRpK,IAAA,CAACqB,QAAQ,EAAAyM,QAAA,CACN/D,IAAI,CAACK,IAAI,CAACgE,kBAAkB,CAAC,OAAO,CAAE,CACrCC,IAAI,CAAE,SAAS,CACfC,KAAK,CAAE,MAAM,CACbC,GAAG,CAAE,SACP,CAAC,CAAC,CACM,CACX,GAVYJ,KAWL,CACX,CAAC,CACM,CAAC,CACT1I,YAAY,cACdzF,IAAA,CAACwB,UAAU,EAAAsM,QAAA,cACT9N,IAAA,MAAA8N,QAAA,CAAG,sCAAM,CAAG,CAAC,CACH,CAAC,cAEb9N,IAAA,CAACwB,UAAU,EAAAsM,QAAA,cACT9N,IAAA,MAAA8N,QAAA,CAAG,sCAAM,CAAG,CAAC,CACH,CACb,CACU,CAAC,CAGb9H,SAAS,eACRhG,IAAA,CAACyB,KAAK,EAAAqM,QAAA,cACJ5N,KAAA,CAACwB,YAAY,EAAAoM,QAAA,eACX5N,KAAA,CAACyB,WAAW,EAAAmM,QAAA,eACV9N,IAAA,CAAC4B,UAAU,EAAAkM,QAAA,CAAE1H,aAAa,CAAG,OAAO,CAAG,OAAO,CAAa,CAAC,cAC5DpG,IAAA,CAAC6B,WAAW,EAACqM,OAAO,CAAEtB,UAAW,CAAAkB,QAAA,CAAC,MAAO,CAAa,CAAC,EAC5C,CAAC,cAEd5N,KAAA,CAAC4B,SAAS,EAAAgM,QAAA,eACR9N,IAAA,CAAC+B,KAAK,EAAA+L,QAAA,CAAC,cAAE,CAAO,CAAC,cACjB9N,IAAA,CAACiC,KAAK,EACJQ,IAAI,CAAC,MAAM,CACX+D,IAAI,CAAC,MAAM,CACXuF,KAAK,CAAEzF,QAAQ,CAACE,IAAK,CACrBgI,QAAQ,CAAEzB,iBAAkB,CAC5B0B,WAAW,CAAC,gCAAO,CACpB,CAAC,EACO,CAAC,cAEZvO,KAAA,CAAC4B,SAAS,EAAAgM,QAAA,eACR9N,IAAA,CAAC+B,KAAK,EAAA+L,QAAA,CAAC,cAAE,CAAO,CAAC,cACjB5N,KAAA,CAACiC,MAAM,EACLqE,IAAI,CAAC,MAAM,CACXuF,KAAK,CAAEzF,QAAQ,CAAC7D,IAAK,CACrB+L,QAAQ,CAAEzB,iBAAkB,CAAAe,QAAA,eAE5B9N,IAAA,WAAQ+L,KAAK,CAAC,KAAK,CAAA+B,QAAA,CAAC,kBAAM,CAAQ,CAAC,cACnC9N,IAAA,WAAQ+L,KAAK,CAAC,MAAM,CAAA+B,QAAA,CAAC,cAAE,CAAQ,CAAC,EAC1B,CAAC,EACA,CAAC,cAEZ5N,KAAA,CAAC4B,SAAS,EAAAgM,QAAA,eACR9N,IAAA,CAAC+B,KAAK,EAAA+L,QAAA,CAAC,KAAG,CAAO,CAAC,cAClB9N,IAAA,CAACiC,KAAK,EACJQ,IAAI,CAAC,MAAM,CACX+D,IAAI,CAAC,KAAK,CACVuF,KAAK,CAAEzF,QAAQ,CAACG,GAAI,CACpB+H,QAAQ,CAAEzB,iBAAkB,CAC5B0B,WAAW,CAAEnI,QAAQ,CAAC7D,IAAI,GAAK,KAAK,CAAG,UAAU,CAAG,MAAO,CAC5D,CAAC,EACO,CAAC,cAEZvC,KAAA,CAACmC,WAAW,EAAAyL,QAAA,EACT1H,aAAa,eACZpG,IAAA,CAACsC,MAAM,EACLoM,SAAS,CAAC,QAAQ,CAClBR,OAAO,CAAEA,CAAA,GAAMV,YAAY,CAACpH,aAAa,CAACiH,EAAE,CAAE,CAAAS,QAAA,CAC/C,cAED,CAAQ,CACT,cACD9N,IAAA,CAACsC,MAAM,EAACoM,SAAS,CAAC,WAAW,CAACR,OAAO,CAAEtB,UAAW,CAAAkB,QAAA,CAAC,cAAE,CAAQ,CAAC,cAC9D9N,IAAA,CAACsC,MAAM,EAACoM,SAAS,CAAC,SAAS,CAACR,OAAO,CAAEf,UAAW,CAAAW,QAAA,CAAC,cAAE,CAAQ,CAAC,EACjD,CAAC,EACF,CAAC,CACV,CACR,CAGA5H,gBAAgB,eACflG,IAAA,CAACyB,KAAK,EAAAqM,QAAA,cACJ5N,KAAA,CAACwB,YAAY,EAAAoM,QAAA,eACX5N,KAAA,CAACyB,WAAW,EAAAmM,QAAA,eACV9N,IAAA,CAAC4B,UAAU,EAAAkM,QAAA,CAAC,gCAAK,CAAY,CAAC,cAC9B9N,IAAA,CAAC6B,WAAW,EAACqM,OAAO,CAAEpB,iBAAkB,CAAAgB,QAAA,CAAC,MAAO,CAAa,CAAC,EACnD,CAAC,cAEd5N,KAAA,CAACoC,MAAM,EAACoM,SAAS,CAAC,SAAS,CAACR,OAAO,CAAExB,kBAAmB,CAACqB,KAAK,CAAE,CAAEY,KAAK,CAAE,MAAO,CAAE,CAAAb,QAAA,eAChF9N,IAAA,CAACP,OAAO,GAAE,CAAC,kCACb,EAAQ,CAAC,cAETS,KAAA,CAACqC,WAAW,EAAAuL,QAAA,EACTvI,OAAO,CAACyE,GAAG,CAAC9G,MAAM,eACjBhD,KAAA,CAACsC,UAAU,EAAiBC,IAAI,CAAES,MAAM,CAACT,IAAK,CAAAqL,QAAA,eAC5C5N,KAAA,CAACwC,UAAU,EAAAoL,QAAA,EACR5K,MAAM,CAACT,IAAI,GAAK,KAAK,cAAGzC,IAAA,CAACH,WAAW,GAAE,CAAC,cAAGG,IAAA,CAACF,QAAQ,GAAE,CAAC,cACvDI,KAAA,QAAA4N,QAAA,eACE9N,IAAA,CAAC2C,UAAU,EAAAmL,QAAA,CAAE5K,MAAM,CAACsD,IAAI,CAAa,CAAC,cACtCxG,IAAA,CAAC4C,SAAS,EAAAkL,QAAA,CAAE5K,MAAM,CAACuD,GAAG,CAAY,CAAC,EAChC,CAAC,EACI,CAAC,cACbvG,KAAA,CAAC2C,aAAa,EAAAiL,QAAA,eACZ9N,IAAA,CAAC8C,gBAAgB,EAACoL,OAAO,CAAEA,CAAA,GAAMvB,mBAAmB,CAACzJ,MAAM,CAAE,CAAA4K,QAAA,cAC3D9N,IAAA,CAACN,QAAQ,EAACkP,QAAQ,CAAC,OAAO,CAAE,CAAC,CACb,CAAC,cACnB5O,IAAA,CAAC8C,gBAAgB,EACf4L,SAAS,CAAC,QAAQ,CAClBR,OAAO,CAAEA,CAAA,GAAMV,YAAY,CAACtK,MAAM,CAACmK,EAAE,CAAE,CAAAS,QAAA,cAEvC9N,IAAA,CAACL,UAAU,EAACiP,QAAQ,CAAC,OAAO,CAAE,CAAC,CACf,CAAC,EACN,CAAC,GAlBD1L,MAAM,CAACmK,EAmBZ,CACb,CAAC,CAED9H,OAAO,CAACoB,MAAM,GAAK,CAAC,eACnB3G,IAAA,CAACwB,UAAU,EAAAsM,QAAA,cACT9N,IAAA,MAAA8N,QAAA,CAAG,gCAAK,CAAG,CAAC,CACF,CACb,EACU,CAAC,cAEd9N,IAAA,CAACqC,WAAW,EAAAyL,QAAA,cACV9N,IAAA,CAACsC,MAAM,EAACoM,SAAS,CAAC,WAAW,CAACR,OAAO,CAAEpB,iBAAkB,CAAAgB,QAAA,CAAC,cAAE,CAAQ,CAAC,CAC1D,CAAC,EACF,CAAC,CACV,CACR,EACY,CAAC,CAEpB,CAAC,CAED,cAAe,CAAAxI,IAAI","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}