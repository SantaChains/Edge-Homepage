{"ast":null,"code":"import React,{useState,useEffect,useContext}from'react';import styled from'styled-components';// 组件导入\nimport Header from'./components/Header/Header';import Search from'./components/Search/Search';import ModuleSwitch from'./components/ModuleSwitch/ModuleSwitch';import SettingsPanel from'./settings/SettingsPanel';import Loading from'./components/Loading/Loading';// 模块导入\nimport Calendar from'./modules/Calendar/Calendar';import Bookmark from'./modules/Bookmark/Bookmark';import Todo from'./modules/Todo/Todo';import Note from'./modules/Note/Note';import Quote from'./modules/Quote/Quote';import News from'./modules/News/News';// 模式导入\nimport ZenMode from'./modes/ZenMode/ZenMode';import CurtainMode from'./modes/CurtainMode/CurtainMode';// 上下文导入\nimport{ThemeProvider}from'./contexts/ThemeContext';import{SettingsProvider,SettingsContext}from'./contexts/SettingsContext';// 工具函数导入\nimport{getFromStorage,saveToStorage}from'./utils/storage';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const AppContainer=styled.div`\n  min-height: 100vh;\n  display: flex;\n  flex-direction: column;\n  background-color: var(--background-color);\n  color: var(--text-color);\n  transition: background-color var(--transition-speed), color var(--transition-speed);\n  position: relative;\n  overflow: hidden;\n`;const BackgroundLayer=styled.div`\n  position: absolute;\n  top: 0;\n  left: 0;\n  right: 0;\n  bottom: 0;\n  z-index: 0;\n  background-image: ${props=>props.backgroundImage?`url(${props.backgroundImage})`:'none'};\n  background-color: ${props=>props.backgroundColor||'transparent'};\n  background-size: ${props=>props.backgroundSize||'cover'};\n  background-position: center;\n  background-repeat: ${props=>props.backgroundRepeat||'no-repeat'};\n  opacity: ${props=>props.opacity||1};\n  filter: brightness(${props=>props.brightness||1});\n`;const BlurLayer=styled.div`\n  position: absolute;\n  top: 0;\n  left: 0;\n  right: 0;\n  bottom: 0;\n  z-index: 1;\n  backdrop-filter: blur(${props=>props.blurAmount||0}px);\n  background-color: rgba(0, 0, 0, ${props=>props.overlayOpacity||0});\n`;const ContentLayer=styled.div`\n  position: relative;\n  z-index: 2;\n  flex: 1;\n  display: flex;\n  flex-direction: column;\n  padding: 20px;\n`;const MainContent=styled.main`\n  flex: 1;\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  justify-content: flex-start;\n  padding: 20px 0;\n`;const ModuleContainer=styled.div`\n  width: 100%;\n  max-width: 1200px;\n  margin: 0 auto;\n`;const BottomControls=styled.div`\n  position: fixed;\n  bottom: 20px;\n  right: 20px;\n  display: flex;\n  gap: 10px;\n  z-index: 100;\n`;const ModeButton=styled.button`\n  width: 40px;\n  height: 40px;\n  border-radius: 50%;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  background-color: var(--primary-color);\n  color: white;\n  border: 1px solid var(--border-color);\n  cursor: pointer;\n  box-shadow: 0 2px 10px var(--shadow-color);\n  transition: all 0.3s ease;\n  \n  &:hover {\n    transform: translateY(-3px);\n    box-shadow: 0 5px 15px var(--shadow-color);\n  }\n  \n  svg {\n    font-size: 20px;\n  }\n`;const ErrorContainer=styled.div`\n  display: flex;\n  flex-direction: column;\n  justify-content: center;\n  align-items: center;\n  height: 100vh;\n  font-size: 18px;\n  color: var(--text-color);\n  background-color: var(--background-color);\n  padding: 20px;\n  text-align: center;\n`;const ErrorTitle=styled.h2`\n  color: var(--error-color, #f44336);\n  margin-bottom: 16px;\n`;const ErrorMessage=styled.p`\n  color: var(--text-secondary-color);\n  margin-bottom: 20px;\n  max-width: 500px;\n  line-height: 1.5;\n`;const RetryButton=styled.button`\n  background-color: var(--primary-color);\n  color: white;\n  border: none;\n  border-radius: 6px;\n  padding: 10px 20px;\n  font-size: 16px;\n  cursor: pointer;\n  transition: all 0.3s ease;\n  \n  &:hover {\n    background-color: #3a7bc8;\n    transform: translateY(-1px);\n  }\n`;const App=()=>{return/*#__PURE__*/_jsx(ThemeProvider,{children:/*#__PURE__*/_jsx(SettingsProvider,{children:/*#__PURE__*/_jsx(AppContent,{})})});};// 将主要内容移到单独的组件中，这样可以使用 SettingsContext\nconst AppContent=()=>{// 状态\nconst[activeModule,setActiveModule]=useState('quote');// 默认为\"一语\"模块\nconst[showSettings,setShowSettings]=useState(false);const[currentMode,setCurrentMode]=useState('normal');// normal, zen, curtain\nconst[isInitialized,setIsInitialized]=useState(false);const[error,setError]=useState(null);// 从 SettingsContext 获取设置\nconst{settings,isLoaded}=useContext(SettingsContext);// 初始化活动模块\nuseEffect(()=>{if(isLoaded&&!isInitialized){try{// 检查是否有启动模块设置\nif(settings&&settings.startupModule){if(settings.startupModule.type==='specific'){// 使用指定的模块\nsetActiveModule(settings.startupModule.module||'quote');}else if(settings.startupModule.type==='last'){// 使用上次的模块或默认为\"一语\"模块\nconst lastModule=getFromStorage('homepage-active-module','quote');setActiveModule(lastModule);}}else{// 默认使用\"一语\"模块\nsetActiveModule('quote');}setIsInitialized(true);setError(null);// 清除任何之前的错误\n}catch(error){// 如果出现任何错误，默认使用\"一语\"模块\nconsole.error('初始化模块时出错:',error);setActiveModule('quote');setIsInitialized(true);setError('初始化应用程序时出现问题，已使用默认设置。');}}},[isLoaded,settings,isInitialized]);// 初始化主题\nuseEffect(()=>{if(settings&&settings.theme){document.documentElement.setAttribute('data-theme',settings.theme);// 添加额外的深色模式适配\nif(settings.theme==='dark'){document.body.classList.add('dark-mode');}else{document.body.classList.remove('dark-mode');}}},[settings]);// 处理模块切换\nconst handleModuleChange=moduleId=>{setActiveModule(moduleId);// 保存当前活动模块，以便下次启动时可以继承\ntry{saveToStorage('homepage-active-module',moduleId);}catch(error){console.error('保存活动模块时出错:',error);}};// 渲染当前模块\nconst renderActiveModule=()=>{try{switch(activeModule){case'calendar':return/*#__PURE__*/_jsx(Calendar,{});case'bookmark':return/*#__PURE__*/_jsx(Bookmark,{});case'todo':return/*#__PURE__*/_jsx(Todo,{});case'note':return/*#__PURE__*/_jsx(Note,{});case'quote':return/*#__PURE__*/_jsx(Quote,{});case'news':return/*#__PURE__*/_jsx(News,{});default:return/*#__PURE__*/_jsx(Quote,{});// 默认显示\"一语\"模块\n}}catch(error){console.error('渲染模块时出错:',error);return/*#__PURE__*/_jsx(Quote,{});// 出错时显示\"一语\"模块\n}};// 重试函数\nconst handleRetry=()=>{setError(null);setIsInitialized(false);window.location.reload();};// 如果有严重错误，显示错误界面\nif(error&&!isInitialized){return/*#__PURE__*/_jsxs(ErrorContainer,{children:[/*#__PURE__*/_jsx(ErrorTitle,{children:\"\\u5E94\\u7528\\u7A0B\\u5E8F\\u542F\\u52A8\\u5931\\u8D25\"}),/*#__PURE__*/_jsx(ErrorMessage,{children:error}),/*#__PURE__*/_jsx(RetryButton,{onClick:handleRetry,children:\"\\u91CD\\u65B0\\u52A0\\u8F7D\"})]});}// 如果设置尚未加载，显示加载界面\nif(!isLoaded){return/*#__PURE__*/_jsx(Loading,{text:\"\\u52A0\\u8F7D\\u4E2D...\",subText:\"\\u6B63\\u5728\\u521D\\u59CB\\u5316\\u5E94\\u7528\\u7A0B\\u5E8F\\u8BBE\\u7F6E\"});}// 如果尚未初始化，显示加载界面\nif(!isInitialized){return/*#__PURE__*/_jsx(Loading,{text:\"\\u542F\\u52A8\\u4E2D...\",subText:\"\\u6B63\\u5728\\u51C6\\u5907\\u7528\\u6237\\u754C\\u9762\"});}// 渲染当前模式\nconst renderCurrentMode=()=>{try{switch(currentMode){case'zen':return/*#__PURE__*/_jsx(ZenMode,{onBack:()=>setCurrentMode('normal')});case'curtain':return/*#__PURE__*/_jsx(CurtainMode,{onBack:()=>setCurrentMode('normal')});case'normal':default:return/*#__PURE__*/_jsxs(AppContainer,{children:[settings&&settings.background&&/*#__PURE__*/_jsx(BackgroundLayer,{backgroundImage:settings.background.type==='image'?settings.background.value:null,backgroundColor:settings.background.type==='color'?settings.background.value:null,backgroundSize:settings.background.size||'cover',backgroundRepeat:settings.background.repeat||'no-repeat',opacity:settings.background.opacity||1,brightness:settings.background.brightness||1}),settings&&settings.background&&/*#__PURE__*/_jsx(BlurLayer,{blurAmount:settings.background.blurAmount||0,overlayOpacity:settings.background.overlayOpacity||0}),/*#__PURE__*/_jsxs(ContentLayer,{children:[/*#__PURE__*/_jsx(Header,{}),/*#__PURE__*/_jsx(Search,{}),/*#__PURE__*/_jsx(ModuleSwitch,{activeModule:activeModule,onModuleChange:handleModuleChange}),/*#__PURE__*/_jsx(MainContent,{children:/*#__PURE__*/_jsx(ModuleContainer,{children:renderActiveModule()})})]}),/*#__PURE__*/_jsxs(BottomControls,{children:[/*#__PURE__*/_jsx(ModeButton,{onClick:()=>setCurrentMode('zen'),title:\"\\u7985\\u6A21\\u5F0F\",children:\"\\u7985\"}),/*#__PURE__*/_jsx(ModeButton,{onClick:()=>setCurrentMode('curtain'),title:\"\\u5E55\\u6A21\\u5F0F\",children:\"\\u5E55\"}),/*#__PURE__*/_jsx(ModeButton,{onClick:()=>setShowSettings(!showSettings),title:\"\\u8BBE\\u7F6E\",children:\"\\u8BBE\"})]}),/*#__PURE__*/_jsx(SettingsPanel,{isOpen:showSettings,onClose:()=>setShowSettings(false)})]});}}catch(error){console.error('渲染模式时出错:',error);setError('渲染界面时出现错误');return/*#__PURE__*/_jsxs(ErrorContainer,{children:[/*#__PURE__*/_jsx(ErrorTitle,{children:\"\\u754C\\u9762\\u6E32\\u67D3\\u5931\\u8D25\"}),/*#__PURE__*/_jsx(ErrorMessage,{children:\"\\u6E32\\u67D3\\u754C\\u9762\\u65F6\\u51FA\\u73B0\\u9519\\u8BEF\\uFF0C\\u8BF7\\u5C1D\\u8BD5\\u91CD\\u65B0\\u52A0\\u8F7D\\u3002\"}),/*#__PURE__*/_jsx(RetryButton,{onClick:handleRetry,children:\"\\u91CD\\u65B0\\u52A0\\u8F7D\"})]});}};return renderCurrentMode();};export default App;","map":{"version":3,"names":["React","useState","useEffect","useContext","styled","Header","Search","ModuleSwitch","SettingsPanel","Loading","Calendar","Bookmark","Todo","Note","Quote","News","ZenMode","CurtainMode","ThemeProvider","SettingsProvider","SettingsContext","getFromStorage","saveToStorage","jsx","_jsx","jsxs","_jsxs","AppContainer","div","BackgroundLayer","props","backgroundImage","backgroundColor","backgroundSize","backgroundRepeat","opacity","brightness","BlurLayer","blurAmount","overlayOpacity","ContentLayer","MainContent","main","ModuleContainer","BottomControls","ModeButton","button","ErrorContainer","ErrorTitle","h2","ErrorMessage","p","RetryButton","App","children","AppContent","activeModule","setActiveModule","showSettings","setShowSettings","currentMode","setCurrentMode","isInitialized","setIsInitialized","error","setError","settings","isLoaded","startupModule","type","module","lastModule","console","theme","document","documentElement","setAttribute","body","classList","add","remove","handleModuleChange","moduleId","renderActiveModule","handleRetry","window","location","reload","onClick","text","subText","renderCurrentMode","onBack","background","value","size","repeat","onModuleChange","title","isOpen","onClose"],"sources":["D:/Jliu Pureey/Documents/Editor/extion/homepage/src/App.js"],"sourcesContent":["import React, { useState, useEffect, useContext } from 'react';\r\nimport styled from 'styled-components';\r\n\r\n// 组件导入\r\nimport Header from './components/Header/Header';\r\nimport Search from './components/Search/Search';\r\nimport ModuleSwitch from './components/ModuleSwitch/ModuleSwitch';\r\nimport SettingsPanel from './settings/SettingsPanel';\r\nimport Loading from './components/Loading/Loading';\r\n\r\n// 模块导入\r\nimport Calendar from './modules/Calendar/Calendar';\r\nimport Bookmark from './modules/Bookmark/Bookmark';\r\nimport Todo from './modules/Todo/Todo';\r\nimport Note from './modules/Note/Note';\r\nimport Quote from './modules/Quote/Quote';\r\nimport News from './modules/News/News';\r\n\r\n// 模式导入\r\nimport ZenMode from './modes/ZenMode/ZenMode';\r\nimport CurtainMode from './modes/CurtainMode/CurtainMode';\r\n\r\n// 上下文导入\r\nimport { ThemeProvider } from './contexts/ThemeContext';\r\nimport { SettingsProvider, SettingsContext } from './contexts/SettingsContext';\r\n\r\n// 工具函数导入\r\nimport { getFromStorage, saveToStorage } from './utils/storage';\r\n\r\nconst AppContainer = styled.div`\r\n  min-height: 100vh;\r\n  display: flex;\r\n  flex-direction: column;\r\n  background-color: var(--background-color);\r\n  color: var(--text-color);\r\n  transition: background-color var(--transition-speed), color var(--transition-speed);\r\n  position: relative;\r\n  overflow: hidden;\r\n`;\r\n\r\nconst BackgroundLayer = styled.div`\r\n  position: absolute;\r\n  top: 0;\r\n  left: 0;\r\n  right: 0;\r\n  bottom: 0;\r\n  z-index: 0;\r\n  background-image: ${props => props.backgroundImage ? `url(${props.backgroundImage})` : 'none'};\r\n  background-color: ${props => props.backgroundColor || 'transparent'};\r\n  background-size: ${props => props.backgroundSize || 'cover'};\r\n  background-position: center;\r\n  background-repeat: ${props => props.backgroundRepeat || 'no-repeat'};\r\n  opacity: ${props => props.opacity || 1};\r\n  filter: brightness(${props => props.brightness || 1});\r\n`;\r\n\r\nconst BlurLayer = styled.div`\r\n  position: absolute;\r\n  top: 0;\r\n  left: 0;\r\n  right: 0;\r\n  bottom: 0;\r\n  z-index: 1;\r\n  backdrop-filter: blur(${props => props.blurAmount || 0}px);\r\n  background-color: rgba(0, 0, 0, ${props => props.overlayOpacity || 0});\r\n`;\r\n\r\nconst ContentLayer = styled.div`\r\n  position: relative;\r\n  z-index: 2;\r\n  flex: 1;\r\n  display: flex;\r\n  flex-direction: column;\r\n  padding: 20px;\r\n`;\r\n\r\nconst MainContent = styled.main`\r\n  flex: 1;\r\n  display: flex;\r\n  flex-direction: column;\r\n  align-items: center;\r\n  justify-content: flex-start;\r\n  padding: 20px 0;\r\n`;\r\n\r\nconst ModuleContainer = styled.div`\r\n  width: 100%;\r\n  max-width: 1200px;\r\n  margin: 0 auto;\r\n`;\r\n\r\nconst BottomControls = styled.div`\r\n  position: fixed;\r\n  bottom: 20px;\r\n  right: 20px;\r\n  display: flex;\r\n  gap: 10px;\r\n  z-index: 100;\r\n`;\r\n\r\nconst ModeButton = styled.button`\r\n  width: 40px;\r\n  height: 40px;\r\n  border-radius: 50%;\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n  background-color: var(--primary-color);\r\n  color: white;\r\n  border: 1px solid var(--border-color);\r\n  cursor: pointer;\r\n  box-shadow: 0 2px 10px var(--shadow-color);\r\n  transition: all 0.3s ease;\r\n  \r\n  &:hover {\r\n    transform: translateY(-3px);\r\n    box-shadow: 0 5px 15px var(--shadow-color);\r\n  }\r\n  \r\n  svg {\r\n    font-size: 20px;\r\n  }\r\n`;\r\n\r\nconst ErrorContainer = styled.div`\r\n  display: flex;\r\n  flex-direction: column;\r\n  justify-content: center;\r\n  align-items: center;\r\n  height: 100vh;\r\n  font-size: 18px;\r\n  color: var(--text-color);\r\n  background-color: var(--background-color);\r\n  padding: 20px;\r\n  text-align: center;\r\n`;\r\n\r\nconst ErrorTitle = styled.h2`\r\n  color: var(--error-color, #f44336);\r\n  margin-bottom: 16px;\r\n`;\r\n\r\nconst ErrorMessage = styled.p`\r\n  color: var(--text-secondary-color);\r\n  margin-bottom: 20px;\r\n  max-width: 500px;\r\n  line-height: 1.5;\r\n`;\r\n\r\nconst RetryButton = styled.button`\r\n  background-color: var(--primary-color);\r\n  color: white;\r\n  border: none;\r\n  border-radius: 6px;\r\n  padding: 10px 20px;\r\n  font-size: 16px;\r\n  cursor: pointer;\r\n  transition: all 0.3s ease;\r\n  \r\n  &:hover {\r\n    background-color: #3a7bc8;\r\n    transform: translateY(-1px);\r\n  }\r\n`;\r\n\r\nconst App = () => {\r\n  return (\r\n    <ThemeProvider>\r\n      <SettingsProvider>\r\n        <AppContent />\r\n      </SettingsProvider>\r\n    </ThemeProvider>\r\n  );\r\n};\r\n\r\n// 将主要内容移到单独的组件中，这样可以使用 SettingsContext\r\nconst AppContent = () => {\r\n  // 状态\r\n  const [activeModule, setActiveModule] = useState('quote'); // 默认为\"一语\"模块\r\n  const [showSettings, setShowSettings] = useState(false);\r\n  const [currentMode, setCurrentMode] = useState('normal'); // normal, zen, curtain\r\n  const [isInitialized, setIsInitialized] = useState(false);\r\n  const [error, setError] = useState(null);\r\n  \r\n  // 从 SettingsContext 获取设置\r\n  const { settings, isLoaded } = useContext(SettingsContext);\r\n  \r\n  // 初始化活动模块\r\n  useEffect(() => {\r\n    if (isLoaded && !isInitialized) {\r\n      try {\r\n        // 检查是否有启动模块设置\r\n        if (settings && settings.startupModule) {\r\n          if (settings.startupModule.type === 'specific') {\r\n            // 使用指定的模块\r\n            setActiveModule(settings.startupModule.module || 'quote');\r\n          } else if (settings.startupModule.type === 'last') {\r\n            // 使用上次的模块或默认为\"一语\"模块\r\n            const lastModule = getFromStorage('homepage-active-module', 'quote');\r\n            setActiveModule(lastModule);\r\n          }\r\n        } else {\r\n          // 默认使用\"一语\"模块\r\n          setActiveModule('quote');\r\n        }\r\n        setIsInitialized(true);\r\n        setError(null); // 清除任何之前的错误\r\n      } catch (error) {\r\n        // 如果出现任何错误，默认使用\"一语\"模块\r\n        console.error('初始化模块时出错:', error);\r\n        setActiveModule('quote');\r\n        setIsInitialized(true);\r\n        setError('初始化应用程序时出现问题，已使用默认设置。');\r\n      }\r\n    }\r\n  }, [isLoaded, settings, isInitialized]);\r\n  \r\n  // 初始化主题\r\n  useEffect(() => {\r\n    if (settings && settings.theme) {\r\n      document.documentElement.setAttribute('data-theme', settings.theme);\r\n      // 添加额外的深色模式适配\r\n      if (settings.theme === 'dark') {\r\n        document.body.classList.add('dark-mode');\r\n      } else {\r\n        document.body.classList.remove('dark-mode');\r\n      }\r\n    }\r\n  }, [settings]);\r\n  \r\n  // 处理模块切换\r\n  const handleModuleChange = (moduleId) => {\r\n    setActiveModule(moduleId);\r\n    // 保存当前活动模块，以便下次启动时可以继承\r\n    try {\r\n      saveToStorage('homepage-active-module', moduleId);\r\n    } catch (error) {\r\n      console.error('保存活动模块时出错:', error);\r\n    }\r\n  };\r\n  \r\n  // 渲染当前模块\r\n  const renderActiveModule = () => {\r\n    try {\r\n      switch (activeModule) {\r\n        case 'calendar':\r\n          return <Calendar />;\r\n        case 'bookmark':\r\n          return <Bookmark />;\r\n        case 'todo':\r\n          return <Todo />;\r\n        case 'note':\r\n          return <Note />;\r\n        case 'quote':\r\n          return <Quote />;\r\n        case 'news':\r\n          return <News />;\r\n        default:\r\n          return <Quote />; // 默认显示\"一语\"模块\r\n      }\r\n    } catch (error) {\r\n      console.error('渲染模块时出错:', error);\r\n      return <Quote />; // 出错时显示\"一语\"模块\r\n    }\r\n  };\r\n  \r\n  // 重试函数\r\n  const handleRetry = () => {\r\n    setError(null);\r\n    setIsInitialized(false);\r\n    window.location.reload();\r\n  };\r\n\r\n  // 如果有严重错误，显示错误界面\r\n  if (error && !isInitialized) {\r\n    return (\r\n      <ErrorContainer>\r\n        <ErrorTitle>应用程序启动失败</ErrorTitle>\r\n        <ErrorMessage>{error}</ErrorMessage>\r\n        <RetryButton onClick={handleRetry}>重新加载</RetryButton>\r\n      </ErrorContainer>\r\n    );\r\n  }\r\n\r\n  // 如果设置尚未加载，显示加载界面\r\n  if (!isLoaded) {\r\n    return <Loading text=\"加载中...\" subText=\"正在初始化应用程序设置\" />;\r\n  }\r\n\r\n  // 如果尚未初始化，显示加载界面\r\n  if (!isInitialized) {\r\n    return <Loading text=\"启动中...\" subText=\"正在准备用户界面\" />;\r\n  }\r\n  \r\n  // 渲染当前模式\r\n  const renderCurrentMode = () => {\r\n    try {\r\n      switch (currentMode) {\r\n        case 'zen':\r\n          return <ZenMode onBack={() => setCurrentMode('normal')} />;\r\n        case 'curtain':\r\n          return <CurtainMode onBack={() => setCurrentMode('normal')} />;\r\n        case 'normal':\r\n        default:\r\n          return (\r\n            <AppContainer>\r\n              {/* 背景层 */}\r\n              {settings && settings.background && (\r\n                <BackgroundLayer \r\n                  backgroundImage={settings.background.type === 'image' ? settings.background.value : null}\r\n                  backgroundColor={settings.background.type === 'color' ? settings.background.value : null}\r\n                  backgroundSize={settings.background.size || 'cover'}\r\n                  backgroundRepeat={settings.background.repeat || 'no-repeat'}\r\n                  opacity={settings.background.opacity || 1}\r\n                  brightness={settings.background.brightness || 1}\r\n                />\r\n              )}\r\n              \r\n              {/* 模糊层 */}\r\n              {settings && settings.background && (\r\n                <BlurLayer \r\n                  blurAmount={settings.background.blurAmount || 0}\r\n                  overlayOpacity={settings.background.overlayOpacity || 0}\r\n                />\r\n              )}\r\n              \r\n              {/* 内容层 */}\r\n              <ContentLayer>\r\n                <Header />\r\n                <Search />\r\n                <ModuleSwitch \r\n                  activeModule={activeModule}\r\n                  onModuleChange={handleModuleChange}\r\n                />\r\n                \r\n                <MainContent>\r\n                  <ModuleContainer>\r\n                    {renderActiveModule()}\r\n                  </ModuleContainer>\r\n                </MainContent>\r\n              </ContentLayer>\r\n              \r\n              {/* 底部控制按钮 */}\r\n              <BottomControls>\r\n                <ModeButton \r\n                  onClick={() => setCurrentMode('zen')}\r\n                  title=\"禅模式\"\r\n                >\r\n                  禅\r\n                </ModeButton>\r\n                <ModeButton \r\n                  onClick={() => setCurrentMode('curtain')}\r\n                  title=\"幕模式\"\r\n                >\r\n                  幕\r\n                </ModeButton>\r\n                <ModeButton \r\n                  onClick={() => setShowSettings(!showSettings)}\r\n                  title=\"设置\"\r\n                >\r\n                  设\r\n                </ModeButton>\r\n              </BottomControls>\r\n              \r\n              {/* 设置面板 */}\r\n              <SettingsPanel \r\n                isOpen={showSettings}\r\n                onClose={() => setShowSettings(false)}\r\n              />\r\n            </AppContainer>\r\n          );\r\n      }\r\n    } catch (error) {\r\n      console.error('渲染模式时出错:', error);\r\n      setError('渲染界面时出现错误');\r\n      return (\r\n        <ErrorContainer>\r\n          <ErrorTitle>界面渲染失败</ErrorTitle>\r\n          <ErrorMessage>渲染界面时出现错误，请尝试重新加载。</ErrorMessage>\r\n          <RetryButton onClick={handleRetry}>重新加载</RetryButton>\r\n        </ErrorContainer>\r\n      );\r\n    }\r\n  };\r\n\r\n  return renderCurrentMode();\r\n};\r\n\r\nexport default App;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}