{"ast":null,"code":"import React,{useState,useEffect,useRef,useCallback,useMemo}from'react';import styled from'styled-components';import configManager from'../utils/simpleConfigManager';import backgroundManager from'../utils/backgroundManager';import{handleUrlChange}from'../utils/urlHandler';// 图标导入\nimport CloseIcon from'@mui/icons-material/Close';import WallpaperIcon from'@mui/icons-material/Wallpaper';import TextFormatIcon from'@mui/icons-material/TextFormat';import BackupIcon from'@mui/icons-material/Backup';import RestoreIcon from'@mui/icons-material/Restore';import DarkModeIcon from'@mui/icons-material/DarkMode';import HomeIcon from'@mui/icons-material/Home';import RefreshIcon from'@mui/icons-material/Refresh';import StorageIcon from'@mui/icons-material/Storage';import InfoIcon from'@mui/icons-material/Info';import CheckCircleIcon from'@mui/icons-material/CheckCircle';import ErrorIcon from'@mui/icons-material/Error';import WarningIcon from'@mui/icons-material/Warning';// 样式组件\nimport{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";const SettingsContainer=styled.div`\n  position: fixed;\n  top: 0;\n  right: ${props=>props.isOpen?'0':'-420px'};\n  width: 420px;\n  height: 100vh;\n  background-color: var(--card-background);\n  box-shadow: -5px 0 15px rgba(0, 0, 0, 0.1);\n  transition: right 0.3s cubic-bezier(0.4, 0, 0.2, 1);\n  z-index: 1000;\n  display: flex;\n  flex-direction: column;\n  overflow: hidden;\n  backdrop-filter: blur(10px);\n  border-left: 1px solid var(--border-color);\n`;const SettingsHeader=styled.div`\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  padding: 20px;\n  border-bottom: 1px solid var(--border-color);\n  background: var(--card-background);\n  position: sticky;\n  top: 0;\n  z-index: 10;\n`;const SettingsTitle=styled.h2`\n  margin: 0;\n  font-size: 20px;\n  font-weight: 600;\n  color: var(--text-color);\n`;const CloseButton=styled.button`\n  background: none;\n  border: none;\n  cursor: pointer;\n  color: var(--text-color);\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  padding: 8px;\n  border-radius: 50%;\n  transition: all 0.2s ease;\n  \n  &:hover {\n    background: var(--hover-background);\n    color: var(--primary-color);\n    transform: scale(1.1);\n  }\n`;const SettingsContent=styled.div`\n  flex: 1;\n  overflow-y: auto;\n  padding: 20px;\n  scroll-behavior: smooth;\n  \n  &::-webkit-scrollbar {\n    width: 6px;\n  }\n  \n  &::-webkit-scrollbar-track {\n    background: transparent;\n  }\n  \n  &::-webkit-scrollbar-thumb {\n    background: var(--border-color);\n    border-radius: 3px;\n  }\n  \n  &::-webkit-scrollbar-thumb:hover {\n    background: var(--primary-color);\n  }\n`;const SettingsSection=styled.div`\n  margin-bottom: 24px;\n  background: var(--background-color);\n  border-radius: 12px;\n  padding: 20px;\n  border: 1px solid var(--border-color);\n  transition: all 0.3s ease;\n  \n  &:hover {\n    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);\n    transform: translateY(-1px);\n  }\n`;const SectionTitle=styled.h3`\n  margin: 0 0 16px 0;\n  font-size: 16px;\n  font-weight: 600;\n  display: flex;\n  align-items: center;\n  gap: 10px;\n  color: var(--text-color);\n  \n  svg {\n    color: var(--primary-color);\n    font-size: 20px;\n  }\n`;const FormGroup=styled.div`\n  margin-bottom: 16px;\n  \n  &:last-child {\n    margin-bottom: 0;\n  }\n`;const Label=styled.label`\n  display: block;\n  margin-bottom: 8px;\n  font-size: 14px;\n  font-weight: 500;\n  color: var(--text-color);\n`;const Input=styled.input`\n  width: 100%;\n  padding: 12px;\n  border: 2px solid var(--border-color);\n  border-radius: 8px;\n  background-color: var(--background-color);\n  color: var(--text-color);\n  font-size: 14px;\n  transition: all 0.3s ease;\n  \n  &:focus {\n    outline: none;\n    border-color: var(--primary-color);\n    box-shadow: 0 0 0 3px rgba(74, 144, 226, 0.1);\n  }\n  \n  &::placeholder {\n    color: var(--text-secondary-color);\n  }\n`;const Select=styled.select`\n  width: 100%;\n  padding: 12px;\n  border: 2px solid var(--border-color);\n  border-radius: 8px;\n  background-color: var(--background-color);\n  color: var(--text-color);\n  font-size: 14px;\n  cursor: pointer;\n  transition: all 0.3s ease;\n  \n  &:focus {\n    outline: none;\n    border-color: var(--primary-color);\n    box-shadow: 0 0 0 3px rgba(74, 144, 226, 0.1);\n  }\n`;const Slider=styled.input`\n  width: 100%;\n  margin: 12px 0;\n  height: 6px;\n  border-radius: 3px;\n  background: var(--border-color);\n  outline: none;\n  transition: all 0.3s ease;\n  \n  &::-webkit-slider-thumb {\n    appearance: none;\n    width: 20px;\n    height: 20px;\n    border-radius: 50%;\n    background: var(--primary-color);\n    cursor: pointer;\n    box-shadow: 0 2px 6px rgba(0, 0, 0, 0.2);\n    transition: all 0.2s ease;\n    \n    &:hover {\n      transform: scale(1.2);\n    }\n  }\n`;const SliderValue=styled.span`\n  font-size: 12px;\n  color: var(--text-secondary-color);\n  display: block;\n  text-align: right;\n  margin-top: 4px;\n  font-weight: 500;\n`;const ColorPicker=styled.input`\n  width: 100%;\n  height: 50px;\n  border: 2px solid var(--border-color);\n  border-radius: 8px;\n  cursor: pointer;\n  padding: 4px;\n  background: var(--background-color);\n  transition: all 0.3s ease;\n  \n  &:hover {\n    border-color: var(--primary-color);\n  }\n`;const Switch=styled.label`\n  position: relative;\n  display: inline-block;\n  width: 54px;\n  height: 28px;\n  \n  input {\n    opacity: 0;\n    width: 0;\n    height: 0;\n  }\n`;const SwitchSlider=styled.span`\n  position: absolute;\n  cursor: pointer;\n  top: 0;\n  left: 0;\n  right: 0;\n  bottom: 0;\n  background-color: var(--border-color);\n  transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);\n  border-radius: 28px;\n  \n  &:before {\n    position: absolute;\n    content: \"\";\n    height: 20px;\n    width: 20px;\n    left: 4px;\n    bottom: 4px;\n    background-color: white;\n    transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);\n    border-radius: 50%;\n    box-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);\n  }\n  \n  input:checked + & {\n    background-color: var(--primary-color);\n  }\n  \n  input:checked + &:before {\n    transform: translateX(26px);\n  }\n`;const SwitchContainer=styled.div`\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  padding: 8px 0;\n`;const SwitchLabel=styled.span`\n  font-size: 14px;\n  font-weight: 500;\n  color: var(--text-color);\n`;const ButtonGroup=styled.div`\n  display: flex;\n  gap: 12px;\n  margin-top: 16px;\n  flex-wrap: wrap;\n`;const Button=styled.button`\n  padding: 12px 18px;\n  border: none;\n  border-radius: 8px;\n  cursor: pointer;\n  font-size: 14px;\n  font-weight: 500;\n  display: flex;\n  align-items: center;\n  gap: 8px;\n  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);\n  flex: 1;\n  min-width: 120px;\n  position: relative;\n  overflow: hidden;\n  \n  &:disabled {\n    opacity: 0.6;\n    cursor: not-allowed;\n  }\n  \n  &.primary {\n    background-color: var(--primary-color);\n    color: white;\n    \n    &:hover:not(:disabled) {\n      background-color: #3a7bc8;\n      transform: translateY(-2px);\n      box-shadow: 0 4px 12px rgba(74, 144, 226, 0.3);\n    }\n  }\n  \n  &.secondary {\n    background-color: var(--card-background);\n    color: var(--text-color);\n    border: 2px solid var(--border-color);\n    \n    &:hover:not(:disabled) {\n      background-color: var(--hover-background);\n      transform: translateY(-2px);\n      box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);\n    }\n  }\n  \n  &.danger {\n    background-color: #e74c3c;\n    color: white;\n    \n    &:hover:not(:disabled) {\n      background-color: #c0392b;\n      transform: translateY(-2px);\n      box-shadow: 0 4px 12px rgba(231, 76, 60, 0.3);\n    }\n  }\n`;const StatusMessage=styled.div`\n  padding: 12px 16px;\n  border-radius: 8px;\n  margin-bottom: 16px;\n  font-size: 14px;\n  display: flex;\n  align-items: center;\n  gap: 10px;\n  animation: slideIn 0.3s ease;\n  \n  @keyframes slideIn {\n    from {\n      opacity: 0;\n      transform: translateY(-10px);\n    }\n    to {\n      opacity: 1;\n      transform: translateY(0);\n    }\n  }\n  \n  &.success {\n    background-color: rgba(76, 175, 80, 0.1);\n    color: #2e7d32;\n    border: 1px solid rgba(76, 175, 80, 0.3);\n  }\n  \n  &.error {\n    background-color: rgba(244, 67, 54, 0.1);\n    color: #c62828;\n    border: 1px solid rgba(244, 67, 54, 0.3);\n  }\n  \n  &.info {\n    background-color: rgba(33, 150, 243, 0.1);\n    color: #1565c0;\n    border: 1px solid rgba(33, 150, 243, 0.3);\n  }\n  \n  &.warning {\n    background-color: rgba(255, 152, 0, 0.1);\n    color: #ef6c00;\n    border: 1px solid rgba(255, 152, 0, 0.3);\n  }\n`;const LoadingOverlay=styled.div`\n  position: absolute;\n  top: 0;\n  left: 0;\n  right: 0;\n  bottom: 0;\n  background: rgba(255, 255, 255, 0.9);\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  z-index: 100;\n  backdrop-filter: blur(2px);\n`;const LoadingSpinner=styled.div`\n  width: 40px;\n  height: 40px;\n  border: 3px solid var(--border-color);\n  border-top: 3px solid var(--primary-color);\n  border-radius: 50%;\n  animation: spin 1s linear infinite;\n  \n  @keyframes spin {\n    0% { transform: rotate(0deg); }\n    100% { transform: rotate(360deg); }\n  }\n`;// 增强的设置面板组件\nconst EnhancedSettingsPanel=_ref=>{let{isOpen,onClose,onSettingsUpdate}=_ref;// 状态管理\nconst[settings,setSettings]=useState({});const[imagePreview,setImagePreview]=useState('');const[statusMessage,setStatusMessage]=useState('');const[configStats,setConfigStats]=useState(null);const[isLoading,setIsLoading]=useState(false);const[isInitialized,setIsInitialized]=useState(false);const[hasUnsavedChanges,setHasUnsavedChanges]=useState(false);const fileInputRef=useRef(null);const importRef=useRef(null);const saveTimeoutRef=useRef(null);// 防抖保存函数\nconst debouncedSave=useCallback((key,value)=>{if(saveTimeoutRef.current){clearTimeout(saveTimeoutRef.current);}saveTimeoutRef.current=setTimeout(async()=>{try{await configManager.set(`settings.${key}`,value);setHasUnsavedChanges(false);showStatus('设置已保存','success');}catch(error){console.error('保存设置失败:',error);showStatus('保存设置失败','error');}},500);},[]);// 显示状态消息\nconst showStatus=useCallback(function(message){let type=arguments.length>1&&arguments[1]!==undefined?arguments[1]:'info';const icons={success:/*#__PURE__*/_jsx(CheckCircleIcon,{}),error:/*#__PURE__*/_jsx(ErrorIcon,{}),warning:/*#__PURE__*/_jsx(WarningIcon,{}),info:/*#__PURE__*/_jsx(InfoIcon,{})};setStatusMessage({text:message,type,icon:icons[type]||icons.info});setTimeout(()=>setStatusMessage(''),4000);},[]);// 应用设置到页面\nconst applySettings=useCallback(settings=>{try{const root=document.documentElement;// 应用主题\nif(settings.theme==='dark'){root.style.setProperty('--background-color','#121212');root.style.setProperty('--card-background','#1e1e1e');root.style.setProperty('--border-color','#333333');root.style.setProperty('--shadow-color','rgba(0, 0, 0, 0.3)');root.style.setProperty('--text-color','#e0e0e0');root.style.setProperty('--text-secondary-color','#a0a0a0');root.style.setProperty('--hover-background','#333333');document.body.classList.add('dark-mode');}else{root.style.setProperty('--background-color','#ffffff');root.style.setProperty('--card-background','#f8f8f8');root.style.setProperty('--border-color','#e0e0e0');root.style.setProperty('--shadow-color','rgba(0, 0, 0, 0.1)');root.style.setProperty('--text-color','#333333');root.style.setProperty('--text-secondary-color','#666666');root.style.setProperty('--hover-background','#f0f0f0');document.body.classList.remove('dark-mode');}// 应用颜色设置\nif(settings.textColor){root.style.setProperty('--text-color',settings.textColor);}if(settings.linkColor){root.style.setProperty('--primary-color',settings.linkColor);}// 应用字体设置\nif(settings.fontFamily){root.style.setProperty('--font-family',settings.fontFamily);}// 使用背景管理器应用背景设置\nbackgroundManager.applySettings(settings);}catch(error){console.error('应用设置时出错:',error);showStatus('应用设置失败','error');}},[showStatus]);// 初始化配置\nuseEffect(()=>{const initializeConfig=async()=>{if(!isOpen)return;try{setIsLoading(true);// 确保配置管理器已初始化\nif(!configManager.isInitialized){await configManager.initialize();}// 加载设置\nconst loadedSettings=configManager.get('settings',{});setSettings(loadedSettings);if(loadedSettings.backgroundImage){setImagePreview(loadedSettings.backgroundImage);}// 应用设置\napplySettings(loadedSettings);// 加载统计信息\nsetConfigStats(configManager.getStats());setIsInitialized(true);showStatus('设置加载成功','success');}catch(error){console.error('配置初始化失败:',error);showStatus('配置加载失败，使用默认设置','error');}finally{setIsLoading(false);}};initializeConfig();},[isOpen,applySettings,showStatus]);// 处理设置变化\nconst handleSettingChange=useCallback(async(key,value)=>{try{const updatedSettings={...settings,[key]:value};setSettings(updatedSettings);setHasUnsavedChanges(true);// 立即应用设置\napplySettings(updatedSettings);// 通知父组件设置已更新\nif(onSettingsUpdate){onSettingsUpdate(updatedSettings);}// 防抖保存\ndebouncedSave(key,value);// 更新统计信息\nsetConfigStats(configManager.getStats());}catch(error){console.error('处理设置变化失败:',error);showStatus('设置更新失败','error');}},[settings,applySettings,debouncedSave,showStatus]);// 渐变预览\nconst gradientPreview=useMemo(()=>{const{gradientType='linear',gradientDirection='to right',gradientColors=['#4a90e2','#9b59b6'],gradientStops=[0,100]}=settings;return`${gradientType}-gradient(${gradientDirection}, ${gradientColors[0]} ${gradientStops[0]}%, ${gradientColors[1]} ${gradientStops[1]}%)`;},[settings]);// 组件卸载时清理\nuseEffect(()=>{return()=>{if(saveTimeoutRef.current){clearTimeout(saveTimeoutRef.current);}};},[]);// 如果未初始化，显示加载状态\nif(!isInitialized){return/*#__PURE__*/_jsxs(SettingsContainer,{isOpen:isOpen,children:[/*#__PURE__*/_jsxs(SettingsHeader,{children:[/*#__PURE__*/_jsx(SettingsTitle,{children:\"\\u8BBE\\u7F6E\\u4E2D\\u5FC3\"}),/*#__PURE__*/_jsx(CloseButton,{onClick:onClose,children:/*#__PURE__*/_jsx(CloseIcon,{})})]}),/*#__PURE__*/_jsx(LoadingOverlay,{children:/*#__PURE__*/_jsx(LoadingSpinner,{})})]});}return/*#__PURE__*/_jsxs(SettingsContainer,{isOpen:isOpen,children:[isLoading&&/*#__PURE__*/_jsx(LoadingOverlay,{children:/*#__PURE__*/_jsx(LoadingSpinner,{})}),/*#__PURE__*/_jsxs(SettingsHeader,{children:[/*#__PURE__*/_jsx(SettingsTitle,{children:\"\\u8BBE\\u7F6E\\u4E2D\\u5FC3\"}),/*#__PURE__*/_jsx(CloseButton,{onClick:onClose,children:/*#__PURE__*/_jsx(CloseIcon,{})})]}),/*#__PURE__*/_jsxs(SettingsContent,{children:[statusMessage&&/*#__PURE__*/_jsxs(StatusMessage,{className:statusMessage.type,children:[statusMessage.icon,statusMessage.text]}),hasUnsavedChanges&&/*#__PURE__*/_jsxs(StatusMessage,{className:\"warning\",children:[/*#__PURE__*/_jsx(WarningIcon,{}),\"\\u6709\\u672A\\u4FDD\\u5B58\\u7684\\u66F4\\u6539\\uFF0C\\u6B63\\u5728\\u81EA\\u52A8\\u4FDD\\u5B58...\"]}),/*#__PURE__*/_jsxs(SettingsSection,{children:[/*#__PURE__*/_jsxs(SectionTitle,{children:[/*#__PURE__*/_jsx(DarkModeIcon,{}),\"\\u4E3B\\u9898\\u8BBE\\u7F6E\"]}),/*#__PURE__*/_jsxs(SwitchContainer,{children:[/*#__PURE__*/_jsx(SwitchLabel,{children:\"\\u6DF1\\u8272\\u6A21\\u5F0F\"}),/*#__PURE__*/_jsxs(Switch,{children:[/*#__PURE__*/_jsx(\"input\",{type:\"checkbox\",checked:settings.theme==='dark',onChange:e=>handleSettingChange('theme',e.target.checked?'dark':'light')}),/*#__PURE__*/_jsx(SwitchSlider,{})]})]})]}),/*#__PURE__*/_jsxs(SettingsSection,{children:[/*#__PURE__*/_jsxs(SectionTitle,{children:[/*#__PURE__*/_jsx(HomeIcon,{}),\"\\u542F\\u52A8\\u754C\\u9762\"]}),/*#__PURE__*/_jsxs(FormGroup,{children:[/*#__PURE__*/_jsx(Label,{children:\"\\u542F\\u52A8\\u65F6\\u663E\\u793A\"}),/*#__PURE__*/_jsxs(Select,{value:settings.startupModuleType||'last',onChange:e=>handleSettingChange('startupModuleType',e.target.value),children:[/*#__PURE__*/_jsx(\"option\",{value:\"last\",children:\"\\u7EE7\\u627F\\u4E0A\\u6B21\\u754C\\u9762\"}),/*#__PURE__*/_jsx(\"option\",{value:\"specific\",children:\"\\u6307\\u5B9A\\u754C\\u9762\"})]})]}),settings.startupModuleType==='specific'&&/*#__PURE__*/_jsxs(FormGroup,{children:[/*#__PURE__*/_jsx(Label,{children:\"\\u6307\\u5B9A\\u754C\\u9762\"}),/*#__PURE__*/_jsxs(Select,{value:settings.startupModule||'quote',onChange:e=>handleSettingChange('startupModule',e.target.value),children:[/*#__PURE__*/_jsx(\"option\",{value:\"calendar\",children:\"\\uD83D\\uDCC5 \\u65E5\\u5386\"}),/*#__PURE__*/_jsx(\"option\",{value:\"bookmark\",children:\"\\uD83D\\uDD16 \\u4E66\\u7B7E\"}),/*#__PURE__*/_jsx(\"option\",{value:\"todo\",children:\"\\u2705 \\u5F85\\u529E\"}),/*#__PURE__*/_jsx(\"option\",{value:\"note\",children:\"\\uD83D\\uDCDD \\u7B14\\u8BB0\"}),/*#__PURE__*/_jsx(\"option\",{value:\"quote\",children:\"\\uD83D\\uDCAD \\u4E00\\u8BED\"}),/*#__PURE__*/_jsx(\"option\",{value:\"news\",children:\"\\uD83D\\uDCF0 \\u65B0\\u95FB\"})]})]}),/*#__PURE__*/_jsx(ButtonGroup,{children:/*#__PURE__*/_jsxs(Button,{className:\"secondary\",onClick:()=>window.location.reload(),children:[/*#__PURE__*/_jsx(RefreshIcon,{}),\"\\u91CD\\u65B0\\u542F\\u52A8\"]})})]}),/*#__PURE__*/_jsxs(SettingsSection,{children:[/*#__PURE__*/_jsxs(SectionTitle,{children:[/*#__PURE__*/_jsx(WallpaperIcon,{}),\"\\u80CC\\u666F\\u8BBE\\u7F6E\"]}),/*#__PURE__*/_jsxs(SwitchContainer,{children:[/*#__PURE__*/_jsx(SwitchLabel,{children:\"\\u663E\\u793A\\u80CC\\u666F\"}),/*#__PURE__*/_jsxs(Switch,{children:[/*#__PURE__*/_jsx(\"input\",{type:\"checkbox\",checked:settings.showBackground!==false,onChange:e=>handleSettingChange('showBackground',e.target.checked)}),/*#__PURE__*/_jsx(SwitchSlider,{})]})]}),settings.showBackground!==false&&/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(FormGroup,{children:[/*#__PURE__*/_jsx(Label,{children:\"\\u80CC\\u666F\\u7C7B\\u578B\"}),/*#__PURE__*/_jsxs(Select,{value:settings.backgroundType||'color',onChange:e=>handleSettingChange('backgroundType',e.target.value),children:[/*#__PURE__*/_jsx(\"option\",{value:\"color\",children:\"\\u7EAF\\u8272\"}),/*#__PURE__*/_jsx(\"option\",{value:\"image\",children:\"\\u56FE\\u7247\"}),/*#__PURE__*/_jsx(\"option\",{value:\"gradient\",children:\"\\u6E10\\u53D8\"})]})]}),settings.backgroundType==='color'&&/*#__PURE__*/_jsxs(FormGroup,{children:[/*#__PURE__*/_jsx(Label,{children:\"\\u80CC\\u666F\\u989C\\u8272\"}),/*#__PURE__*/_jsx(ColorPicker,{type:\"color\",value:settings.backgroundColor||'#ffffff',onChange:e=>handleSettingChange('backgroundColor',e.target.value)})]}),settings.backgroundType==='gradient'&&/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(FormGroup,{children:[/*#__PURE__*/_jsx(Label,{children:\"\\u6E10\\u53D8\\u7C7B\\u578B\"}),/*#__PURE__*/_jsxs(Select,{value:settings.gradientType||'linear',onChange:e=>handleSettingChange('gradientType',e.target.value),children:[/*#__PURE__*/_jsx(\"option\",{value:\"linear\",children:\"\\u7EBF\\u6027\\u6E10\\u53D8\"}),/*#__PURE__*/_jsx(\"option\",{value:\"radial\",children:\"\\u5F84\\u5411\\u6E10\\u53D8\"})]})]}),/*#__PURE__*/_jsxs(FormGroup,{children:[/*#__PURE__*/_jsx(Label,{children:\"\\u989C\\u82721\"}),/*#__PURE__*/_jsx(ColorPicker,{type:\"color\",value:settings.gradientColors&&settings.gradientColors[0]||'#4a90e2',onChange:e=>{const updatedColors=[...(settings.gradientColors||['#4a90e2','#9b59b6'])];updatedColors[0]=e.target.value;handleSettingChange('gradientColors',updatedColors);}})]}),/*#__PURE__*/_jsxs(FormGroup,{children:[/*#__PURE__*/_jsx(Label,{children:\"\\u989C\\u82722\"}),/*#__PURE__*/_jsx(ColorPicker,{type:\"color\",value:settings.gradientColors&&settings.gradientColors[1]||'#9b59b6',onChange:e=>{const updatedColors=[...(settings.gradientColors||['#4a90e2','#9b59b6'])];updatedColors[1]=e.target.value;handleSettingChange('gradientColors',updatedColors);}})]}),/*#__PURE__*/_jsx(\"div\",{style:{width:'100%',height:'60px',borderRadius:'8px',background:gradientPreview,border:'2px solid var(--border-color)',marginTop:'12px',display:'flex',alignItems:'center',justifyContent:'center',color:'white',fontWeight:'500',textShadow:'0 1px 2px rgba(0, 0, 0, 0.5)'},children:\"\\u6E10\\u53D8\\u9884\\u89C8\"})]}),/*#__PURE__*/_jsxs(FormGroup,{children:[/*#__PURE__*/_jsx(Label,{children:\"\\u900F\\u660E\\u5EA6\"}),/*#__PURE__*/_jsx(Slider,{type:\"range\",min:\"0\",max:\"1\",step:\"0.01\",value:settings.backgroundOpacity||1,onChange:e=>handleSettingChange('backgroundOpacity',parseFloat(e.target.value))}),/*#__PURE__*/_jsxs(SliderValue,{children:[Math.round((settings.backgroundOpacity||1)*100),\"%\"]})]})]})]}),/*#__PURE__*/_jsxs(SettingsSection,{children:[/*#__PURE__*/_jsxs(SectionTitle,{children:[/*#__PURE__*/_jsx(TextFormatIcon,{}),\"\\u6587\\u5B57\\u8BBE\\u7F6E\"]}),/*#__PURE__*/_jsxs(FormGroup,{children:[/*#__PURE__*/_jsx(Label,{children:\"\\u6587\\u5B57\\u989C\\u8272\"}),/*#__PURE__*/_jsx(ColorPicker,{type:\"color\",value:settings.textColor||(settings.theme==='dark'?'#e0e0e0':'#333333'),onChange:e=>handleSettingChange('textColor',e.target.value)})]}),/*#__PURE__*/_jsxs(FormGroup,{children:[/*#__PURE__*/_jsx(Label,{children:\"\\u94FE\\u63A5\\u989C\\u8272\"}),/*#__PURE__*/_jsx(ColorPicker,{type:\"color\",value:settings.linkColor||'#4a90e2',onChange:e=>handleSettingChange('linkColor',e.target.value)})]}),/*#__PURE__*/_jsxs(FormGroup,{children:[/*#__PURE__*/_jsx(Label,{children:\"\\u5B57\\u4F53\"}),/*#__PURE__*/_jsxs(Select,{value:settings.fontFamily||'Microsoft YaHei, sans-serif',onChange:e=>handleSettingChange('fontFamily',e.target.value),children:[/*#__PURE__*/_jsx(\"option\",{value:\"Microsoft YaHei, sans-serif\",children:\"\\u5FAE\\u8F6F\\u96C5\\u9ED1\"}),/*#__PURE__*/_jsx(\"option\",{value:\"SimSun, serif\",children:\"\\u5B8B\\u4F53\"}),/*#__PURE__*/_jsx(\"option\",{value:\"SimHei, sans-serif\",children:\"\\u9ED1\\u4F53\"}),/*#__PURE__*/_jsx(\"option\",{value:\"KaiTi, serif\",children:\"\\u6977\\u4F53\"}),/*#__PURE__*/_jsx(\"option\",{value:\"FangSong, serif\",children:\"\\u4EFF\\u5B8B\"}),/*#__PURE__*/_jsx(\"option\",{value:\"Arial, sans-serif\",children:\"Arial\"}),/*#__PURE__*/_jsx(\"option\",{value:\"Times New Roman, serif\",children:\"Times New Roman\"}),/*#__PURE__*/_jsx(\"option\",{value:\"Georgia, serif\",children:\"Georgia\"}),/*#__PURE__*/_jsx(\"option\",{value:\"Courier New, monospace\",children:\"Courier New\"})]})]})]}),/*#__PURE__*/_jsxs(SettingsSection,{children:[/*#__PURE__*/_jsxs(SectionTitle,{children:[/*#__PURE__*/_jsx(StorageIcon,{}),\"\\u914D\\u7F6E\\u7BA1\\u7406\"]}),/*#__PURE__*/_jsxs(ButtonGroup,{children:[/*#__PURE__*/_jsxs(Button,{className:\"primary\",onClick:()=>{try{configManager.exportConfig();showStatus('配置导出成功','success');}catch(error){console.error('导出配置失败:',error);showStatus('导出配置失败','error');}},children:[/*#__PURE__*/_jsx(BackupIcon,{}),\"\\u5BFC\\u51FA\\u914D\\u7F6E\"]}),/*#__PURE__*/_jsxs(Button,{className:\"secondary\",onClick:()=>{var _importRef$current;return(_importRef$current=importRef.current)===null||_importRef$current===void 0?void 0:_importRef$current.click();},children:[/*#__PURE__*/_jsx(RestoreIcon,{}),\"\\u5BFC\\u5165\\u914D\\u7F6E\",/*#__PURE__*/_jsx(\"input\",{type:\"file\",accept:\".json\",ref:importRef,style:{display:'none'},onChange:async e=>{const file=e.target.files[0];if(file){try{setIsLoading(true);await configManager.importConfig(file);// 重新加载设置\nconst loadedSettings=configManager.get('settings',{});setSettings(loadedSettings);if(loadedSettings.backgroundImage){setImagePreview(loadedSettings.backgroundImage);}// 应用设置\napplySettings(loadedSettings);// 更新统计信息\nsetConfigStats(configManager.getStats());showStatus('配置导入成功','success');}catch(error){console.error('导入配置失败:',error);showStatus('导入配置失败，文件格式不正确','error');}finally{setIsLoading(false);}}}})]})]}),/*#__PURE__*/_jsxs(ButtonGroup,{children:[/*#__PURE__*/_jsxs(Button,{className:\"secondary\",onClick:async()=>{try{await configManager.forceSave();showStatus('配置保存成功','success');}catch(error){console.error('保存配置失败:',error);showStatus('保存配置失败','error');}},children:[/*#__PURE__*/_jsx(StorageIcon,{}),\"\\u5F3A\\u5236\\u4FDD\\u5B58\"]}),/*#__PURE__*/_jsxs(Button,{className:\"danger\",onClick:async()=>{if(window.confirm('确定要重置所有配置吗？这将删除所有自定义设置。')){try{setIsLoading(true);await configManager.resetConfig();// 重新加载设置\nconst loadedSettings=configManager.get('settings',{});setSettings(loadedSettings);setImagePreview('');// 应用设置\napplySettings(loadedSettings);// 更新统计信息\nsetConfigStats(configManager.getStats());showStatus('配置已重置','success');}catch(error){console.error('重置配置失败:',error);showStatus('重置配置失败','error');}finally{setIsLoading(false);}}},children:[/*#__PURE__*/_jsx(RefreshIcon,{}),\"\\u91CD\\u7F6E\\u914D\\u7F6E\"]})]}),configStats&&/*#__PURE__*/_jsxs(\"div\",{style:{background:'rgba(0, 0, 0, 0.05)',borderRadius:'8px',padding:'16px',marginTop:'16px',fontFamily:'Courier New, monospace',fontSize:'12px'},children:[/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',justifyContent:'space-between',marginBottom:'8px'},children:[/*#__PURE__*/_jsx(\"span\",{style:{color:'var(--text-secondary-color)'},children:\"\\u914D\\u7F6E\\u7248\\u672C:\"}),/*#__PURE__*/_jsx(\"span\",{style:{fontWeight:'bold',color:'var(--primary-color)'},children:configStats.version})]}),/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',justifyContent:'space-between',marginBottom:'8px'},children:[/*#__PURE__*/_jsx(\"span\",{style:{color:'var(--text-secondary-color)'},children:\"\\u6700\\u540E\\u66F4\\u65B0:\"}),/*#__PURE__*/_jsx(\"span\",{style:{fontWeight:'bold',color:'var(--primary-color)'},children:new Date(configStats.lastUpdated).toLocaleString()})]}),/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',justifyContent:'space-between',marginBottom:'8px'},children:[/*#__PURE__*/_jsx(\"span\",{style:{color:'var(--text-secondary-color)'},children:\"\\u6570\\u636E\\u5927\\u5C0F:\"}),/*#__PURE__*/_jsxs(\"span\",{style:{fontWeight:'bold',color:'var(--primary-color)'},children:[(configStats.dataSize/1024).toFixed(2),\" KB\"]})]}),/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',justifyContent:'space-between',marginBottom:'8px'},children:[/*#__PURE__*/_jsx(\"span\",{style:{color:'var(--text-secondary-color)'},children:\"\\u4E66\\u7B7E\\u6570\\u91CF:\"}),/*#__PURE__*/_jsx(\"span\",{style:{fontWeight:'bold',color:'var(--primary-color)'},children:configStats.bookmarksCount})]}),/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',justifyContent:'space-between',marginBottom:'8px'},children:[/*#__PURE__*/_jsx(\"span\",{style:{color:'var(--text-secondary-color)'},children:\"\\u5F85\\u529E\\u6570\\u91CF:\"}),/*#__PURE__*/_jsx(\"span\",{style:{fontWeight:'bold',color:'var(--primary-color)'},children:configStats.todosCount})]}),/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',justifyContent:'space-between'},children:[/*#__PURE__*/_jsx(\"span\",{style:{color:'var(--text-secondary-color)'},children:\"\\u7B14\\u8BB0\\u6570\\u91CF:\"}),/*#__PURE__*/_jsx(\"span\",{style:{fontWeight:'bold',color:'var(--primary-color)'},children:configStats.notesCount})]})]})]}),/*#__PURE__*/_jsxs(SettingsSection,{children:[/*#__PURE__*/_jsxs(SectionTitle,{children:[/*#__PURE__*/_jsx(InfoIcon,{}),\"\\u7CFB\\u7EDF\\u4FE1\\u606F\"]}),/*#__PURE__*/_jsxs(\"div\",{style:{background:'rgba(0, 0, 0, 0.05)',borderRadius:'8px',padding:'16px',fontFamily:'Courier New, monospace',fontSize:'12px'},children:[/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',justifyContent:'space-between',marginBottom:'8px'},children:[/*#__PURE__*/_jsx(\"span\",{style:{color:'var(--text-secondary-color)'},children:\"\\u5B58\\u50A8\\u65B9\\u5F0F:\"}),/*#__PURE__*/_jsx(\"span\",{style:{fontWeight:'bold',color:'var(--primary-color)'},children:\"config.json \\u6587\\u4EF6\"})]}),/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',justifyContent:'space-between',marginBottom:'8px'},children:[/*#__PURE__*/_jsx(\"span\",{style:{color:'var(--text-secondary-color)'},children:\"\\u81EA\\u52A8\\u4FDD\\u5B58:\"}),/*#__PURE__*/_jsx(\"span\",{style:{fontWeight:'bold',color:'var(--primary-color)'},children:\"\\u5DF2\\u542F\\u7528\"})]}),/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',justifyContent:'space-between',marginBottom:'8px'},children:[/*#__PURE__*/_jsx(\"span\",{style:{color:'var(--text-secondary-color)'},children:\"\\u9632\\u6296\\u5EF6\\u8FDF:\"}),/*#__PURE__*/_jsx(\"span\",{style:{fontWeight:'bold',color:'var(--primary-color)'},children:\"500ms\"})]}),/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',justifyContent:'space-between'},children:[/*#__PURE__*/_jsx(\"span\",{style:{color:'var(--text-secondary-color)'},children:\"\\u914D\\u7F6E\\u6587\\u4EF6:\"}),/*#__PURE__*/_jsx(\"span\",{style:{fontWeight:'bold',color:'var(--primary-color)'},children:\"./config.json\"})]})]}),/*#__PURE__*/_jsx(\"p\",{style:{fontSize:'12px',color:'var(--text-secondary-color)',marginTop:'16px',lineHeight:'1.5'},children:\"\\u2728 \\u5168\\u65B0\\u4F18\\u5316\\u7684\\u8BBE\\u7F6E\\u9762\\u677F\\uFF0C\\u91C7\\u7528\\u9632\\u6296\\u4FDD\\u5B58\\u673A\\u5236\\uFF0C\\u907F\\u514D\\u9891\\u7E41\\u5199\\u5165\\u3002 \\u652F\\u6301\\u5B9E\\u65F6\\u9884\\u89C8\\u3001\\u72B6\\u6001\\u63D0\\u793A\\u548C\\u9519\\u8BEF\\u5904\\u7406\\uFF0C\\u63D0\\u4F9B\\u66F4\\u6D41\\u7545\\u7684\\u7528\\u6237\\u4F53\\u9A8C\\u3002\"})]})]})]});};export default EnhancedSettingsPanel;","map":{"version":3,"names":["React","useState","useEffect","useRef","useCallback","useMemo","styled","configManager","backgroundManager","handleUrlChange","CloseIcon","WallpaperIcon","TextFormatIcon","BackupIcon","RestoreIcon","DarkModeIcon","HomeIcon","RefreshIcon","StorageIcon","InfoIcon","CheckCircleIcon","ErrorIcon","WarningIcon","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","SettingsContainer","div","props","isOpen","SettingsHeader","SettingsTitle","h2","CloseButton","button","SettingsContent","SettingsSection","SectionTitle","h3","FormGroup","Label","label","Input","input","Select","select","Slider","SliderValue","span","ColorPicker","Switch","SwitchSlider","SwitchContainer","SwitchLabel","ButtonGroup","Button","StatusMessage","LoadingOverlay","LoadingSpinner","EnhancedSettingsPanel","_ref","onClose","onSettingsUpdate","settings","setSettings","imagePreview","setImagePreview","statusMessage","setStatusMessage","configStats","setConfigStats","isLoading","setIsLoading","isInitialized","setIsInitialized","hasUnsavedChanges","setHasUnsavedChanges","fileInputRef","importRef","saveTimeoutRef","debouncedSave","key","value","current","clearTimeout","setTimeout","set","showStatus","error","console","message","type","arguments","length","undefined","icons","success","warning","info","text","icon","applySettings","root","document","documentElement","theme","style","setProperty","body","classList","add","remove","textColor","linkColor","fontFamily","initializeConfig","initialize","loadedSettings","get","backgroundImage","getStats","handleSettingChange","updatedSettings","gradientPreview","gradientType","gradientDirection","gradientColors","gradientStops","children","onClick","className","checked","onChange","e","target","startupModuleType","startupModule","window","location","reload","showBackground","backgroundType","backgroundColor","updatedColors","width","height","borderRadius","background","border","marginTop","display","alignItems","justifyContent","color","fontWeight","textShadow","min","max","step","backgroundOpacity","parseFloat","Math","round","exportConfig","_importRef$current","click","accept","ref","file","files","importConfig","forceSave","confirm","resetConfig","padding","fontSize","marginBottom","version","Date","lastUpdated","toLocaleString","dataSize","toFixed","bookmarksCount","todosCount","notesCount","lineHeight"],"sources":["D:/Jliu Pureey/Documents/Editor/extion/homepage/src/settings/EnhancedSettingsPanel.js"],"sourcesContent":["import React, { useState, useEffect, useRef, useCallback, useMemo } from 'react';\r\nimport styled from 'styled-components';\r\nimport configManager from '../utils/simpleConfigManager';\r\nimport backgroundManager from '../utils/backgroundManager';\r\nimport { handleUrlChange } from '../utils/urlHandler';\r\n\r\n// 图标导入\r\nimport CloseIcon from '@mui/icons-material/Close';\r\nimport WallpaperIcon from '@mui/icons-material/Wallpaper';\r\nimport TextFormatIcon from '@mui/icons-material/TextFormat';\r\nimport BackupIcon from '@mui/icons-material/Backup';\r\nimport RestoreIcon from '@mui/icons-material/Restore';\r\nimport DarkModeIcon from '@mui/icons-material/DarkMode';\r\nimport HomeIcon from '@mui/icons-material/Home';\r\nimport RefreshIcon from '@mui/icons-material/Refresh';\r\nimport StorageIcon from '@mui/icons-material/Storage';\r\nimport InfoIcon from '@mui/icons-material/Info';\r\nimport CheckCircleIcon from '@mui/icons-material/CheckCircle';\r\nimport ErrorIcon from '@mui/icons-material/Error';\r\nimport WarningIcon from '@mui/icons-material/Warning';\r\n\r\n// 样式组件\r\nconst SettingsContainer = styled.div`\r\n  position: fixed;\r\n  top: 0;\r\n  right: ${props => props.isOpen ? '0' : '-420px'};\r\n  width: 420px;\r\n  height: 100vh;\r\n  background-color: var(--card-background);\r\n  box-shadow: -5px 0 15px rgba(0, 0, 0, 0.1);\r\n  transition: right 0.3s cubic-bezier(0.4, 0, 0.2, 1);\r\n  z-index: 1000;\r\n  display: flex;\r\n  flex-direction: column;\r\n  overflow: hidden;\r\n  backdrop-filter: blur(10px);\r\n  border-left: 1px solid var(--border-color);\r\n`;\r\n\r\nconst SettingsHeader = styled.div`\r\n  display: flex;\r\n  justify-content: space-between;\r\n  align-items: center;\r\n  padding: 20px;\r\n  border-bottom: 1px solid var(--border-color);\r\n  background: var(--card-background);\r\n  position: sticky;\r\n  top: 0;\r\n  z-index: 10;\r\n`;\r\n\r\nconst SettingsTitle = styled.h2`\r\n  margin: 0;\r\n  font-size: 20px;\r\n  font-weight: 600;\r\n  color: var(--text-color);\r\n`;\r\n\r\nconst CloseButton = styled.button`\r\n  background: none;\r\n  border: none;\r\n  cursor: pointer;\r\n  color: var(--text-color);\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n  padding: 8px;\r\n  border-radius: 50%;\r\n  transition: all 0.2s ease;\r\n  \r\n  &:hover {\r\n    background: var(--hover-background);\r\n    color: var(--primary-color);\r\n    transform: scale(1.1);\r\n  }\r\n`;\r\n\r\nconst SettingsContent = styled.div`\r\n  flex: 1;\r\n  overflow-y: auto;\r\n  padding: 20px;\r\n  scroll-behavior: smooth;\r\n  \r\n  &::-webkit-scrollbar {\r\n    width: 6px;\r\n  }\r\n  \r\n  &::-webkit-scrollbar-track {\r\n    background: transparent;\r\n  }\r\n  \r\n  &::-webkit-scrollbar-thumb {\r\n    background: var(--border-color);\r\n    border-radius: 3px;\r\n  }\r\n  \r\n  &::-webkit-scrollbar-thumb:hover {\r\n    background: var(--primary-color);\r\n  }\r\n`;\r\n\r\nconst SettingsSection = styled.div`\r\n  margin-bottom: 24px;\r\n  background: var(--background-color);\r\n  border-radius: 12px;\r\n  padding: 20px;\r\n  border: 1px solid var(--border-color);\r\n  transition: all 0.3s ease;\r\n  \r\n  &:hover {\r\n    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);\r\n    transform: translateY(-1px);\r\n  }\r\n`;\r\n\r\nconst SectionTitle = styled.h3`\r\n  margin: 0 0 16px 0;\r\n  font-size: 16px;\r\n  font-weight: 600;\r\n  display: flex;\r\n  align-items: center;\r\n  gap: 10px;\r\n  color: var(--text-color);\r\n  \r\n  svg {\r\n    color: var(--primary-color);\r\n    font-size: 20px;\r\n  }\r\n`;\r\n\r\nconst FormGroup = styled.div`\r\n  margin-bottom: 16px;\r\n  \r\n  &:last-child {\r\n    margin-bottom: 0;\r\n  }\r\n`;\r\n\r\nconst Label = styled.label`\r\n  display: block;\r\n  margin-bottom: 8px;\r\n  font-size: 14px;\r\n  font-weight: 500;\r\n  color: var(--text-color);\r\n`;\r\n\r\nconst Input = styled.input`\r\n  width: 100%;\r\n  padding: 12px;\r\n  border: 2px solid var(--border-color);\r\n  border-radius: 8px;\r\n  background-color: var(--background-color);\r\n  color: var(--text-color);\r\n  font-size: 14px;\r\n  transition: all 0.3s ease;\r\n  \r\n  &:focus {\r\n    outline: none;\r\n    border-color: var(--primary-color);\r\n    box-shadow: 0 0 0 3px rgba(74, 144, 226, 0.1);\r\n  }\r\n  \r\n  &::placeholder {\r\n    color: var(--text-secondary-color);\r\n  }\r\n`;\r\n\r\nconst Select = styled.select`\r\n  width: 100%;\r\n  padding: 12px;\r\n  border: 2px solid var(--border-color);\r\n  border-radius: 8px;\r\n  background-color: var(--background-color);\r\n  color: var(--text-color);\r\n  font-size: 14px;\r\n  cursor: pointer;\r\n  transition: all 0.3s ease;\r\n  \r\n  &:focus {\r\n    outline: none;\r\n    border-color: var(--primary-color);\r\n    box-shadow: 0 0 0 3px rgba(74, 144, 226, 0.1);\r\n  }\r\n`;\r\n\r\nconst Slider = styled.input`\r\n  width: 100%;\r\n  margin: 12px 0;\r\n  height: 6px;\r\n  border-radius: 3px;\r\n  background: var(--border-color);\r\n  outline: none;\r\n  transition: all 0.3s ease;\r\n  \r\n  &::-webkit-slider-thumb {\r\n    appearance: none;\r\n    width: 20px;\r\n    height: 20px;\r\n    border-radius: 50%;\r\n    background: var(--primary-color);\r\n    cursor: pointer;\r\n    box-shadow: 0 2px 6px rgba(0, 0, 0, 0.2);\r\n    transition: all 0.2s ease;\r\n    \r\n    &:hover {\r\n      transform: scale(1.2);\r\n    }\r\n  }\r\n`;\r\n\r\nconst SliderValue = styled.span`\r\n  font-size: 12px;\r\n  color: var(--text-secondary-color);\r\n  display: block;\r\n  text-align: right;\r\n  margin-top: 4px;\r\n  font-weight: 500;\r\n`;\r\n\r\nconst ColorPicker = styled.input`\r\n  width: 100%;\r\n  height: 50px;\r\n  border: 2px solid var(--border-color);\r\n  border-radius: 8px;\r\n  cursor: pointer;\r\n  padding: 4px;\r\n  background: var(--background-color);\r\n  transition: all 0.3s ease;\r\n  \r\n  &:hover {\r\n    border-color: var(--primary-color);\r\n  }\r\n`;\r\n\r\nconst Switch = styled.label`\r\n  position: relative;\r\n  display: inline-block;\r\n  width: 54px;\r\n  height: 28px;\r\n  \r\n  input {\r\n    opacity: 0;\r\n    width: 0;\r\n    height: 0;\r\n  }\r\n`;\r\n\r\nconst SwitchSlider = styled.span`\r\n  position: absolute;\r\n  cursor: pointer;\r\n  top: 0;\r\n  left: 0;\r\n  right: 0;\r\n  bottom: 0;\r\n  background-color: var(--border-color);\r\n  transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);\r\n  border-radius: 28px;\r\n  \r\n  &:before {\r\n    position: absolute;\r\n    content: \"\";\r\n    height: 20px;\r\n    width: 20px;\r\n    left: 4px;\r\n    bottom: 4px;\r\n    background-color: white;\r\n    transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);\r\n    border-radius: 50%;\r\n    box-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);\r\n  }\r\n  \r\n  input:checked + & {\r\n    background-color: var(--primary-color);\r\n  }\r\n  \r\n  input:checked + &:before {\r\n    transform: translateX(26px);\r\n  }\r\n`;\r\n\r\nconst SwitchContainer = styled.div`\r\n  display: flex;\r\n  justify-content: space-between;\r\n  align-items: center;\r\n  padding: 8px 0;\r\n`;\r\n\r\nconst SwitchLabel = styled.span`\r\n  font-size: 14px;\r\n  font-weight: 500;\r\n  color: var(--text-color);\r\n`;\r\n\r\nconst ButtonGroup = styled.div`\r\n  display: flex;\r\n  gap: 12px;\r\n  margin-top: 16px;\r\n  flex-wrap: wrap;\r\n`;\r\n\r\nconst Button = styled.button`\r\n  padding: 12px 18px;\r\n  border: none;\r\n  border-radius: 8px;\r\n  cursor: pointer;\r\n  font-size: 14px;\r\n  font-weight: 500;\r\n  display: flex;\r\n  align-items: center;\r\n  gap: 8px;\r\n  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);\r\n  flex: 1;\r\n  min-width: 120px;\r\n  position: relative;\r\n  overflow: hidden;\r\n  \r\n  &:disabled {\r\n    opacity: 0.6;\r\n    cursor: not-allowed;\r\n  }\r\n  \r\n  &.primary {\r\n    background-color: var(--primary-color);\r\n    color: white;\r\n    \r\n    &:hover:not(:disabled) {\r\n      background-color: #3a7bc8;\r\n      transform: translateY(-2px);\r\n      box-shadow: 0 4px 12px rgba(74, 144, 226, 0.3);\r\n    }\r\n  }\r\n  \r\n  &.secondary {\r\n    background-color: var(--card-background);\r\n    color: var(--text-color);\r\n    border: 2px solid var(--border-color);\r\n    \r\n    &:hover:not(:disabled) {\r\n      background-color: var(--hover-background);\r\n      transform: translateY(-2px);\r\n      box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);\r\n    }\r\n  }\r\n  \r\n  &.danger {\r\n    background-color: #e74c3c;\r\n    color: white;\r\n    \r\n    &:hover:not(:disabled) {\r\n      background-color: #c0392b;\r\n      transform: translateY(-2px);\r\n      box-shadow: 0 4px 12px rgba(231, 76, 60, 0.3);\r\n    }\r\n  }\r\n`;\r\n\r\nconst StatusMessage = styled.div`\r\n  padding: 12px 16px;\r\n  border-radius: 8px;\r\n  margin-bottom: 16px;\r\n  font-size: 14px;\r\n  display: flex;\r\n  align-items: center;\r\n  gap: 10px;\r\n  animation: slideIn 0.3s ease;\r\n  \r\n  @keyframes slideIn {\r\n    from {\r\n      opacity: 0;\r\n      transform: translateY(-10px);\r\n    }\r\n    to {\r\n      opacity: 1;\r\n      transform: translateY(0);\r\n    }\r\n  }\r\n  \r\n  &.success {\r\n    background-color: rgba(76, 175, 80, 0.1);\r\n    color: #2e7d32;\r\n    border: 1px solid rgba(76, 175, 80, 0.3);\r\n  }\r\n  \r\n  &.error {\r\n    background-color: rgba(244, 67, 54, 0.1);\r\n    color: #c62828;\r\n    border: 1px solid rgba(244, 67, 54, 0.3);\r\n  }\r\n  \r\n  &.info {\r\n    background-color: rgba(33, 150, 243, 0.1);\r\n    color: #1565c0;\r\n    border: 1px solid rgba(33, 150, 243, 0.3);\r\n  }\r\n  \r\n  &.warning {\r\n    background-color: rgba(255, 152, 0, 0.1);\r\n    color: #ef6c00;\r\n    border: 1px solid rgba(255, 152, 0, 0.3);\r\n  }\r\n`;\r\n\r\nconst LoadingOverlay = styled.div`\r\n  position: absolute;\r\n  top: 0;\r\n  left: 0;\r\n  right: 0;\r\n  bottom: 0;\r\n  background: rgba(255, 255, 255, 0.9);\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n  z-index: 100;\r\n  backdrop-filter: blur(2px);\r\n`;\r\n\r\nconst LoadingSpinner = styled.div`\r\n  width: 40px;\r\n  height: 40px;\r\n  border: 3px solid var(--border-color);\r\n  border-top: 3px solid var(--primary-color);\r\n  border-radius: 50%;\r\n  animation: spin 1s linear infinite;\r\n  \r\n  @keyframes spin {\r\n    0% { transform: rotate(0deg); }\r\n    100% { transform: rotate(360deg); }\r\n  }\r\n`;\r\n\r\n// 增强的设置面板组件\r\nconst EnhancedSettingsPanel = ({ isOpen, onClose, onSettingsUpdate }) => {\r\n  // 状态管理\r\n  const [settings, setSettings] = useState({});\r\n  const [imagePreview, setImagePreview] = useState('');\r\n  const [statusMessage, setStatusMessage] = useState('');\r\n  const [configStats, setConfigStats] = useState(null);\r\n  const [isLoading, setIsLoading] = useState(false);\r\n  const [isInitialized, setIsInitialized] = useState(false);\r\n  const [hasUnsavedChanges, setHasUnsavedChanges] = useState(false);\r\n  \r\n  const fileInputRef = useRef(null);\r\n  const importRef = useRef(null);\r\n  const saveTimeoutRef = useRef(null);\r\n\r\n  // 防抖保存函数\r\n  const debouncedSave = useCallback((key, value) => {\r\n    if (saveTimeoutRef.current) {\r\n      clearTimeout(saveTimeoutRef.current);\r\n    }\r\n    \r\n    saveTimeoutRef.current = setTimeout(async () => {\r\n      try {\r\n        await configManager.set(`settings.${key}`, value);\r\n        setHasUnsavedChanges(false);\r\n        showStatus('设置已保存', 'success');\r\n      } catch (error) {\r\n        console.error('保存设置失败:', error);\r\n        showStatus('保存设置失败', 'error');\r\n      }\r\n    }, 500);\r\n  }, []);\r\n\r\n  // 显示状态消息\r\n  const showStatus = useCallback((message, type = 'info') => {\r\n    const icons = {\r\n      success: <CheckCircleIcon />,\r\n      error: <ErrorIcon />,\r\n      warning: <WarningIcon />,\r\n      info: <InfoIcon />\r\n    };\r\n    \r\n    setStatusMessage({ \r\n      text: message, \r\n      type, \r\n      icon: icons[type] || icons.info \r\n    });\r\n    \r\n    setTimeout(() => setStatusMessage(''), 4000);\r\n  }, []);\r\n\r\n  // 应用设置到页面\r\n  const applySettings = useCallback((settings) => {\r\n    try {\r\n      const root = document.documentElement;\r\n      \r\n      // 应用主题\r\n      if (settings.theme === 'dark') {\r\n        root.style.setProperty('--background-color', '#121212');\r\n        root.style.setProperty('--card-background', '#1e1e1e');\r\n        root.style.setProperty('--border-color', '#333333');\r\n        root.style.setProperty('--shadow-color', 'rgba(0, 0, 0, 0.3)');\r\n        root.style.setProperty('--text-color', '#e0e0e0');\r\n        root.style.setProperty('--text-secondary-color', '#a0a0a0');\r\n        root.style.setProperty('--hover-background', '#333333');\r\n        document.body.classList.add('dark-mode');\r\n      } else {\r\n        root.style.setProperty('--background-color', '#ffffff');\r\n        root.style.setProperty('--card-background', '#f8f8f8');\r\n        root.style.setProperty('--border-color', '#e0e0e0');\r\n        root.style.setProperty('--shadow-color', 'rgba(0, 0, 0, 0.1)');\r\n        root.style.setProperty('--text-color', '#333333');\r\n        root.style.setProperty('--text-secondary-color', '#666666');\r\n        root.style.setProperty('--hover-background', '#f0f0f0');\r\n        document.body.classList.remove('dark-mode');\r\n      }\r\n      \r\n      // 应用颜色设置\r\n      if (settings.textColor) {\r\n        root.style.setProperty('--text-color', settings.textColor);\r\n      }\r\n      if (settings.linkColor) {\r\n        root.style.setProperty('--primary-color', settings.linkColor);\r\n      }\r\n      \r\n      // 应用字体设置\r\n      if (settings.fontFamily) {\r\n        root.style.setProperty('--font-family', settings.fontFamily);\r\n      }\r\n      \r\n      // 使用背景管理器应用背景设置\r\n      backgroundManager.applySettings(settings);\r\n      \r\n    } catch (error) {\r\n      console.error('应用设置时出错:', error);\r\n      showStatus('应用设置失败', 'error');\r\n    }\r\n  }, [showStatus]);\r\n\r\n  // 初始化配置\r\n  useEffect(() => {\r\n    const initializeConfig = async () => {\r\n      if (!isOpen) return;\r\n      \r\n      try {\r\n        setIsLoading(true);\r\n        \r\n        // 确保配置管理器已初始化\r\n        if (!configManager.isInitialized) {\r\n          await configManager.initialize();\r\n        }\r\n        \r\n        // 加载设置\r\n        const loadedSettings = configManager.get('settings', {});\r\n        setSettings(loadedSettings);\r\n        \r\n        if (loadedSettings.backgroundImage) {\r\n          setImagePreview(loadedSettings.backgroundImage);\r\n        }\r\n        \r\n        // 应用设置\r\n        applySettings(loadedSettings);\r\n        \r\n        // 加载统计信息\r\n        setConfigStats(configManager.getStats());\r\n        \r\n        setIsInitialized(true);\r\n        showStatus('设置加载成功', 'success');\r\n        \r\n      } catch (error) {\r\n        console.error('配置初始化失败:', error);\r\n        showStatus('配置加载失败，使用默认设置', 'error');\r\n      } finally {\r\n        setIsLoading(false);\r\n      }\r\n    };\r\n\r\n    initializeConfig();\r\n  }, [isOpen, applySettings, showStatus]);\r\n\r\n  // 处理设置变化\r\n  const handleSettingChange = useCallback(async (key, value) => {\r\n    try {\r\n      const updatedSettings = { ...settings, [key]: value };\r\n      setSettings(updatedSettings);\r\n      setHasUnsavedChanges(true);\r\n      \r\n      // 立即应用设置\r\n      applySettings(updatedSettings);\r\n      \r\n      // 通知父组件设置已更新\r\n      if (onSettingsUpdate) {\r\n        onSettingsUpdate(updatedSettings);\r\n      }\r\n      \r\n      // 防抖保存\r\n      debouncedSave(key, value);\r\n      \r\n      // 更新统计信息\r\n      setConfigStats(configManager.getStats());\r\n      \r\n    } catch (error) {\r\n      console.error('处理设置变化失败:', error);\r\n      showStatus('设置更新失败', 'error');\r\n    }\r\n  }, [settings, applySettings, debouncedSave, showStatus]);\r\n\r\n  // 渐变预览\r\n  const gradientPreview = useMemo(() => {\r\n    const { gradientType = 'linear', gradientDirection = 'to right', gradientColors = ['#4a90e2', '#9b59b6'], gradientStops = [0, 100] } = settings;\r\n    return `${gradientType}-gradient(${gradientDirection}, ${gradientColors[0]} ${gradientStops[0]}%, ${gradientColors[1]} ${gradientStops[1]}%)`;\r\n  }, [settings]);\r\n\r\n  // 组件卸载时清理\r\n  useEffect(() => {\r\n    return () => {\r\n      if (saveTimeoutRef.current) {\r\n        clearTimeout(saveTimeoutRef.current);\r\n      }\r\n    };\r\n  }, []);\r\n\r\n  // 如果未初始化，显示加载状态\r\n  if (!isInitialized) {\r\n    return (\r\n      <SettingsContainer isOpen={isOpen}>\r\n        <SettingsHeader>\r\n          <SettingsTitle>设置中心</SettingsTitle>\r\n          <CloseButton onClick={onClose}>\r\n            <CloseIcon />\r\n          </CloseButton>\r\n        </SettingsHeader>\r\n        <LoadingOverlay>\r\n          <LoadingSpinner />\r\n        </LoadingOverlay>\r\n      </SettingsContainer>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <SettingsContainer isOpen={isOpen}>\r\n      {isLoading && (\r\n        <LoadingOverlay>\r\n          <LoadingSpinner />\r\n        </LoadingOverlay>\r\n      )}\r\n      \r\n      <SettingsHeader>\r\n        <SettingsTitle>设置中心</SettingsTitle>\r\n        <CloseButton onClick={onClose}>\r\n          <CloseIcon />\r\n        </CloseButton>\r\n      </SettingsHeader>\r\n      \r\n      <SettingsContent>\r\n        {statusMessage && (\r\n          <StatusMessage className={statusMessage.type}>\r\n            {statusMessage.icon}\r\n            {statusMessage.text}\r\n          </StatusMessage>\r\n        )}\r\n\r\n        {hasUnsavedChanges && (\r\n          <StatusMessage className=\"warning\">\r\n            <WarningIcon />\r\n            有未保存的更改，正在自动保存...\r\n          </StatusMessage>\r\n        )}\r\n\r\n        {/* 主题设置 */}\r\n        <SettingsSection>\r\n          <SectionTitle>\r\n            <DarkModeIcon />\r\n            主题设置\r\n          </SectionTitle>\r\n          \r\n          <SwitchContainer>\r\n            <SwitchLabel>深色模式</SwitchLabel>\r\n            <Switch>\r\n              <input \r\n                type=\"checkbox\" \r\n                checked={settings.theme === 'dark'} \r\n                onChange={(e) => handleSettingChange('theme', e.target.checked ? 'dark' : 'light')}\r\n              />\r\n              <SwitchSlider />\r\n            </Switch>\r\n          </SwitchContainer>\r\n        </SettingsSection>\r\n\r\n        {/* 启动界面设置 */}\r\n        <SettingsSection>\r\n          <SectionTitle>\r\n            <HomeIcon />\r\n            启动界面\r\n          </SectionTitle>\r\n          \r\n          <FormGroup>\r\n            <Label>启动时显示</Label>\r\n            <Select \r\n              value={settings.startupModuleType || 'last'} \r\n              onChange={(e) => handleSettingChange('startupModuleType', e.target.value)}\r\n            >\r\n              <option value=\"last\">继承上次界面</option>\r\n              <option value=\"specific\">指定界面</option>\r\n            </Select>\r\n          </FormGroup>\r\n          \r\n          {settings.startupModuleType === 'specific' && (\r\n            <FormGroup>\r\n              <Label>指定界面</Label>\r\n              <Select \r\n                value={settings.startupModule || 'quote'} \r\n                onChange={(e) => handleSettingChange('startupModule', e.target.value)}\r\n              >\r\n                <option value=\"calendar\">📅 日历</option>\r\n                <option value=\"bookmark\">🔖 书签</option>\r\n                <option value=\"todo\">✅ 待办</option>\r\n                <option value=\"note\">📝 笔记</option>\r\n                <option value=\"quote\">💭 一语</option>\r\n                <option value=\"news\">📰 新闻</option>\r\n              </Select>\r\n            </FormGroup>\r\n          )}\r\n          \r\n          <ButtonGroup>\r\n            <Button className=\"secondary\" onClick={() => window.location.reload()}>\r\n              <RefreshIcon />\r\n              重新启动\r\n            </Button>\r\n          </ButtonGroup>\r\n        </SettingsSection>\r\n        \r\n        {/* 背景设置 */}\r\n        <SettingsSection>\r\n          <SectionTitle>\r\n            <WallpaperIcon />\r\n            背景设置\r\n          </SectionTitle>\r\n          \r\n          <SwitchContainer>\r\n            <SwitchLabel>显示背景</SwitchLabel>\r\n            <Switch>\r\n              <input \r\n                type=\"checkbox\" \r\n                checked={settings.showBackground !== false} \r\n                onChange={(e) => handleSettingChange('showBackground', e.target.checked)}\r\n              />\r\n              <SwitchSlider />\r\n            </Switch>\r\n          </SwitchContainer>\r\n          \r\n          {settings.showBackground !== false && (\r\n            <>\r\n              <FormGroup>\r\n                <Label>背景类型</Label>\r\n                <Select \r\n                  value={settings.backgroundType || 'color'} \r\n                  onChange={(e) => handleSettingChange('backgroundType', e.target.value)}\r\n                >\r\n                  <option value=\"color\">纯色</option>\r\n                  <option value=\"image\">图片</option>\r\n                  <option value=\"gradient\">渐变</option>\r\n                </Select>\r\n              </FormGroup>\r\n              \r\n              {settings.backgroundType === 'color' && (\r\n                <FormGroup>\r\n                  <Label>背景颜色</Label>\r\n                  <ColorPicker \r\n                    type=\"color\" \r\n                    value={settings.backgroundColor || '#ffffff'} \r\n                    onChange={(e) => handleSettingChange('backgroundColor', e.target.value)}\r\n                  />\r\n                </FormGroup>\r\n              )}\r\n              \r\n              {settings.backgroundType === 'gradient' && (\r\n                <>\r\n                  <FormGroup>\r\n                    <Label>渐变类型</Label>\r\n                    <Select \r\n                      value={settings.gradientType || 'linear'} \r\n                      onChange={(e) => handleSettingChange('gradientType', e.target.value)}\r\n                    >\r\n                      <option value=\"linear\">线性渐变</option>\r\n                      <option value=\"radial\">径向渐变</option>\r\n                    </Select>\r\n                  </FormGroup>\r\n                  \r\n                  <FormGroup>\r\n                    <Label>颜色1</Label>\r\n                    <ColorPicker \r\n                      type=\"color\" \r\n                      value={(settings.gradientColors && settings.gradientColors[0]) || '#4a90e2'} \r\n                      onChange={(e) => {\r\n                        const updatedColors = [...(settings.gradientColors || ['#4a90e2', '#9b59b6'])];\r\n                        updatedColors[0] = e.target.value;\r\n                        handleSettingChange('gradientColors', updatedColors);\r\n                      }}\r\n                    />\r\n                  </FormGroup>\r\n                  \r\n                  <FormGroup>\r\n                    <Label>颜色2</Label>\r\n                    <ColorPicker \r\n                      type=\"color\" \r\n                      value={(settings.gradientColors && settings.gradientColors[1]) || '#9b59b6'} \r\n                      onChange={(e) => {\r\n                        const updatedColors = [...(settings.gradientColors || ['#4a90e2', '#9b59b6'])];\r\n                        updatedColors[1] = e.target.value;\r\n                        handleSettingChange('gradientColors', updatedColors);\r\n                      }}\r\n                    />\r\n                  </FormGroup>\r\n                  \r\n                  <div style={{ \r\n                    width: '100%', \r\n                    height: '60px', \r\n                    borderRadius: '8px', \r\n                    background: gradientPreview,\r\n                    border: '2px solid var(--border-color)',\r\n                    marginTop: '12px',\r\n                    display: 'flex',\r\n                    alignItems: 'center',\r\n                    justifyContent: 'center',\r\n                    color: 'white',\r\n                    fontWeight: '500',\r\n                    textShadow: '0 1px 2px rgba(0, 0, 0, 0.5)'\r\n                  }}>\r\n                    渐变预览\r\n                  </div>\r\n                </>\r\n              )}\r\n              \r\n              <FormGroup>\r\n                <Label>透明度</Label>\r\n                <Slider \r\n                  type=\"range\" \r\n                  min=\"0\" \r\n                  max=\"1\" \r\n                  step=\"0.01\" \r\n                  value={settings.backgroundOpacity || 1} \r\n                  onChange={(e) => handleSettingChange('backgroundOpacity', parseFloat(e.target.value))}\r\n                />\r\n                <SliderValue>{Math.round((settings.backgroundOpacity || 1) * 100)}%</SliderValue>\r\n              </FormGroup>\r\n            </>\r\n          )}\r\n        </SettingsSection>\r\n        \r\n        {/* 文字设置 */}\r\n        <SettingsSection>\r\n          <SectionTitle>\r\n            <TextFormatIcon />\r\n            文字设置\r\n          </SectionTitle>\r\n          \r\n          <FormGroup>\r\n            <Label>文字颜色</Label>\r\n            <ColorPicker \r\n              type=\"color\" \r\n              value={settings.textColor || (settings.theme === 'dark' ? '#e0e0e0' : '#333333')} \r\n              onChange={(e) => handleSettingChange('textColor', e.target.value)}\r\n            />\r\n          </FormGroup>\r\n          \r\n          <FormGroup>\r\n            <Label>链接颜色</Label>\r\n            <ColorPicker \r\n              type=\"color\" \r\n              value={settings.linkColor || '#4a90e2'} \r\n              onChange={(e) => handleSettingChange('linkColor', e.target.value)}\r\n            />\r\n          </FormGroup>\r\n          \r\n          <FormGroup>\r\n            <Label>字体</Label>\r\n            <Select \r\n              value={settings.fontFamily || 'Microsoft YaHei, sans-serif'} \r\n              onChange={(e) => handleSettingChange('fontFamily', e.target.value)}\r\n            >\r\n              <option value=\"Microsoft YaHei, sans-serif\">微软雅黑</option>\r\n              <option value=\"SimSun, serif\">宋体</option>\r\n              <option value=\"SimHei, sans-serif\">黑体</option>\r\n              <option value=\"KaiTi, serif\">楷体</option>\r\n              <option value=\"FangSong, serif\">仿宋</option>\r\n              <option value=\"Arial, sans-serif\">Arial</option>\r\n              <option value=\"Times New Roman, serif\">Times New Roman</option>\r\n              <option value=\"Georgia, serif\">Georgia</option>\r\n              <option value=\"Courier New, monospace\">Courier New</option>\r\n            </Select>\r\n          </FormGroup>\r\n        </SettingsSection>\r\n        \r\n        {/* 配置管理 */}\r\n        <SettingsSection>\r\n          <SectionTitle>\r\n            <StorageIcon />\r\n            配置管理\r\n          </SectionTitle>\r\n          \r\n          <ButtonGroup>\r\n            <Button \r\n              className=\"primary\" \r\n              onClick={() => {\r\n                try {\r\n                  configManager.exportConfig();\r\n                  showStatus('配置导出成功', 'success');\r\n                } catch (error) {\r\n                  console.error('导出配置失败:', error);\r\n                  showStatus('导出配置失败', 'error');\r\n                }\r\n              }}\r\n            >\r\n              <BackupIcon />\r\n              导出配置\r\n            </Button>\r\n            \r\n            <Button \r\n              className=\"secondary\"\r\n              onClick={() => importRef.current?.click()}\r\n            >\r\n              <RestoreIcon />\r\n              导入配置\r\n              <input \r\n                type=\"file\" \r\n                accept=\".json\" \r\n                ref={importRef}\r\n                style={{ display: 'none' }}\r\n                onChange={async (e) => {\r\n                  const file = e.target.files[0];\r\n                  if (file) {\r\n                    try {\r\n                      setIsLoading(true);\r\n                      await configManager.importConfig(file);\r\n                      \r\n                      // 重新加载设置\r\n                      const loadedSettings = configManager.get('settings', {});\r\n                      setSettings(loadedSettings);\r\n                      \r\n                      if (loadedSettings.backgroundImage) {\r\n                        setImagePreview(loadedSettings.backgroundImage);\r\n                      }\r\n                      \r\n                      // 应用设置\r\n                      applySettings(loadedSettings);\r\n                      \r\n                      // 更新统计信息\r\n                      setConfigStats(configManager.getStats());\r\n                      \r\n                      showStatus('配置导入成功', 'success');\r\n                    } catch (error) {\r\n                      console.error('导入配置失败:', error);\r\n                      showStatus('导入配置失败，文件格式不正确', 'error');\r\n                    } finally {\r\n                      setIsLoading(false);\r\n                    }\r\n                  }\r\n                }}\r\n              />\r\n            </Button>\r\n          </ButtonGroup>\r\n          \r\n          <ButtonGroup>\r\n            <Button \r\n              className=\"secondary\" \r\n              onClick={async () => {\r\n                try {\r\n                  await configManager.forceSave();\r\n                  showStatus('配置保存成功', 'success');\r\n                } catch (error) {\r\n                  console.error('保存配置失败:', error);\r\n                  showStatus('保存配置失败', 'error');\r\n                }\r\n              }}\r\n            >\r\n              <StorageIcon />\r\n              强制保存\r\n            </Button>\r\n            \r\n            <Button \r\n              className=\"danger\" \r\n              onClick={async () => {\r\n                if (window.confirm('确定要重置所有配置吗？这将删除所有自定义设置。')) {\r\n                  try {\r\n                    setIsLoading(true);\r\n                    await configManager.resetConfig();\r\n                    \r\n                    // 重新加载设置\r\n                    const loadedSettings = configManager.get('settings', {});\r\n                    setSettings(loadedSettings);\r\n                    setImagePreview('');\r\n                    \r\n                    // 应用设置\r\n                    applySettings(loadedSettings);\r\n                    \r\n                    // 更新统计信息\r\n                    setConfigStats(configManager.getStats());\r\n                    \r\n                    showStatus('配置已重置', 'success');\r\n                  } catch (error) {\r\n                    console.error('重置配置失败:', error);\r\n                    showStatus('重置配置失败', 'error');\r\n                  } finally {\r\n                    setIsLoading(false);\r\n                  }\r\n                }\r\n              }}\r\n            >\r\n              <RefreshIcon />\r\n              重置配置\r\n            </Button>\r\n          </ButtonGroup>\r\n          \r\n          {configStats && (\r\n            <div style={{\r\n              background: 'rgba(0, 0, 0, 0.05)',\r\n              borderRadius: '8px',\r\n              padding: '16px',\r\n              marginTop: '16px',\r\n              fontFamily: 'Courier New, monospace',\r\n              fontSize: '12px'\r\n            }}>\r\n              <div style={{ display: 'flex', justifyContent: 'space-between', marginBottom: '8px' }}>\r\n                <span style={{ color: 'var(--text-secondary-color)' }}>配置版本:</span>\r\n                <span style={{ fontWeight: 'bold', color: 'var(--primary-color)' }}>{configStats.version}</span>\r\n              </div>\r\n              <div style={{ display: 'flex', justifyContent: 'space-between', marginBottom: '8px' }}>\r\n                <span style={{ color: 'var(--text-secondary-color)' }}>最后更新:</span>\r\n                <span style={{ fontWeight: 'bold', color: 'var(--primary-color)' }}>\r\n                  {new Date(configStats.lastUpdated).toLocaleString()}\r\n                </span>\r\n              </div>\r\n              <div style={{ display: 'flex', justifyContent: 'space-between', marginBottom: '8px' }}>\r\n                <span style={{ color: 'var(--text-secondary-color)' }}>数据大小:</span>\r\n                <span style={{ fontWeight: 'bold', color: 'var(--primary-color)' }}>\r\n                  {(configStats.dataSize / 1024).toFixed(2)} KB\r\n                </span>\r\n              </div>\r\n              <div style={{ display: 'flex', justifyContent: 'space-between', marginBottom: '8px' }}>\r\n                <span style={{ color: 'var(--text-secondary-color)' }}>书签数量:</span>\r\n                <span style={{ fontWeight: 'bold', color: 'var(--primary-color)' }}>{configStats.bookmarksCount}</span>\r\n              </div>\r\n              <div style={{ display: 'flex', justifyContent: 'space-between', marginBottom: '8px' }}>\r\n                <span style={{ color: 'var(--text-secondary-color)' }}>待办数量:</span>\r\n                <span style={{ fontWeight: 'bold', color: 'var(--primary-color)' }}>{configStats.todosCount}</span>\r\n              </div>\r\n              <div style={{ display: 'flex', justifyContent: 'space-between' }}>\r\n                <span style={{ color: 'var(--text-secondary-color)' }}>笔记数量:</span>\r\n                <span style={{ fontWeight: 'bold', color: 'var(--primary-color)' }}>{configStats.notesCount}</span>\r\n              </div>\r\n            </div>\r\n          )}\r\n        </SettingsSection>\r\n        \r\n        {/* 系统信息 */}\r\n        <SettingsSection>\r\n          <SectionTitle>\r\n            <InfoIcon />\r\n            系统信息\r\n          </SectionTitle>\r\n          \r\n          <div style={{\r\n            background: 'rgba(0, 0, 0, 0.05)',\r\n            borderRadius: '8px',\r\n            padding: '16px',\r\n            fontFamily: 'Courier New, monospace',\r\n            fontSize: '12px'\r\n          }}>\r\n            <div style={{ display: 'flex', justifyContent: 'space-between', marginBottom: '8px' }}>\r\n              <span style={{ color: 'var(--text-secondary-color)' }}>存储方式:</span>\r\n              <span style={{ fontWeight: 'bold', color: 'var(--primary-color)' }}>config.json 文件</span>\r\n            </div>\r\n            <div style={{ display: 'flex', justifyContent: 'space-between', marginBottom: '8px' }}>\r\n              <span style={{ color: 'var(--text-secondary-color)' }}>自动保存:</span>\r\n              <span style={{ fontWeight: 'bold', color: 'var(--primary-color)' }}>已启用</span>\r\n            </div>\r\n            <div style={{ display: 'flex', justifyContent: 'space-between', marginBottom: '8px' }}>\r\n              <span style={{ color: 'var(--text-secondary-color)' }}>防抖延迟:</span>\r\n              <span style={{ fontWeight: 'bold', color: 'var(--primary-color)' }}>500ms</span>\r\n            </div>\r\n            <div style={{ display: 'flex', justifyContent: 'space-between' }}>\r\n              <span style={{ color: 'var(--text-secondary-color)' }}>配置文件:</span>\r\n              <span style={{ fontWeight: 'bold', color: 'var(--primary-color)' }}>./config.json</span>\r\n            </div>\r\n          </div>\r\n          \r\n          <p style={{ \r\n            fontSize: '12px', \r\n            color: 'var(--text-secondary-color)', \r\n            marginTop: '16px',\r\n            lineHeight: '1.5'\r\n          }}>\r\n            ✨ 全新优化的设置面板，采用防抖保存机制，避免频繁写入。\r\n            支持实时预览、状态提示和错误处理，提供更流畅的用户体验。\r\n          </p>\r\n        </SettingsSection>\r\n      </SettingsContent>\r\n    </SettingsContainer>\r\n  );\r\n};\r\n\r\nexport default EnhancedSettingsPanel;\r\n"],"mappings":"AAAA,MAAO,CAAAA,KAAK,EAAIC,QAAQ,CAAEC,SAAS,CAAEC,MAAM,CAAEC,WAAW,CAAEC,OAAO,KAAQ,OAAO,CAChF,MAAO,CAAAC,MAAM,KAAM,mBAAmB,CACtC,MAAO,CAAAC,aAAa,KAAM,8BAA8B,CACxD,MAAO,CAAAC,iBAAiB,KAAM,4BAA4B,CAC1D,OAASC,eAAe,KAAQ,qBAAqB,CAErD;AACA,MAAO,CAAAC,SAAS,KAAM,2BAA2B,CACjD,MAAO,CAAAC,aAAa,KAAM,+BAA+B,CACzD,MAAO,CAAAC,cAAc,KAAM,gCAAgC,CAC3D,MAAO,CAAAC,UAAU,KAAM,4BAA4B,CACnD,MAAO,CAAAC,WAAW,KAAM,6BAA6B,CACrD,MAAO,CAAAC,YAAY,KAAM,8BAA8B,CACvD,MAAO,CAAAC,QAAQ,KAAM,0BAA0B,CAC/C,MAAO,CAAAC,WAAW,KAAM,6BAA6B,CACrD,MAAO,CAAAC,WAAW,KAAM,6BAA6B,CACrD,MAAO,CAAAC,QAAQ,KAAM,0BAA0B,CAC/C,MAAO,CAAAC,eAAe,KAAM,iCAAiC,CAC7D,MAAO,CAAAC,SAAS,KAAM,2BAA2B,CACjD,MAAO,CAAAC,WAAW,KAAM,6BAA6B,CAErD;AAAA,OAAAC,GAAA,IAAAC,IAAA,CAAAC,IAAA,IAAAC,KAAA,CAAAC,QAAA,IAAAC,SAAA,yBACA,KAAM,CAAAC,iBAAiB,CAAGvB,MAAM,CAACwB,GAAG;AACpC;AACA;AACA,WAAWC,KAAK,EAAIA,KAAK,CAACC,MAAM,CAAG,GAAG,CAAG,QAAQ;AACjD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC,CAED,KAAM,CAAAC,cAAc,CAAG3B,MAAM,CAACwB,GAAG;AACjC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC,CAED,KAAM,CAAAI,aAAa,CAAG5B,MAAM,CAAC6B,EAAE;AAC/B;AACA;AACA;AACA;AACA,CAAC,CAED,KAAM,CAAAC,WAAW,CAAG9B,MAAM,CAAC+B,MAAM;AACjC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC,CAED,KAAM,CAAAC,eAAe,CAAGhC,MAAM,CAACwB,GAAG;AAClC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC,CAED,KAAM,CAAAS,eAAe,CAAGjC,MAAM,CAACwB,GAAG;AAClC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC,CAED,KAAM,CAAAU,YAAY,CAAGlC,MAAM,CAACmC,EAAE;AAC9B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC,CAED,KAAM,CAAAC,SAAS,CAAGpC,MAAM,CAACwB,GAAG;AAC5B;AACA;AACA;AACA;AACA;AACA,CAAC,CAED,KAAM,CAAAa,KAAK,CAAGrC,MAAM,CAACsC,KAAK;AAC1B;AACA;AACA;AACA;AACA;AACA,CAAC,CAED,KAAM,CAAAC,KAAK,CAAGvC,MAAM,CAACwC,KAAK;AAC1B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC,CAED,KAAM,CAAAC,MAAM,CAAGzC,MAAM,CAAC0C,MAAM;AAC5B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC,CAED,KAAM,CAAAC,MAAM,CAAG3C,MAAM,CAACwC,KAAK;AAC3B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC,CAED,KAAM,CAAAI,WAAW,CAAG5C,MAAM,CAAC6C,IAAI;AAC/B;AACA;AACA;AACA;AACA;AACA;AACA,CAAC,CAED,KAAM,CAAAC,WAAW,CAAG9C,MAAM,CAACwC,KAAK;AAChC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC,CAED,KAAM,CAAAO,MAAM,CAAG/C,MAAM,CAACsC,KAAK;AAC3B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC,CAED,KAAM,CAAAU,YAAY,CAAGhD,MAAM,CAAC6C,IAAI;AAChC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC,CAED,KAAM,CAAAI,eAAe,CAAGjD,MAAM,CAACwB,GAAG;AAClC;AACA;AACA;AACA;AACA,CAAC,CAED,KAAM,CAAA0B,WAAW,CAAGlD,MAAM,CAAC6C,IAAI;AAC/B;AACA;AACA;AACA,CAAC,CAED,KAAM,CAAAM,WAAW,CAAGnD,MAAM,CAACwB,GAAG;AAC9B;AACA;AACA;AACA;AACA,CAAC,CAED,KAAM,CAAA4B,MAAM,CAAGpD,MAAM,CAAC+B,MAAM;AAC5B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC,CAED,KAAM,CAAAsB,aAAa,CAAGrD,MAAM,CAACwB,GAAG;AAChC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC,CAED,KAAM,CAAA8B,cAAc,CAAGtD,MAAM,CA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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}