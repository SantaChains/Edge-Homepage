{"ast":null,"code":"import React,{useState,useContext}from'react';import styled from'styled-components';import{buildSearchUrl,cleanUrl}from'../../utils/urlHandler';import{SettingsContext}from'../../contexts/SettingsContext';// 图标导入\nimport SearchIcon from'@mui/icons-material/Search';import CleaningServicesIcon from'@mui/icons-material/CleaningServices';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const SearchContainer=styled.div`\n  width: 100%;\n  max-width: 600px;\n  margin: 0 auto;\n  padding: 10px;\n`;const SearchForm=styled.form`\n  display: flex;\n  align-items: center;\n  background-color: var(--card-background);\n  border-radius: 24px;\n  padding: 5px 15px;\n  box-shadow: 0 2px 5px var(--shadow-color);\n  transition: all var(--transition-speed);\n  \n  &:focus-within {\n    box-shadow: 0 4px 10px var(--shadow-color);\n    transform: translateY(-2px);\n  }\n`;const SearchInput=styled.input`\n  flex: 1;\n  border: none;\n  background: transparent;\n  padding: 10px;\n  font-size: 16px;\n  color: var(--text-color);\n  outline: none;\n`;const SearchButton=styled.button`\n  background: none;\n  border: none;\n  color: var(--text-secondary-color);\n  cursor: pointer;\n  padding: 8px;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  transition: color var(--transition-speed);\n  \n  &:hover {\n    color: var(--primary-color);\n  }\n`;const CleanButton=styled(SearchButton)`\n  margin-right: 5px;\n  color: ${props=>props.active?'var(--primary-color)':'var(--text-secondary-color)'};\n`;const EngineSelector=styled.div`\n  display: flex;\n  justify-content: center;\n  margin-top: 10px;\n  gap: 10px;\n`;const EngineOption=styled.button`\n  background: none;\n  border: none;\n  padding: 5px 10px;\n  cursor: pointer;\n  font-size: 14px;\n  color: ${props=>props.active?'var(--primary-color)':'var(--text-secondary-color)'};\n  font-weight: ${props=>props.active?'500':'normal'};\n  border-bottom: ${props=>props.active?'2px solid var(--primary-color)':'none'};\n  transition: all var(--transition-speed);\n  \n  &:hover {\n    color: var(--primary-color);\n  }\n`;const Search=()=>{const{settings,updateSpecificSettings}=useContext(SettingsContext);const[query,setQuery]=useState('');const[autoClean,setAutoClean]=useState(settings.search.autoCleanUrl);const[engine,setEngine]=useState(settings.search.defaultEngine);// 处理搜索提交\nconst handleSubmit=e=>{e.preventDefault();if(!query.trim())return;const searchUrl=buildSearchUrl(query,engine,autoClean);if(settings.search.openInNewTab){window.open(searchUrl,'_blank');}else{window.location.href=searchUrl;}};// 处理输入变化\nconst handleInputChange=e=>{setQuery(e.target.value);};// 切换自动清理URL\nconst toggleAutoClean=()=>{const newValue=!autoClean;setAutoClean(newValue);updateSpecificSettings('search.autoCleanUrl',newValue);};// 切换搜索引擎\nconst changeEngine=newEngine=>{setEngine(newEngine);updateSpecificSettings('search.defaultEngine',newEngine);};return/*#__PURE__*/_jsxs(SearchContainer,{children:[/*#__PURE__*/_jsxs(SearchForm,{onSubmit:handleSubmit,children:[/*#__PURE__*/_jsx(SearchInput,{type:\"text\",placeholder:\"\\u641C\\u7D22\\u6216\\u8F93\\u5165\\u7F51\\u5740\",value:query,onChange:handleInputChange,autoFocus:true}),/*#__PURE__*/_jsx(CleanButton,{type:\"button\",onClick:toggleAutoClean,active:autoClean,title:autoClean?'已启用URL清理':'已禁用URL清理',children:/*#__PURE__*/_jsx(CleaningServicesIcon,{fontSize:\"small\"})}),/*#__PURE__*/_jsx(SearchButton,{type:\"submit\",title:\"\\u641C\\u7D22\",children:/*#__PURE__*/_jsx(SearchIcon,{})})]}),/*#__PURE__*/_jsxs(EngineSelector,{children:[/*#__PURE__*/_jsx(EngineOption,{onClick:()=>changeEngine('bing'),active:engine==='bing',children:\"\\u5FC5\\u5E94\"}),/*#__PURE__*/_jsx(EngineOption,{onClick:()=>changeEngine('google'),active:engine==='google',children:\"\\u8C37\\u6B4C\"}),/*#__PURE__*/_jsx(EngineOption,{onClick:()=>changeEngine('baidu'),active:engine==='baidu',children:\"\\u767E\\u5EA6\"}),/*#__PURE__*/_jsx(EngineOption,{onClick:()=>changeEngine('sogou'),active:engine==='sogou',children:\"\\u641C\\u72D7\"}),/*#__PURE__*/_jsx(EngineOption,{onClick:()=>changeEngine('mita'),active:engine==='mita',children:\"\\u79D8\\u5854AI\"})]})]});};export default Search;","map":{"version":3,"names":["React","useState","useContext","styled","buildSearchUrl","cleanUrl","SettingsContext","SearchIcon","CleaningServicesIcon","jsx","_jsx","jsxs","_jsxs","SearchContainer","div","SearchForm","form","SearchInput","input","SearchButton","button","CleanButton","props","active","EngineSelector","EngineOption","Search","settings","updateSpecificSettings","query","setQuery","autoClean","setAutoClean","search","autoCleanUrl","engine","setEngine","defaultEngine","handleSubmit","e","preventDefault","trim","searchUrl","openInNewTab","window","open","location","href","handleInputChange","target","value","toggleAutoClean","newValue","changeEngine","newEngine","children","onSubmit","type","placeholder","onChange","autoFocus","onClick","title","fontSize"],"sources":["D:/Jliu Pureey/Documents/Editor/extion/homepage/src/components/Search/Search.js"],"sourcesContent":["import React, { useState, useContext } from 'react';\r\nimport styled from 'styled-components';\r\nimport { buildSearchUrl, cleanUrl } from '../../utils/urlHandler';\r\nimport { SettingsContext } from '../../contexts/SettingsContext';\r\n\r\n// 图标导入\r\nimport SearchIcon from '@mui/icons-material/Search';\r\nimport CleaningServicesIcon from '@mui/icons-material/CleaningServices';\r\n\r\nconst SearchContainer = styled.div`\r\n  width: 100%;\r\n  max-width: 600px;\r\n  margin: 0 auto;\r\n  padding: 10px;\r\n`;\r\n\r\nconst SearchForm = styled.form`\r\n  display: flex;\r\n  align-items: center;\r\n  background-color: var(--card-background);\r\n  border-radius: 24px;\r\n  padding: 5px 15px;\r\n  box-shadow: 0 2px 5px var(--shadow-color);\r\n  transition: all var(--transition-speed);\r\n  \r\n  &:focus-within {\r\n    box-shadow: 0 4px 10px var(--shadow-color);\r\n    transform: translateY(-2px);\r\n  }\r\n`;\r\n\r\nconst SearchInput = styled.input`\r\n  flex: 1;\r\n  border: none;\r\n  background: transparent;\r\n  padding: 10px;\r\n  font-size: 16px;\r\n  color: var(--text-color);\r\n  outline: none;\r\n`;\r\n\r\nconst SearchButton = styled.button`\r\n  background: none;\r\n  border: none;\r\n  color: var(--text-secondary-color);\r\n  cursor: pointer;\r\n  padding: 8px;\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n  transition: color var(--transition-speed);\r\n  \r\n  &:hover {\r\n    color: var(--primary-color);\r\n  }\r\n`;\r\n\r\nconst CleanButton = styled(SearchButton)`\r\n  margin-right: 5px;\r\n  color: ${props => props.active ? 'var(--primary-color)' : 'var(--text-secondary-color)'};\r\n`;\r\n\r\nconst EngineSelector = styled.div`\r\n  display: flex;\r\n  justify-content: center;\r\n  margin-top: 10px;\r\n  gap: 10px;\r\n`;\r\n\r\nconst EngineOption = styled.button`\r\n  background: none;\r\n  border: none;\r\n  padding: 5px 10px;\r\n  cursor: pointer;\r\n  font-size: 14px;\r\n  color: ${props => props.active ? 'var(--primary-color)' : 'var(--text-secondary-color)'};\r\n  font-weight: ${props => props.active ? '500' : 'normal'};\r\n  border-bottom: ${props => props.active ? '2px solid var(--primary-color)' : 'none'};\r\n  transition: all var(--transition-speed);\r\n  \r\n  &:hover {\r\n    color: var(--primary-color);\r\n  }\r\n`;\r\n\r\nconst Search = () => {\r\n  const { settings, updateSpecificSettings } = useContext(SettingsContext);\r\n  const [query, setQuery] = useState('');\r\n  const [autoClean, setAutoClean] = useState(settings.search.autoCleanUrl);\r\n  const [engine, setEngine] = useState(settings.search.defaultEngine);\r\n  \r\n  // 处理搜索提交\r\n  const handleSubmit = (e) => {\r\n    e.preventDefault();\r\n    \r\n    if (!query.trim()) return;\r\n    \r\n    const searchUrl = buildSearchUrl(query, engine, autoClean);\r\n    \r\n    if (settings.search.openInNewTab) {\r\n      window.open(searchUrl, '_blank');\r\n    } else {\r\n      window.location.href = searchUrl;\r\n    }\r\n  };\r\n  \r\n  // 处理输入变化\r\n  const handleInputChange = (e) => {\r\n    setQuery(e.target.value);\r\n  };\r\n  \r\n  // 切换自动清理URL\r\n  const toggleAutoClean = () => {\r\n    const newValue = !autoClean;\r\n    setAutoClean(newValue);\r\n    updateSpecificSettings('search.autoCleanUrl', newValue);\r\n  };\r\n  \r\n  // 切换搜索引擎\r\n  const changeEngine = (newEngine) => {\r\n    setEngine(newEngine);\r\n    updateSpecificSettings('search.defaultEngine', newEngine);\r\n  };\r\n  \r\n  return (\r\n    <SearchContainer>\r\n      <SearchForm onSubmit={handleSubmit}>\r\n        <SearchInput\r\n          type=\"text\"\r\n          placeholder=\"搜索或输入网址\"\r\n          value={query}\r\n          onChange={handleInputChange}\r\n          autoFocus\r\n        />\r\n        <CleanButton\r\n          type=\"button\"\r\n          onClick={toggleAutoClean}\r\n          active={autoClean}\r\n          title={autoClean ? '已启用URL清理' : '已禁用URL清理'}\r\n        >\r\n          <CleaningServicesIcon fontSize=\"small\" />\r\n        </CleanButton>\r\n        <SearchButton type=\"submit\" title=\"搜索\">\r\n          <SearchIcon />\r\n        </SearchButton>\r\n      </SearchForm>\r\n      \r\n      <EngineSelector>\r\n        <EngineOption\r\n          onClick={() => changeEngine('bing')}\r\n          active={engine === 'bing'}\r\n        >\r\n          必应\r\n        </EngineOption>\r\n        <EngineOption\r\n          onClick={() => changeEngine('google')}\r\n          active={engine === 'google'}\r\n        >\r\n          谷歌\r\n        </EngineOption>\r\n        <EngineOption\r\n          onClick={() => changeEngine('baidu')}\r\n          active={engine === 'baidu'}\r\n        >\r\n          百度\r\n        </EngineOption>\r\n        <EngineOption\r\n          onClick={() => changeEngine('sogou')}\r\n          active={engine === 'sogou'}\r\n        >\r\n          搜狗\r\n        </EngineOption>\r\n        <EngineOption\r\n          onClick={() => changeEngine('mita')}\r\n          active={engine === 'mita'}\r\n        >\r\n          秘塔AI\r\n        </EngineOption>\r\n      </EngineSelector>\r\n    </SearchContainer>\r\n  );\r\n};\r\n\r\nexport default Search;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}